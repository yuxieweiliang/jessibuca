!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).jessibuca=t()}(this,(function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t){return e(t={exports:{}},t.exports),t.exports}var i,o=t((function(e){e.exports=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e},e.exports.__esModule=!0,e.exports.default=e.exports})),r=(i=o)&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;const n=0,a=1,s="flv",A="m7s",c={videoBuffer:1e3,isResize:!0,isFullResize:!1,isFlv:!1,debug:!1,hotKey:!1,loadingTimeout:10,heartTimeout:10,timeout:10,webRTCRefreshTime:36e5,offLineReconnectTime:3e3,supportDblclickFullscreen:!1,showBandwidth:!1,keepScreenOn:!1,isNotMute:!1,hasAudio:!0,hasVideo:!0,useWebRTC:!0,operateBtns:{fullscreen:!1,screenshot:!1,play:!1,audio:!1,record:!1},hasControl:!1,loadingText:"",background:"",decoder:"decoder.js",url:"",rotate:0,forceNoOffscreen:!0,hiddenAutoPause:!1,protocol:a,demuxType:s,useWCS:!1,useMSE:!1,useOffscreen:!1},d="init",l="initVideo",u="render",h="playAudio",p="initAudio",m="audioCode",f="videoCode",g=1,b=2,v=8,y=9,w="init",S="decode",C="audioDecode",E="close",R={fullscreen:"fullscreen$2",webFullscreen:"webFullscreen",decoderWorkerInit:"decoderWorkerInit",play:"play",playing:"playing",pause:"pause",mute:"mute",load:"load",loading:"loading",videoInfo:"videoInfo",timeUpdate:"timeUpdate",audioInfo:"audioInfo",log:"log",error:"error",connectError:"connectError",kBps:"kBps",timeout:"timeout",delayTimeout:"delayTimeout",loadingTimeout:"loadingTimeout",stats:"stats",performance:"performance",record:"record",recording:"recording",recordingTimestamp:"recordingTimestamp",recordStart:"recordStart",recordEnd:"recordEnd",recordCreateError:"recordCreateError",buffer:"buffer",videoFrame:"videoFrame",start:"start",metadata:"metadata",resize:"resize",streamEnd:"streamEnd",streamSuccess:"streamSuccess",streamMessage:"streamMessage",streamError:"streamError",volumechange:"volumechange",destroy:"destroy",mseSourceOpen:"mseSourceOpen",mseSourceClose:"mseSourceClose",mseSourceBufferError:"mseSourceBufferError",mseSourceBufferBusy:"mseSourceBufferBusy",videoWaiting:"videoWaiting",videoTimeUpdate:"videoTimeUpdate",videoSyncAudio:"videoSyncAudio",playToRenderTimes:"playToRenderTimes"},T={load:R.load,timeUpdate:R.timeUpdate,videoInfo:R.videoInfo,audioInfo:R.audioInfo,error:R.error,connectError:R.connectError,kBps:R.kBps,log:R.log,start:R.start,timeout:R.timeout,loadingTimeout:R.loadingTimeout,delayTimeout:R.delayTimeout,fullscreen:"fullscreen",play:R.play,pause:R.pause,mute:R.mute,stats:R.stats,performance:R.performance,recordingTimestamp:R.recordingTimestamp,recordStart:R.recordStart,recordEnd:R.recordEnd,playToRenderTimes:R.playToRenderTimes},k={playError:"playIsNotPauseOrUrlIsNull",fetchError:"fetchError",websocketError:"websocketError",webcodecsH265NotSupport:"webcodecsH265NotSupport",mediaSourceH265NotSupport:"mediaSourceH265NotSupport",wasmDecodeError:"wasmDecodeError"},x="notConnect",B="open",M="close",I="error",L={download:"download",base64:"base64",blob:"blob"},_={7:"H264(AVC)",12:"H265(HEVC)"},D=7,z=12,j={10:"AAC",7:"ALAW",8:"MULAW"},V=32,F=33,O=34,U=0,W=1,Q=2,P="mp4",H="webm",N="webcodecs",G="webgl",$="offscreen",q="key",Z="delta",Y='video/mp4; codecs="avc1.64002A"',X="ended",J="open",K="closed",ee=1e3,te=27,ie=38,oe=40;class re{constructor(e){this.log=function(t){if(e._opt.debug){for(var i=arguments.length,o=new Array(i>1?i-1:0),r=1;r<i;r++)o[r-1]=arguments[r];console.log(`Jessibuca: [${t}]`,...o)}},this.warn=function(t){if(e._opt.debug){for(var i=arguments.length,o=new Array(i>1?i-1:0),r=1;r<i;r++)o[r-1]=arguments[r];console.warn(`Jessibuca: [${t}]`,...o)}},this.error=function(t){if(e._opt.debug){for(var i=arguments.length,o=new Array(i>1?i-1:0),r=1;r<i;r++)o[r-1]=arguments[r];console.error(`Jessibuca: [${t}]`,...o)}}}}class ne{constructor(e){this.destroys=[],this.proxy=this.proxy.bind(this),this.master=e}proxy(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!e)return;if(Array.isArray(t))return t.map((t=>this.proxy(e,t,i,o)));e.addEventListener(t,i,o);const r=()=>e.removeEventListener(t,i,o);return this.destroys.push(r),r}destroy(){this.master.debug.log("Events","destroy"),this.destroys.forEach((e=>e()))}}var ae=t((function(e){!function(){var t="undefined"!=typeof window&&void 0!==window.document?window.document:{},i=e.exports,o=function(){for(var e,i=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],o=0,r=i.length,n={};o<r;o++)if((e=i[o])&&e[1]in t){for(o=0;o<e.length;o++)n[i[0][o]]=e[o];return n}return!1}(),r={change:o.fullscreenchange,error:o.fullscreenerror},n={request:function(e,i){return new Promise(function(r,n){var a=function(){this.off("change",a),r()}.bind(this);this.on("change",a);var s=(e=e||t.documentElement)[o.requestFullscreen](i);s instanceof Promise&&s.then(a).catch(n)}.bind(this))},exit:function(){return new Promise(function(e,i){if(this.isFullscreen){var r=function(){this.off("change",r),e()}.bind(this);this.on("change",r);var n=t[o.exitFullscreen]();n instanceof Promise&&n.then(r).catch(i)}else e()}.bind(this))},toggle:function(e,t){return this.isFullscreen?this.exit():this.request(e,t)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,i){var o=r[e];o&&t.addEventListener(o,i,!1)},off:function(e,i){var o=r[e];o&&t.removeEventListener(o,i,!1)},raw:o};o?(Object.defineProperties(n,{isFullscreen:{get:function(){return Boolean(t[o.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[o.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(t[o.fullscreenEnabled])}}}),i?e.exports=n:window.screenfull=n):i?e.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}}()}));function se(){}function Ae(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=e.split(","),i=atob(t[1]),o=t[0].replace("data:","").replace(";base64","");let r=i.length,n=new Uint8Array(r);for(;r--;)n[r]=i.charCodeAt(r);return new File([n],"file",{type:o})}function ce(e,t){const i=document.createElement("a");i.download=t,i.href=URL.createObjectURL(e),i.click(),URL.revokeObjectURL(e)}function de(){return(new Date).getTime()}function le(e,t,i){return Math.max(Math.min(e,Math.max(t,i)),Math.min(t,i))}function ue(e,t,i){if(e)return"object"==typeof t&&Object.keys(t).forEach((i=>{ue(e,i,t[i])})),e.style[t]=i,e}function he(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e)return 0;const o=getComputedStyle(e,null).getPropertyValue(t);return i?parseFloat(o):o}function pe(){return performance&&"function"==typeof performance.now?performance.now():Date.now()}function me(e){let t=0,i=pe();return o=>{t+=o;const r=pe(),n=r-i;n>=1e3&&(e(t/n*1e3),i=r,t=0)}}function fe(e){if(null==e||""===e)return"0 KB/S";let t=parseFloat(e);return t=t.toFixed(2),t+"KB/S"}function ge(e){return null==e}function be(e){return!ge(e)}function ve(e,t){return be(e)&&"number"==typeof e&&"number"==typeof+e?t&&t>e?t:e:t}ae.isEnabled,(()=>{try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){const e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){}})();class ye{on(e,t,i){const o=this.e||(this.e={});return(o[e]||(o[e]=[])).push({fn:t,ctx:i}),this}once(e,t,i){const o=this;function r(){o.off(e,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];t.apply(i,a)}return r._=t,this.on(e,r,i)}emit(e){const t=((this.e||(this.e={}))[e]||[]).slice();for(var i=arguments.length,o=new Array(i>1?i-1:0),r=1;r<i;r++)o[r-1]=arguments[r];for(let e=0;e<t.length;e+=1)t[e].fn.apply(t[e].ctx,o);return this}off(e,t){const i=this.e||(this.e={});if(!e)return Object.keys(i).forEach((e=>{delete i[e]})),void delete this.e;const o=i[e],r=[];if(o&&t)for(let e=0,i=o.length;e<i;e+=1)o[e].fn!==t&&o[e].fn._!==t&&r.push(o[e]);return r.length?i[e]=r:delete i[e],this}}class we extends ye{constructor(){super(),this.init=!1}updateVideoInfo(e){e.encTypeCode&&(this.videoInfo.encType=_[e.encTypeCode]),e.width&&(this.videoInfo.width=e.width),e.height&&(this.videoInfo.height=e.height),this.videoInfo.encType&&this.videoInfo.height&&this.videoInfo.width&&!this.init&&(this.player.emit(R.videoInfo,this.videoInfo),this.init=!0)}}class Se extends we{constructor(e){super(),this.player=e;const t=document.createElement("canvas");t.style.position="absolute",t.style.top=0,t.style.left=0,this.$videoElement=t,e.$container.appendChild(this.$videoElement),this.context2D=null,this.contextGl=null,this.contextGlRender=null,this.contextGlDestroy=null,this.bitmaprenderer=null,this.renderType=null,this.videoInfo={width:"",height:"",encType:""},this._initCanvasRender(),this.player.debug.log("CanvasVideo","init")}destroy(){this.contextGl&&(this.contextGl=null),this.context2D&&(this.context2D=null),this.contextGlRender&&(this.contextGlDestroy&&this.contextGlDestroy(),this.contextGlDestroy=null,this.contextGlRender=null),this.bitmaprenderer&&(this.bitmaprenderer=null),this.renderType=null,this.videoInfo={width:"",height:"",encType:"",encTypeCode:""},this.player.$container.removeChild(this.$videoElement),this.init=!1,this.off(),this.player.debug.log("CanvasVideoLoader","destroy")}_initContextGl(){this.contextGl=function(e){let t=null;const i=["webgl","experimental-webgl","moz-webgl","webkit-3d"];let o=0;for(;!t&&o<i.length;){const r=i[o];try{let i={preserveDrawingBuffer:!0};t=e.getContext(r,i)}catch(e){t=null}t&&"function"==typeof t.getParameter||(t=null),++o}return t}(this.$videoElement);const e=(e=>{var t=["attribute vec4 vertexPos;","attribute vec4 texturePos;","varying vec2 textureCoord;","void main()","{","gl_Position = vertexPos;","textureCoord = texturePos.xy;","}"].join("\n"),i=["precision highp float;","varying highp vec2 textureCoord;","uniform sampler2D ySampler;","uniform sampler2D uSampler;","uniform sampler2D vSampler;","const mat4 YUV2RGB = mat4","(","1.1643828125, 0, 1.59602734375, -.87078515625,","1.1643828125, -.39176171875, -.81296875, .52959375,","1.1643828125, 2.017234375, 0, -1.081390625,","0, 0, 0, 1",");","void main(void) {","highp float y = texture2D(ySampler,  textureCoord).r;","highp float u = texture2D(uSampler,  textureCoord).r;","highp float v = texture2D(vSampler,  textureCoord).r;","gl_FragColor = vec4(y, u, v, 1) * YUV2RGB;","}"].join("\n"),o=e.createShader(e.VERTEX_SHADER);e.shaderSource(o,t),e.compileShader(o),e.getShaderParameter(o,e.COMPILE_STATUS)||console.log("Vertex shader failed to compile: "+e.getShaderInfoLog(o));var r=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(r,i),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)||console.log("Fragment shader failed to compile: "+e.getShaderInfoLog(r));var n=e.createProgram();e.attachShader(n,o),e.attachShader(n,r),e.linkProgram(n),e.getProgramParameter(n,e.LINK_STATUS)||console.log("Program failed to compile: "+e.getProgramInfoLog(n)),e.useProgram(n);var a=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,a),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),e.STATIC_DRAW);var s=e.getAttribLocation(n,"vertexPos");e.enableVertexAttribArray(s),e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0);var A=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,A),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),e.STATIC_DRAW);var c=e.getAttribLocation(n,"texturePos");function d(t,i){var o=e.createTexture();return e.bindTexture(e.TEXTURE_2D,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,null),e.uniform1i(e.getUniformLocation(n,t),i),o}e.enableVertexAttribArray(c),e.vertexAttribPointer(c,2,e.FLOAT,!1,0,0);var l=d("ySampler",0),u=d("uSampler",1),h=d("vSampler",2);return{render:function(t,i,o,r,n){e.viewport(0,0,t,i),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,l),e.texImage2D(e.TEXTURE_2D,0,e.LUMINANCE,t,i,0,e.LUMINANCE,e.UNSIGNED_BYTE,o),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,u),e.texImage2D(e.TEXTURE_2D,0,e.LUMINANCE,t/2,i/2,0,e.LUMINANCE,e.UNSIGNED_BYTE,r),e.activeTexture(e.TEXTURE2),e.bindTexture(e.TEXTURE_2D,h),e.texImage2D(e.TEXTURE_2D,0,e.LUMINANCE,t/2,i/2,0,e.LUMINANCE,e.UNSIGNED_BYTE,n),e.drawArrays(e.TRIANGLE_STRIP,0,4)},destroy:function(){try{e.deleteProgram(n),e.deleteBuffer(a),e.deleteBuffer(A),e.deleteTexture(l),e.deleteTexture(u),e.deleteBuffer(h)}catch(e){}}}})(this.contextGl);this.contextGlRender=e.render,this.contextGlDestroy=e.destroy}_initContext2D(){this.context2D=this.$videoElement.getContext("2d")}_initCanvasRender(){this.player._opt.useWCS&&!this._supportOffscreen()?(this.renderType=N,this._initContext2D()):this._supportOffscreen()?(this.renderType=$,this._bindOffscreen()):(this.renderType=G,this._initContextGl())}_supportOffscreen(){return"function"==typeof this.$videoElement.transferControlToOffscreen&&this.player._opt.useOffscreen}_bindOffscreen(){this.bitmaprenderer=this.$videoElement.getContext("bitmaprenderer")}initCanvasViewSize(){this.$videoElement.width=this.videoInfo.width,this.$videoElement.height=this.videoInfo.height,this.resize()}render(e){switch(this.player.videoTimestamp=e.ts,this.renderType){case $:this.bitmaprenderer.transferFromImageBitmap(e.buffer);break;case G:this.contextGlRender(this.$videoElement.width,this.$videoElement.height,e.output[0],e.output[1],e.output[2]);break;case N:this.context2D.drawImage(e.videoFrame,0,0,this.$videoElement.width,this.$videoElement.height)}}screenshot(e,t,i,o){e=e||de(),o=o||L.download;const r={png:"image/png",jpeg:"image/jpeg",webp:"image/webp"};let n=.92;!r[t]&&L[t]&&(o=t,t="png",i=void 0),"string"==typeof i&&(o=i,i=void 0),void 0!==i&&(n=Number(i));const a=this.$videoElement.toDataURL(r[t]||r.png,n),s=Ae(a);return o===L.base64?a:o===L.blob?s:void(o===L.download&&ce(s,e))}clearView(){switch(this.renderType){case $:(function(e,t){const i=document.createElement("canvas");return i.width=e,i.height=t,createImageBitmap(i,0,0,e,t)})(this.$videoElement.width,this.$videoElement.height).then((e=>{this.bitmaprenderer.transferFromImageBitmap(e)}));break;case G:this.contextGl.clear(this.contextGl.COLOR_BUFFER_BIT);break;case N:this.context2D.clearRect(0,0,this.$videoElement.width,this.$videoElement.height)}}resize(){this.player.debug.log("canvasVideo","resize");const e=this.player._opt,t=this.player.width;let i=this.player.height;e.hasControl&&(i-=0);let o=this.$videoElement.width,r=this.$videoElement.height;const n=e.rotate;let a=(t-o)/2,s=(i-r)/2;270!==n&&90!==n||(o=this.$videoElement.height,r=this.$videoElement.width);const A=t/o,c=i/r;let d=A>c?c:A;e.isResize||A!==c&&(d=A+","+c),e.isFullResize&&(d=A>c?A:c);let l="scale("+d+")";n&&(l+=" rotate("+n+"deg)"),this.$videoElement.style.transform=l,this.$videoElement.style.left=a+"px",this.$videoElement.style.top=s+"px"}}function Ce(e,t){return function(i,o){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"block";e&&e[i]&&ue(e[i],"display",t<o?"none":r)}}class Ee extends we{constructor(e){super(),this.player=e;const t=document.createElement("video");t.muted=!0,t.style.position="absolute",t.style.top=0,t.style.left=0,t.setAttribute("start-time",Date.now()),e._opt.useWebRTC||e.$container.appendChild(t),e.$container.$videoElement=t,this.$videoElement=t,this.videoInfo={width:"",height:"",encType:""},this.resize();const{proxy:i}=this.player.events;i(this.$videoElement,"canplay",(()=>{this.player.debug.log("Video","canplay")})),i(this.$videoElement,"waiting",(()=>{this.player.emit(R.videoWaiting)})),i(this.$videoElement,"timeupdate",(e=>{})),this.player.debug.log("Video","init")}destroy(){this.$videoElement&&this.player.$container.contains(this.$videoElement)&&this.player.$container.removeChild(this.$videoElement),this.$videoElement=null,this.init=!1,this.off(),this.player.debug.log("Video","destroy")}play(){this.$videoElement.play()}clearView(){}screenshot(e,t,i,o){e=e||de(),o=o||L.download;let r=.92;!{png:"image/png",jpeg:"image/jpeg",webp:"image/webp"}[t]&&L[t]&&(o=t,t="png",i=void 0),"string"==typeof i&&(o=i,i=void 0),void 0!==i&&(r=Number(i));const n=this.$videoElement;let a=document.createElement("canvas");a.width=n.videoWidth,a.height=n.videoHeight;a.getContext("2d").drawImage(n,0,0,a.width,a.height);const s=a.toDataURL(L[t]||L.png,r),A=Ae(s);return o===L.base64?s:o===L.blob?A:void(o===L.download&&ce(A,e))}initCanvasViewSize(){this.resize()}resize(){const e=this.player.control,t=this.player.width;this.$videoElement.width=t,this.$videoElement.height=this.player._opt.hasControl?this.player.height-0:this.player.height;const i=this.player._opt;let o="contain";const r=i.rotate,n=Ce(e,t);i.isResize||(o="fill"),i.isFullResize&&(o="none"),this.$videoElement.style.objectFit=o;const a=this.$videoElement.style.transform;this.$videoElement.style.transform=a||"rotate("+r+"deg)",n("$screenshot",500),i.operateBtns.transform&&(e&&e.movement?n("$movementActive",600):n("$movement",600),n("$movementWrap",600)),i.operateBtns.transform&&(e&&e.transform?n("$transformActive",500):n("$transform",500)),i.operateBtns.zoom&&(e&&e.zoom>=2?(n("$zoomEnlarge",300),n("$zoomMinimizeActive",300)):e&&e.zoom<2&&e.zoom>1?(n("$zoomEnlargeActive",300),n("$zoomMinimizeActive",300)):(n("$zoomEnlargeActive",300),n("$zoomMinimize",300))),i.operateBtns.play&&(this.player.playing?n("$pause",300,"flex"):n("$play",300,"flex")),i.operateBtns.audio&&(this.player.audio&&this.player.audio.volume>0?n("$volumeOn",300,"flex"):n("$volumeOff",300,"flex")),this.player.recorder&&this.player.recording?n("$recordStop",300):n("$record",300),this.player&&this.player.control&&this.player.control.emit("resize",this.$videoElement)}getNewVideo(e){return new Ee(e)}resetVideo(){if(this.player.$container&&this.player.$container.$videoElement){this.player.$container.$videoElement&&(this.destroy(),this.player.$container.$videoElement=null,this.$videoElement=null,this.videoInfo=null,this.player.video=null,this.player.video=new Ee(this.player))}}destroyVideo(e){this.player.$container&&e&&(this.player.$container.contains(e)&&this.player.$container.removeChild(e),this.init=!1,this.off(),this.player.debug.log("Video","destroy"),e=null)}}class Re{constructor(e){return new(Re.getLoaderFactory(e._opt))(e)}static getLoaderFactory(e){return e.useMSE?Ee:Se}}class Te extends ye{constructor(e){super(),this.bufferList=[],this.player=e,this.scriptNode=null,this.hasInitScriptNode=!1,this.audioContextChannel=null,this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.gainNode=this.audioContext.createGain();const t=this.audioContext.createBufferSource();t.buffer=this.audioContext.createBuffer(1,1,22050),t.connect(this.audioContext.destination),t.noteOn?t.noteOn(0):t.start(0),this.audioBufferSourceNode=t,this.mediaStreamAudioDestinationNode=this.audioContext.createMediaStreamDestination(),this.audioEnabled(!0),this.gainNode.gain.value=0,this.playing=!1,this.audioSyncVideoOption={diff:null},this.audioInfo={encType:"",channels:"",sampleRate:""},this.init=!1,this.hasAudio=!1,this.on(R.videoSyncAudio,(e=>{this.player.debug.log("AudioContext",`videoSyncAudio , audioTimestamp: ${e.audioTimestamp},videoTimestamp: ${e.videoTimestamp},diff:${e.diff}`),this.audioSyncVideoOption=e})),this.player.debug.log("AudioContext","init")}destroy(){this.closeAudio(),this.audioContext.close(),this.audioContext=null,this.gainNode=null,this.init=!1,this.hasAudio=!1,this.playing=!1,this.scriptNode&&(this.scriptNode.onaudioprocess=se,this.scriptNode=null),this.audioBufferSourceNode=null,this.mediaStreamAudioDestinationNode=null,this.hasInitScriptNode=!1,this.audioSyncVideoOption={diff:null},this.audioInfo={encType:"",channels:"",sampleRate:""},this.off(),this.player.debug.log("AudioContext","destroy")}updateAudioInfo(e){e.encTypeCode&&(this.audioInfo.encType=j[e.encTypeCode]),e.channels&&(this.audioInfo.channels=e.channels),e.sampleRate&&(this.audioInfo.sampleRate=e.sampleRate),this.audioInfo.sampleRate&&this.audioInfo.channels&&this.audioInfo.encType&&!this.init&&(this.player.emit(R.audioInfo,this.audioInfo),this.init=!0)}get isPlaying(){return this.playing}get isMute(){return 0===this.gainNode.gain.value||this.isStateSuspended()}get volume(){return this.gainNode.gain.value}get bufferSize(){return this.bufferList.length}initScriptNode(){if(this.playing=!0,this.hasInitScriptNode)return;const e=this.audioInfo.channels,t=this.audioContext.createScriptProcessor(1024,0,e);t.onaudioprocess=t=>{const i=t.outputBuffer;if(this.bufferList.length&&this.playing){if(!this.player._opt.useWCS&&!this.player._opt.useMSE){if(this.audioSyncVideoOption.diff>ee)return void this.player.debug.warn("AudioContext",`audioSyncVideoOption more than diff :${this.audioSyncVideoOption.diff}, waiting`);if(this.audioSyncVideoOption.diff<-1e3){this.player.debug.warn("AudioContext",`audioSyncVideoOption less than diff :${this.audioSyncVideoOption.diff}, dropping`);let e=this.bufferList.shift();for(;e.ts-this.player.videoTimestamp<-1e3&&this.bufferList.length>0;)e=this.bufferList.shift();if(0===this.bufferList.length)return}}if(0===this.bufferList.length)return;const t=this.bufferList.shift();t&&t.ts&&(this.player.audioTimestamp=t.ts);for(let o=0;o<e;o++){const e=t.buffer[o],r=i.getChannelData(o);for(let t=0;t<1024;t++)r[t]=e[t]||0}}},t.connect(this.gainNode),this.scriptNode=t,this.gainNode.connect(this.audioContext.destination),this.gainNode.connect(this.mediaStreamAudioDestinationNode),this.hasInitScriptNode=!0}mute(e){e?(this.isMute||this.player.emit(R.mute,e),this.setVolume(0),this.audioEnabled(!1),this.clear()):(this.isMute&&this.player.emit(R.mute,e),this.setVolume(.5),this.audioEnabled(!0))}setVolume(e){e=parseFloat(e).toFixed(2),isNaN(e)||(this.audioEnabled(!0),e=le(e,0,1),this.gainNode.gain.value=e,this.gainNode.gain.setValueAtTime(e,this.audioContext.currentTime),this.player.emit(R.volumechange,this.player.volume))}closeAudio(){this.hasInitScriptNode&&(this.scriptNode&&this.scriptNode.disconnect(this.gainNode),this.gainNode&&this.gainNode.disconnect(this.audioContext.destination),this.gainNode&&this.gainNode.disconnect(this.mediaStreamAudioDestinationNode)),this.clear()}audioEnabled(e){e?"suspended"===this.audioContext.state&&this.audioContext.resume():"running"===this.audioContext.state&&this.audioContext.suspend()}isStateRunning(){return"running"===this.audioContext.state}isStateSuspended(){return"suspended"===this.audioContext.state}clear(){this.bufferList=[]}play(e,t){this.isMute||(this.hasAudio=!0,this.bufferList.push({buffer:e,ts:t}),this.bufferList.length>20&&(this.player.debug.warn("AudioContext",`bufferList is large: ${this.bufferList.length}`),this.bufferList.length>50&&this.bufferList.shift()))}pause(){this.audioSyncVideoOption={diff:null},this.playing=!1,this.clear()}resume(){this.playing=!0}}class ke{constructor(e){return new(ke.getLoaderFactory())(e)}static getLoaderFactory(){return Te}}class xe extends ye{constructor(e){super(),this.player=e,this.playing=!1,this.abortController=new AbortController,this.streamRate=me((t=>{e.emit(R.kBps,(t/1024).toFixed(2))})),e.debug.log("FetchStream","init")}destroy(){this.abort(),this.off(),this.streamRate=null,this.player.debug.log("FetchStream","destroy")}fetchStream(e){const{demux:t}=this.player;this.player._times.streamStart=de(),fetch(e,{signal:this.abortController.signal}).then((e=>{const i=e.body.getReader();this.emit(R.streamSuccess);const o=()=>{i.read().then((e=>{let{done:i,value:r}=e;i?t.close():(this.streamRate&&this.streamRate(r.byteLength),t.dispatch(r),o())})).catch((e=>{t.close(),this.emit(k.fetchError,e),this.player.emit(R.error,k.fetchError),this.abort()}))};o()})).catch((e=>{this.abort(),this.emit(k.fetchError,e),this.player.emit(R.error,k.fetchError)}))}abort(){this.abortController&&(this.abortController.abort(),this.abortController=null)}}const Be=new WeakMap;class Me extends ye{constructor(e){super(),this.player=e,this.socket=null,this.socketStatus=x,this.wsUrl=null,this.streamRate=me((t=>{e.emit(R.kBps,(t/1024).toFixed(2))}))}destroy(){let e=Be.get(this.player.stream);e&&(Be.delete(this.player.stream),e.close(),e=null),this.socketStatus=x,this.streamRate=null,this.wsUrl=null,this.off(),this.player.debug.log("websocketLoader","destroy")}_createWebSocket(){const e=this.player,{debug:t,events:{proxy:i},demux:o}=e,r=new WebSocket(this.wsUrl);Be.set(this.player.stream,r),r.binaryType="arraybuffer",i(r,"open",(()=>{this.emit(R.streamSuccess),t.log("websocketLoader","socket open"),this.socketStatus=B})),i(r,"message",(e=>{this.streamRate&&this.streamRate(e.data.byteLength),this._handleMessage(e.data)})),i(r,"close",(()=>{t.log("websocketLoader","socket close"),this.emit(R.streamEnd),this.socketStatus=M,this.destroy(),e.replay()})),i(r,"error",(e=>{t.log("websocketLoader","socket error"),this.emit(k.websocketError,e),this.player.emit(R.error,k.websocketError),this.socketStatus=I,o.close(),t.log("websocketLoader","socket error:",e)}))}_handleMessage(e){const{demux:t}=this.player;t?t.dispatch(e):this.player.debug.warn("websocketLoader","websocket handle message demux is null")}fetchStream(e){this.player._times.streamStart=de(),this.wsUrl=e,this._createWebSocket(e)}}class Ie{constructor(e){return new(Ie.getLoaderFactory(e._opt.protocol))(e)}static getLoaderFactory(e){return e===a?xe:e===n?Me:void 0}}var Le=t((function(t){function i(e,t){if(!e)throw"First parameter is required.";t=new o(e,t=t||{type:"video"});var n=this;function a(i){i&&(t.initCallback=function(){i(),i=t.initCallback=null});var o=new r(e,t);(h=new o(e,t)).record(),u("recording"),t.disableLogs||console.log("Initialized recorderType:",h.constructor.name,"for output-type:",t.type)}function s(e){if(e=e||function(){},h){if("paused"===n.state)return n.resumeRecording(),void setTimeout((function(){s(e)}),1);"recording"===n.state||t.disableLogs||console.warn('Recording state should be: "recording", however current state is: ',n.state),t.disableLogs||console.log("Stopped recording "+t.type+" stream."),"gif"!==t.type?h.stop(i):(h.stop(),i()),u("stopped")}else m();function i(i){if(h){Object.keys(h).forEach((function(e){"function"!=typeof h[e]&&(n[e]=h[e])}));var o=h.blob;if(!o){if(!i)throw"Recording failed.";h.blob=o=i}if(o&&!t.disableLogs&&console.log(o.type,"->",b(o.size)),e){var r;try{r=l.createObjectURL(o)}catch(e){}"function"==typeof e.call?e.call(n,r):e(r)}t.autoWriteToDisk&&c((function(e){var i={};i[t.type+"Blob"]=e,M.Store(i)}))}else"function"==typeof e.call?e.call(n,""):e("")}}function A(e){postMessage((new FileReaderSync).readAsDataURL(e))}function c(e,i){if(!e)throw"Pass a callback function over getDataURL.";var o=i?i.blob:(h||{}).blob;if(!o)return t.disableLogs||console.warn("Blob encoder did not finish its job yet."),void setTimeout((function(){c(e,i)}),1e3);if("undefined"==typeof Worker||navigator.mozGetUserMedia){var r=new FileReader;r.readAsDataURL(o),r.onload=function(t){e(t.target.result)}}else{var n=function(e){try{var t=l.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (eee) {"+e.name+"(eee.data);}"],{type:"application/javascript"})),i=new Worker(t);return l.revokeObjectURL(t),i}catch(e){}}(A);n.onmessage=function(t){e(t.data)},n.postMessage(o)}}function d(e){e=e||0,"paused"!==n.state?"stopped"!==n.state&&(e>=n.recordingDuration?s(n.onRecordingStopped):(e+=1e3,setTimeout((function(){d(e)}),1e3))):setTimeout((function(){d(e)}),1e3)}function u(e){n&&(n.state=e,"function"==typeof n.onStateChanged.call?n.onStateChanged.call(n,e):n.onStateChanged(e))}var h,p='It seems that recorder is destroyed or "startRecording" is not invoked for '+t.type+" recorder.";function m(){!0!==t.disableLogs&&console.warn(p)}var f={startRecording:function(i){return t.disableLogs||console.log("RecordRTC version: ",n.version),i&&(t=new o(e,i)),t.disableLogs||console.log("started recording "+t.type+" stream."),h?(h.clearRecordedData(),h.record(),u("recording"),n.recordingDuration&&d(),n):(a((function(){n.recordingDuration&&d()})),n)},stopRecording:s,pauseRecording:function(){h?"recording"===n.state?(u("paused"),h.pause(),t.disableLogs||console.log("Paused recording.")):t.disableLogs||console.warn("Unable to pause the recording. Recording state: ",n.state):m()},resumeRecording:function(){h?"paused"===n.state?(u("recording"),h.resume(),t.disableLogs||console.log("Resumed recording.")):t.disableLogs||console.warn("Unable to resume the recording. Recording state: ",n.state):m()},initRecorder:a,setRecordingDuration:function(e,t){if(void 0===e)throw"recordingDuration is required.";if("number"!=typeof e)throw"recordingDuration must be a number.";return n.recordingDuration=e,n.onRecordingStopped=t||function(){},{onRecordingStopped:function(e){n.onRecordingStopped=e}}},clearRecordedData:function(){h?(h.clearRecordedData(),t.disableLogs||console.log("Cleared old recorded data.")):m()},getBlob:function(){if(h)return h.blob;m()},getDataURL:c,toURL:function(){if(h)return l.createObjectURL(h.blob);m()},getInternalRecorder:function(){return h},save:function(e){h?v(h.blob,e):m()},getFromDisk:function(e){h?i.getFromDisk(t.type,e):m()},setAdvertisementArray:function(e){t.advertisement=[];for(var i=e.length,o=0;o<i;o++)t.advertisement.push({duration:o,image:e[o]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,reset:function(){"recording"!==n.state||t.disableLogs||console.warn("Stop an active recorder."),h&&"function"==typeof h.clearRecordedData&&h.clearRecordedData(),h=null,u("inactive"),n.blob=null},onStateChanged:function(e){t.disableLogs||console.log("Recorder state changed:",e)},state:"inactive",getState:function(){return n.state},destroy:function(){var e=t.disableLogs;t={disableLogs:!0},n.reset(),u("destroyed"),f=n=null,C.AudioContextConstructor&&(C.AudioContextConstructor.close(),C.AudioContextConstructor=null),t.disableLogs=e,t.disableLogs||console.log("RecordRTC is destroyed.")},version:"5.6.2"};if(!this)return n=f,f;for(var g in f)this[g]=f[g];return n=this,f}function o(e,t){return t.recorderType||t.type||(t.audio&&t.video?t.type="video":t.audio&&!t.video&&(t.type="audio")),t.recorderType&&!t.type&&(t.recorderType===x||t.recorderType===k||t.recorderType===D?t.type="video":t.recorderType===I?t.type="gif":t.recorderType===T?t.type="audio":t.recorderType===R&&(w(e,"audio").length&&w(e,"video").length||!w(e,"audio").length&&w(e,"video").length?t.type="video":w(e,"audio").length&&!w(e,"video").length&&(t.type="audio"))),"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(t.mimeType||(t.mimeType="video/webm"),t.type||(t.type=t.mimeType.split("/")[0]),t.bitsPerSecond),t.type||(t.mimeType&&(t.type=t.mimeType.split("/")[0]),t.type||(t.type="audio")),t}function r(e,t){var i;return(m||u||h)&&(i=T),"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&!m&&(i=R),"video"===t.type&&(m||h)&&(i=x,"undefined"!=typeof ReadableStream&&(i=D)),"gif"===t.type&&(i=I),"canvas"===t.type&&(i=k),E()&&i!==k&&i!==I&&"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(w(e,"video").length||w(e,"audio").length)&&("audio"===t.type?"function"==typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("audio/webm")&&(i=R):"function"==typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("video/webm")&&(i=R)),e instanceof Array&&e.length&&(i=_),t.recorderType&&(i=t.recorderType),!t.disableLogs&&i&&i.name&&console.log("Using recorderType:",i.name||i.constructor.name),!i&&f&&(i=R),i}function n(e){this.addStream=function(t){t&&(e=t)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var t,o=this.mediaType,r=this.mimeType||{audio:null,video:null,gif:null};if("function"!=typeof o.audio&&E()&&!w(e,"audio").length&&(o.audio=!1),"function"!=typeof o.video&&E()&&!w(e,"video").length&&(o.video=!1),"function"!=typeof o.gif&&E()&&!w(e,"video").length&&(o.gif=!1),!o.audio&&!o.video&&!o.gif)throw"MediaStream must have either audio or video tracks.";if(o.audio&&(t=null,"function"==typeof o.audio&&(t=o.audio),this.audioRecorder=new i(e,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:t,mimeType:r.audio,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp}),o.video||this.audioRecorder.startRecording()),o.video){t=null,"function"==typeof o.video&&(t=o.video);var n=e;if(E()&&o.audio&&"function"==typeof o.audio){var a=w(e,"video")[0];p?((n=new g).addTrack(a),t&&t===x&&(t=R)):(n=new g).addTrack(a)}this.videoRecorder=new i(n,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:t,mimeType:r.video,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp,workerPath:this.workerPath,webAssemblyPath:this.webAssemblyPath,frameRate:this.frameRate,bitrate:this.bitrate}),o.audio||this.videoRecorder.startRecording()}if(o.audio&&o.video){var s=this,A=!0===E();(o.audio instanceof T&&o.video||!0!==o.audio&&!0!==o.video&&o.audio!==o.video)&&(A=!1),!0===A?(s.audioRecorder=null,s.videoRecorder.startRecording()):s.videoRecorder.initRecorder((function(){s.audioRecorder.initRecorder((function(){s.videoRecorder.startRecording(),s.audioRecorder.startRecording()}))}))}o.gif&&(t=null,"function"==typeof o.gif&&(t=o.gif),this.gifRecorder=new i(e,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:t,mimeType:r.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(e){e=e||function(){},this.audioRecorder&&this.audioRecorder.stopRecording((function(t){e(t,"audio")})),this.videoRecorder&&this.videoRecorder.stopRecording((function(t){e(t,"video")})),this.gifRecorder&&this.gifRecorder.stopRecording((function(t){e(t,"gif")}))},this.pauseRecording=function(){this.audioRecorder&&this.audioRecorder.pauseRecording(),this.videoRecorder&&this.videoRecorder.pauseRecording(),this.gifRecorder&&this.gifRecorder.pauseRecording()},this.resumeRecording=function(){this.audioRecorder&&this.audioRecorder.resumeRecording(),this.videoRecorder&&this.videoRecorder.resumeRecording(),this.gifRecorder&&this.gifRecorder.resumeRecording()},this.getBlob=function(e){var t={};return this.audioRecorder&&(t.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(t.video=this.videoRecorder.getBlob()),this.gifRecorder&&(t.gif=this.gifRecorder.getBlob()),e&&e(t),t},this.destroy=function(){this.audioRecorder&&(this.audioRecorder.destroy(),this.audioRecorder=null),this.videoRecorder&&(this.videoRecorder.destroy(),this.videoRecorder=null),this.gifRecorder&&(this.gifRecorder.destroy(),this.gifRecorder=null)},this.getDataURL=function(e){function t(e,t){if("undefined"!=typeof Worker){var i=function(e){var t,i=l.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (eee) {"+e.name+"(eee.data);}"],{type:"application/javascript"})),o=new Worker(i);if(void 0!==l)t=l;else{if("undefined"==typeof webkitURL)throw"Neither URL nor webkitURL detected.";t=webkitURL}return t.revokeObjectURL(i),o}((function(e){postMessage((new FileReaderSync).readAsDataURL(e))}));i.onmessage=function(e){t(e.data)},i.postMessage(e)}else{var o=new FileReader;o.readAsDataURL(e),o.onload=function(e){t(e.target.result)}}}this.getBlob((function(i){i.audio&&i.video?t(i.audio,(function(o){t(i.video,(function(t){e({audio:o,video:t})}))})):i.audio?t(i.audio,(function(t){e({audio:t})})):i.video&&t(i.video,(function(t){e({video:t})}))}))},this.writeToDisk=function(){i.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(e){(e=e||{audio:!0,video:!0,gif:!0}).audio&&this.audioRecorder&&this.audioRecorder.save("string"==typeof e.audio?e.audio:""),e.video&&this.videoRecorder&&this.videoRecorder.save("string"==typeof e.video?e.video:""),e.gif&&this.gifRecorder&&this.gifRecorder.save("string"==typeof e.gif?e.gif:"")}}i.version="5.6.2",t.exports=i,i.getFromDisk=function(e,t){if(!t)throw"callback is mandatory.";console.log("Getting recorded "+("all"===e?"blobs":e+" blob ")+" from disk!"),M.Fetch((function(i,o){"all"!==e&&o===e+"Blob"&&t&&t(i),"all"===e&&t&&t(i,o.replace("Blob",""))}))},i.writeToDisk=function(e){console.log("Writing recorded blob(s) to disk!"),(e=e||{}).audio&&e.video&&e.gif?e.audio.getDataURL((function(t){e.video.getDataURL((function(i){e.gif.getDataURL((function(e){M.Store({audioBlob:t,videoBlob:i,gifBlob:e})}))}))})):e.audio&&e.video?e.audio.getDataURL((function(t){e.video.getDataURL((function(e){M.Store({audioBlob:t,videoBlob:e})}))})):e.audio&&e.gif?e.audio.getDataURL((function(t){e.gif.getDataURL((function(e){M.Store({audioBlob:t,gifBlob:e})}))})):e.video&&e.gif?e.video.getDataURL((function(t){e.gif.getDataURL((function(e){M.Store({videoBlob:t,gifBlob:e})}))})):e.audio?e.audio.getDataURL((function(e){M.Store({audioBlob:e})})):e.video?e.video.getDataURL((function(e){M.Store({videoBlob:e})})):e.gif&&e.gif.getDataURL((function(e){M.Store({gifBlob:e})}))},n.getFromDisk=i.getFromDisk,n.writeToDisk=i.writeToDisk,i.MRecordRTC=n;var a;(a=void 0!==e?e:null)&&"undefined"==typeof window&&void 0!==e&&(e.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},e.console||(e.console={}),void 0!==e.console.log&&void 0!==e.console.error||(e.console.error=e.console.log=e.console.log||function(){console.log(arguments)}),"undefined"==typeof document&&(a.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var e={getContext:function(){return e},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return e},a.HTMLVideoElement=function(){}),"undefined"==typeof location&&(a.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(a.screen={width:0,height:0}),void 0===l&&(a.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),a.window=e);var s=window.requestAnimationFrame;if(void 0===s)if("undefined"!=typeof webkitRequestAnimationFrame)s=webkitRequestAnimationFrame;else if("undefined"!=typeof mozRequestAnimationFrame)s=mozRequestAnimationFrame;else if("undefined"!=typeof msRequestAnimationFrame)s=msRequestAnimationFrame;else if(void 0===s){var A=0;s=function(e,t){var i=(new Date).getTime(),o=Math.max(0,16-(i-A)),r=setTimeout((function(){e(i+o)}),o);return A=i+o,r}}var c=window.cancelAnimationFrame;void 0===c&&("undefined"!=typeof webkitCancelAnimationFrame?c=webkitCancelAnimationFrame:"undefined"!=typeof mozCancelAnimationFrame?c=mozCancelAnimationFrame:"undefined"!=typeof msCancelAnimationFrame?c=msCancelAnimationFrame:void 0===c&&(c=function(e){clearTimeout(e)}));var d=window.AudioContext;void 0===d&&("undefined"!=typeof webkitAudioContext&&(d=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(d=mozAudioContext));var l=window.URL;void 0===l&&"undefined"!=typeof webkitURL&&(l=webkitURL),"undefined"!=typeof navigator&&void 0===navigator.getUserMedia&&(void 0!==navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),void 0!==navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var u=!(-1===navigator.userAgent.indexOf("Edge")||!navigator.msSaveBlob&&!navigator.msSaveOrOpenBlob),h=!!window.opera||-1!==navigator.userAgent.indexOf("OPR/"),p=navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&"netscape"in window&&/ rv:/.test(navigator.userAgent),m=!h&&!u&&!!navigator.webkitGetUserMedia||y()||-1!==navigator.userAgent.toLowerCase().indexOf("chrome/"),f=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);f&&!m&&-1!==navigator.userAgent.indexOf("CriOS")&&(f=!1,m=!0);var g=window.MediaStream;function b(e){if(0===e)return"0 Bytes";var t=parseInt(Math.floor(Math.log(e)/Math.log(1e3)),10);return(e/Math.pow(1e3,t)).toPrecision(3)+" "+["Bytes","KB","MB","GB","TB"][t]}function v(e,t){if(!e)throw"Blob object is required.";if(!e.type)try{e.type="video/webm"}catch(e){}var i=(e.type||"video/webm").split("/")[1];if(-1!==i.indexOf(";")&&(i=i.split(";")[0]),t&&-1!==t.indexOf(".")){var o=t.split(".");t=o[0],i=o[1]}var r=(t||Math.round(9999999999*Math.random())+888888888)+"."+i;if(void 0!==navigator.msSaveOrOpenBlob)return navigator.msSaveOrOpenBlob(e,r);if(void 0!==navigator.msSaveBlob)return navigator.msSaveBlob(e,r);var n=document.createElement("a");n.href=l.createObjectURL(e),n.download=r,n.style="display:none;opacity:0;color:transparent;",(document.body||document.documentElement).appendChild(n),"function"==typeof n.click?n.click():(n.target="_blank",n.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))),l.revokeObjectURL(n.href)}function y(){return"undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||(!("undefined"==typeof process||"object"!=typeof process.versions||!process.versions.electron)||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}function w(e,t){return e&&e.getTracks?e.getTracks().filter((function(e){return e.kind===(t||"audio")})):[]}function S(e,t){"srcObject"in t?t.srcObject=e:"mozSrcObject"in t?t.mozSrcObject=e:t.srcObject=e}void 0===g&&"undefined"!=typeof webkitMediaStream&&(g=webkitMediaStream),void 0!==g&&void 0===g.prototype.stop&&(g.prototype.stop=function(){this.getTracks().forEach((function(e){e.stop()}))}),i.invokeSaveAsDialog=v,i.getTracks=w,i.getSeekableBlob=function(e,t){if("undefined"==typeof EBML)throw new Error("Please link: https://www.webrtc-experiment.com/EBML.js");var i=new EBML.Reader,o=new EBML.Decoder,r=EBML.tools,n=new FileReader;n.onload=function(e){o.decode(this.result).forEach((function(e){i.read(e)})),i.stop();var n=r.makeMetadataSeekable(i.metadatas,i.duration,i.cues),a=this.result.slice(i.metadataSize),s=new Blob([n,a],{type:"video/webm"});t(s)},n.readAsArrayBuffer(e)},i.bytesToSize=b,i.isElectron=y;var C={};function E(){if(p||f||u)return!0;var e,t,i=navigator.userAgent,o=""+parseFloat(navigator.appVersion),r=parseInt(navigator.appVersion,10);return(m||h)&&(e=i.indexOf("Chrome"),o=i.substring(e+7)),-1!==(t=o.indexOf(";"))&&(o=o.substring(0,t)),-1!==(t=o.indexOf(" "))&&(o=o.substring(0,t)),r=parseInt(""+o,10),isNaN(r)&&(o=""+parseFloat(navigator.appVersion),r=parseInt(navigator.appVersion,10)),r>=49}function R(e,t){var i=this;if(void 0===e)throw'First argument "MediaStream" is required.';if("undefined"==typeof MediaRecorder)throw"Your browser does not support the Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.";if("audio"===(t=t||{mimeType:"video/webm"}).type){var o;if(w(e,"video").length&&w(e,"audio").length)navigator.mozGetUserMedia?(o=new g).addTrack(w(e,"audio")[0]):o=new g(w(e,"audio")),e=o;t.mimeType&&-1!==t.mimeType.toString().toLowerCase().indexOf("audio")||(t.mimeType=m?"audio/webm":"audio/ogg"),t.mimeType&&"audio/ogg"!==t.mimeType.toString().toLowerCase()&&navigator.mozGetUserMedia&&(t.mimeType="audio/ogg")}var r,n=[];function a(){i.timestamps.push((new Date).getTime()),"function"==typeof t.onTimeStamp&&t.onTimeStamp(i.timestamps[i.timestamps.length-1],i.timestamps)}function s(e){return r&&r.mimeType?r.mimeType:e.mimeType||"video/webm"}function A(){n=[],r=null,i.timestamps=[]}this.getArrayOfBlobs=function(){return n},this.record=function(){i.blob=null,i.clearRecordedData(),i.timestamps=[],c=[],n=[];var o=t;t.disableLogs||console.log("Passing following config over MediaRecorder API.",o),r&&(r=null),m&&!E()&&(o="video/vp8"),"function"==typeof MediaRecorder.isTypeSupported&&o.mimeType&&(MediaRecorder.isTypeSupported(o.mimeType)||(t.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",o.mimeType),o.mimeType="audio"===t.type?"audio/webm":"video/webm"));try{r=new MediaRecorder(e,o),t.mimeType=o.mimeType}catch(t){r=new MediaRecorder(e)}o.mimeType&&!MediaRecorder.isTypeSupported&&"canRecordMimeType"in r&&!1===r.canRecordMimeType(o.mimeType)&&(t.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",o.mimeType)),r.ondataavailable=function(e){if(e.data&&c.push("ondataavailable: "+b(e.data.size)),"number"!=typeof t.timeSlice)!e.data||!e.data.size||e.data.size<100||i.blob?i.recordingCallback&&(i.recordingCallback(new Blob([],{type:s(o)})),i.recordingCallback=null):(i.blob=t.getNativeBlob?e.data:new Blob([e.data],{type:s(o)}),i.recordingCallback&&(i.recordingCallback(i.blob),i.recordingCallback=null));else if(e.data&&e.data.size&&(n.push(e.data),a(),"function"==typeof t.ondataavailable)){var r=t.getNativeBlob?e.data:new Blob([e.data],{type:s(o)});t.ondataavailable(r)}},r.onstart=function(){c.push("started")},r.onpause=function(){c.push("paused")},r.onresume=function(){c.push("resumed")},r.onstop=function(){c.push("stopped")},r.onerror=function(e){e&&(e.name||(e.name="UnknownError"),c.push("error: "+e),t.disableLogs||(-1!==e.name.toString().toLowerCase().indexOf("invalidstate")?console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.",e):-1!==e.name.toString().toLowerCase().indexOf("notsupported")?console.error("MIME type (",o.mimeType,") is not supported.",e):-1!==e.name.toString().toLowerCase().indexOf("security")?console.error("MediaRecorder security error",e):"OutOfMemory"===e.name?console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"IllegalStreamModification"===e.name?console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"OtherRecordingError"===e.name?console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"GenericError"===e.name?console.error("The UA cannot provide the codec or recording option that has been requested.",e):console.error("MediaRecorder Error",e)),function(e){if(!i.manuallyStopped&&r&&"inactive"===r.state)return delete t.timeslice,void r.start(6e5);setTimeout(void 0,1e3)}(),"inactive"!==r.state&&"stopped"!==r.state&&r.stop())},"number"==typeof t.timeSlice?(a(),r.start(t.timeSlice)):r.start(36e5),t.initCallback&&t.initCallback()},this.timestamps=[],this.stop=function(e){e=e||function(){},i.manuallyStopped=!0,r&&(this.recordingCallback=e,"recording"===r.state&&r.stop(),"number"==typeof t.timeSlice&&setTimeout((function(){i.blob=new Blob(n,{type:s(t)}),i.recordingCallback(i.blob)}),100))},this.pause=function(){r&&"recording"===r.state&&r.pause()},this.resume=function(){r&&"paused"===r.state&&r.resume()},this.clearRecordedData=function(){r&&"recording"===r.state&&i.stop(A),A()},this.getInternalRecorder=function(){return r},this.blob=null,this.getState=function(){return r&&r.state||"inactive"};var c=[];this.getAllStates=function(){return c},void 0===t.checkForInactiveTracks&&(t.checkForInactiveTracks=!1);i=this;!function o(){if(r&&!1!==t.checkForInactiveTracks)return!1===function(){if("active"in e){if(!e.active)return!1}else if("ended"in e&&e.ended)return!1;return!0}()?(t.disableLogs||console.log("MediaStream seems stopped."),void i.stop()):void setTimeout(o,1e3)}(),this.name="MediaStreamRecorder",this.toString=function(){return this.name}}function T(e,t){if(!w(e,"audio").length)throw"Your stream has no audio tracks.";var o,r=this,n=[],a=[],s=!1,A=0,c=2,d=(t=t||{}).desiredSampRate;function u(){if(!1===t.checkForInactiveTracks)return!0;if("active"in e){if(!e.active)return!1}else if("ended"in e&&e.ended)return!1;return!0}function h(e,t){function i(e,t){var i,o=e.numberOfAudioChannels,r=e.leftBuffers.slice(0),n=e.rightBuffers.slice(0),a=e.sampleRate,s=e.internalInterleavedLength,A=e.desiredSampRate;function c(e,t,i){var o=Math.round(e.length*(t/i)),r=[],n=Number((e.length-1)/(o-1));r[0]=e[0];for(var a=1;a<o-1;a++){var s=a*n,A=Number(Math.floor(s)).toFixed(),c=Number(Math.ceil(s)).toFixed(),l=s-A;r[a]=d(e[A],e[c],l)}return r[o-1]=e[e.length-1],r}function d(e,t,i){return e+(t-e)*i}function l(e,t){for(var i=new Float64Array(t),o=0,r=e.length,n=0;n<r;n++){var a=e[n];i.set(a,o),o+=a.length}return i}function u(e,t,i){for(var o=i.length,r=0;r<o;r++)e.setUint8(t+r,i.charCodeAt(r))}2===o&&(r=l(r,s),n=l(n,s),A&&(r=c(r,A,a),n=c(n,A,a))),1===o&&(r=l(r,s),A&&(r=c(r,A,a))),A&&(a=A),2===o&&(i=function(e,t){for(var i=e.length+t.length,o=new Float64Array(i),r=0,n=0;n<i;)o[n++]=e[r],o[n++]=t[r],r++;return o}(r,n)),1===o&&(i=r);var h=i.length,p=new ArrayBuffer(44+2*h),m=new DataView(p);u(m,0,"RIFF"),m.setUint32(4,36+2*h,!0),u(m,8,"WAVE"),u(m,12,"fmt "),m.setUint32(16,16,!0),m.setUint16(20,1,!0),m.setUint16(22,o,!0),m.setUint32(24,a,!0),m.setUint32(28,a*o*2,!0),m.setUint16(32,2*o,!0),m.setUint16(34,16,!0),u(m,36,"data"),m.setUint32(40,2*h,!0);for(var f=h,g=44,b=0;b<f;b++)m.setInt16(g,32767*i[b],!0),g+=2;if(t)return t({buffer:p,view:m});postMessage({buffer:p,view:m})}if(e.noWorker)i(e,(function(e){t(e.buffer,e.view)}));else{var o,r,n,a=(o=i,r=l.createObjectURL(new Blob([o.toString(),";this.onmessage =  function (eee) {"+o.name+"(eee.data);}"],{type:"application/javascript"})),(n=new Worker(r)).workerURL=r,n);a.onmessage=function(e){t(e.data.buffer,e.data.view),l.revokeObjectURL(a.workerURL),a.terminate()},a.postMessage(e)}}!0===t.leftChannel&&(c=1),1===t.numberOfAudioChannels&&(c=1),(!c||c<1)&&(c=2),t.disableLogs||console.log("StereoAudioRecorder is set to record number of channels: "+c),void 0===t.checkForInactiveTracks&&(t.checkForInactiveTracks=!0),this.record=function(){if(!1===u())throw"Please make sure MediaStream is active.";y(),C=v=!1,s=!0,void 0!==t.timeSlice&&R()},this.stop=function(e){e=e||function(){},s=!1,h({desiredSampRate:d,sampleRate:b,numberOfAudioChannels:c,internalInterleavedLength:A,leftBuffers:n,rightBuffers:1===c?[]:a,noWorker:t.noWorker},(function(t,i){r.blob=new Blob([i],{type:"audio/wav"}),r.buffer=new ArrayBuffer(i.buffer.byteLength),r.view=i,r.sampleRate=d||b,r.bufferSize=g,r.length=A,C=!1,e&&e(r.blob)}))},void 0===i.Storage&&(i.Storage={AudioContextConstructor:null,AudioContext:window.AudioContext||window.webkitAudioContext}),i.Storage.AudioContextConstructor&&"closed"!==i.Storage.AudioContextConstructor.state||(i.Storage.AudioContextConstructor=new i.Storage.AudioContext);var p=i.Storage.AudioContextConstructor,m=p.createMediaStreamSource(e),f=[0,256,512,1024,2048,4096,8192,16384],g=void 0===t.bufferSize?4096:t.bufferSize;if(-1===f.indexOf(g)&&(t.disableLogs||console.log("Legal values for buffer-size are "+JSON.stringify(f,null,"\t"))),p.createJavaScriptNode)o=p.createJavaScriptNode(g,c,c);else{if(!p.createScriptProcessor)throw"WebAudio API has no support on this browser.";o=p.createScriptProcessor(g,c,c)}m.connect(o),t.bufferSize||(g=o.bufferSize);var b=void 0!==t.sampleRate?t.sampleRate:p.sampleRate||44100;(b<22050||b>96e3)&&(t.disableLogs||console.log("sample-rate must be under range 22050 and 96000.")),t.disableLogs||t.desiredSampRate&&console.log("Desired sample-rate: "+t.desiredSampRate);var v=!1;function y(){n=[],a=[],A=0,C=!1,s=!1,v=!1,p=null,r.leftchannel=n,r.rightchannel=a,r.numberOfAudioChannels=c,r.desiredSampRate=d,r.sampleRate=b,r.recordingLength=A,E={left:[],right:[],recordingLength:0}}function S(){o&&(o.onaudioprocess=null,o.disconnect(),o=null),m&&(m.disconnect(),m=null),y()}this.pause=function(){v=!0},this.resume=function(){if(!1===u())throw"Please make sure MediaStream is active.";if(!s)return t.disableLogs||console.log("Seems recording has been restarted."),void this.record();v=!1},this.clearRecordedData=function(){t.checkForInactiveTracks=!1,s&&this.stop(S),S()},this.name="StereoAudioRecorder",this.toString=function(){return this.name};var C=!1;o.onaudioprocess=function(e){if(!v)if(!1===u()&&(t.disableLogs||console.log("MediaStream seems stopped."),o.disconnect(),s=!1),s){C||(C=!0,t.onAudioProcessStarted&&t.onAudioProcessStarted(),t.initCallback&&t.initCallback());var i=e.inputBuffer.getChannelData(0),d=new Float32Array(i);if(n.push(d),2===c){var l=e.inputBuffer.getChannelData(1),h=new Float32Array(l);a.push(h)}A+=g,r.recordingLength=A,void 0!==t.timeSlice&&(E.recordingLength+=g,E.left.push(d),2===c&&E.right.push(h))}else m&&(m.disconnect(),m=null)},p.createMediaStreamDestination?o.connect(p.createMediaStreamDestination()):o.connect(p.destination),this.leftchannel=n,this.rightchannel=a,this.numberOfAudioChannels=c,this.desiredSampRate=d,this.sampleRate=b,r.recordingLength=A;var E={left:[],right:[],recordingLength:0};function R(){s&&"function"==typeof t.ondataavailable&&void 0!==t.timeSlice&&(E.left.length?(h({desiredSampRate:d,sampleRate:b,numberOfAudioChannels:c,internalInterleavedLength:E.recordingLength,leftBuffers:E.left,rightBuffers:1===c?[]:E.right},(function(e,i){var o=new Blob([i],{type:"audio/wav"});t.ondataavailable(o),setTimeout(R,t.timeSlice)})),E={left:[],right:[],recordingLength:0}):setTimeout(R,t.timeSlice))}}function k(e,t){if("undefined"==typeof html2canvas)throw"Please link: https://www.webrtc-experiment.com/screenshot.js";(t=t||{}).frameInterval||(t.frameInterval=10);var i=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach((function(e){e in document.createElement("canvas")&&(i=!0)}));var o,r,n,a=!(!window.webkitRTCPeerConnection&&!window.webkitGetUserMedia||!window.chrome),s=50,A=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);if(a&&A&&A[2]&&(s=parseInt(A[2],10)),a&&s<52&&(i=!1),t.useWhammyRecorder&&(i=!1),i)if(t.disableLogs||console.log("Your browser supports both MediRecorder API and canvas.captureStream!"),e instanceof HTMLCanvasElement)o=e;else{if(!(e instanceof CanvasRenderingContext2D))throw"Please pass either HTMLCanvasElement or CanvasRenderingContext2D.";o=e.canvas}else navigator.mozGetUserMedia&&(t.disableLogs||console.error("Canvas recording is NOT supported in Firefox."));this.record=function(){if(n=!0,i&&!t.useWhammyRecorder){var e;"captureStream"in o?e=o.captureStream(25):"mozCaptureStream"in o?e=o.mozCaptureStream(25):"webkitCaptureStream"in o&&(e=o.webkitCaptureStream(25));try{var a=new g;a.addTrack(w(e,"video")[0]),e=a}catch(e){}if(!e)throw"captureStream API are NOT available.";(r=new R(e,{mimeType:t.mimeType||"video/webm"})).record()}else h.frames=[],u=(new Date).getTime(),l();t.initCallback&&t.initCallback()},this.getWebPImages=function(i){if("canvas"===e.nodeName.toLowerCase()){var o=h.frames.length;h.frames.forEach((function(e,i){var r=o-i;t.disableLogs||console.log(r+"/"+o+" frames remaining"),t.onEncodingCallback&&t.onEncodingCallback(r,o);var n=e.image.toDataURL("image/webp",1);h.frames[i].image=n})),t.disableLogs||console.log("Generating WebM"),i()}else i()},this.stop=function(e){n=!1;var o=this;i&&r?r.stop(e):this.getWebPImages((function(){h.compile((function(i){t.disableLogs||console.log("Recording finished!"),o.blob=i,o.blob.forEach&&(o.blob=new Blob([],{type:"video/webm"})),e&&e(o.blob),h.frames=[]}))}))};var c=!1;function d(){h.frames=[],n=!1,c=!1}function l(){if(c)return u=(new Date).getTime(),setTimeout(l,500);if("canvas"===e.nodeName.toLowerCase()){var i=(new Date).getTime()-u;return u=(new Date).getTime(),h.frames.push({image:(o=document.createElement("canvas"),r=o.getContext("2d"),o.width=e.width,o.height=e.height,r.drawImage(e,0,0),o),duration:i}),void(n&&setTimeout(l,t.frameInterval))}var o,r;html2canvas(e,{grabMouse:void 0===t.showMousePointer||t.showMousePointer,onrendered:function(e){var i=(new Date).getTime()-u;if(!i)return setTimeout(l,t.frameInterval);u=(new Date).getTime(),h.frames.push({image:e.toDataURL("image/webp",1),duration:i}),n&&setTimeout(l,t.frameInterval)}})}this.pause=function(){c=!0,r instanceof R&&r.pause()},this.resume=function(){c=!1,r instanceof R?r.resume():n||this.record()},this.clearRecordedData=function(){n&&this.stop(d),d()},this.name="CanvasRecorder",this.toString=function(){return this.name};var u=(new Date).getTime(),h=new B.Video(100)}function x(e,t){function i(e){e=void 0!==e?e:10;var t=(new Date).getTime()-A;return t?n?(A=(new Date).getTime(),setTimeout(i,100)):(A=(new Date).getTime(),s.paused&&s.play(),l.drawImage(s,0,0,d.width,d.height),c.frames.push({duration:t,image:d.toDataURL("image/webp")}),void(r||setTimeout(i,e,e))):setTimeout(i,e,e)}function o(e,t,i,o,r){var n=document.createElement("canvas");n.width=d.width,n.height=d.height;var a,s,A,c=n.getContext("2d"),l=[],u=-1===t,h=t&&t>0&&t<=e.length?t:e.length,p=0,m=0,f=0,g=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),b=i&&i>=0&&i<=1?i:0,v=o&&o>=0&&o<=1?o:0,y=!1;s=-1,A=(a={length:h,functionToLoop:function(t,i){var o,r,n,a=function(){!y&&n-o<=n*v||(u&&(y=!0),l.push(e[i])),t()};if(y)a();else{var s=new Image;s.onload=function(){c.drawImage(s,0,0,d.width,d.height);var e=c.getImageData(0,0,d.width,d.height);o=0,r=e.data.length,n=e.data.length/4;for(var t=0;t<r;t+=4){var i={r:e.data[t],g:e.data[t+1],b:e.data[t+2]};Math.sqrt(Math.pow(i.r-p,2)+Math.pow(i.g-m,2)+Math.pow(i.b-f,2))<=g*b&&o++}a()},s.src=e[i].image}},callback:function(){(l=l.concat(e.slice(h))).length<=0&&l.push(e[e.length-1]),r(l)}}).length,function e(){++s!==A?setTimeout((function(){a.functionToLoop(e,s)}),1):a.callback()}()}(t=t||{}).frameInterval||(t.frameInterval=10),t.disableLogs||console.log("Using frames-interval:",t.frameInterval),this.record=function(){t.width||(t.width=320),t.height||(t.height=240),t.video||(t.video={width:t.width,height:t.height}),t.canvas||(t.canvas={width:t.width,height:t.height}),d.width=t.canvas.width||320,d.height=t.canvas.height||240,l=d.getContext("2d"),t.video&&t.video instanceof HTMLVideoElement?(s=t.video.cloneNode(),t.initCallback&&t.initCallback()):(s=document.createElement("video"),S(e,s),s.onloadedmetadata=function(){t.initCallback&&t.initCallback()},s.width=t.video.width,s.height=t.video.height),s.muted=!0,s.play(),A=(new Date).getTime(),c=new B.Video,t.disableLogs||(console.log("canvas resolutions",d.width,"*",d.height),console.log("video width/height",s.width||d.width,"*",s.height||d.height)),i(t.frameInterval)};var r=!1;this.stop=function(e){e=e||function(){},r=!0;var i=this;setTimeout((function(){o(c.frames,-1,null,null,(function(o){c.frames=o,t.advertisement&&t.advertisement.length&&(c.frames=t.advertisement.concat(c.frames)),c.compile((function(t){i.blob=t,i.blob.forEach&&(i.blob=new Blob([],{type:"video/webm"})),e&&e(i.blob)}))}))}),10)};var n=!1;function a(){c.frames=[],r=!0,n=!1}this.pause=function(){n=!0},this.resume=function(){n=!1,r&&this.record()},this.clearRecordedData=function(){r||this.stop(a),a()},this.name="WhammyRecorder",this.toString=function(){return this.name};var s,A,c,d=document.createElement("canvas"),l=d.getContext("2d")}void 0!==d?C.AudioContext=d:"undefined"!=typeof webkitAudioContext&&(C.AudioContext=webkitAudioContext),i.Storage=C,i.MediaStreamRecorder=R,i.StereoAudioRecorder=T,i.CanvasRecorder=k,i.WhammyRecorder=x;var B=function(){function e(e){this.frames=[],this.duration=e||1,this.quality=.8}function t(e){function t(e,t,i){return[{data:e,id:231}].concat(i.map((function(e){var i=function(e){var t=0;e.keyframe&&(t|=128);e.invisible&&(t|=8);e.lacing&&(t|=e.lacing<<1);e.discardable&&(t|=1);if(e.trackNum>127)throw"TrackNumber > 127 not supported";return[128|e.trackNum,e.timecode>>8,255&e.timecode,t].map((function(e){return String.fromCharCode(e)})).join("")+e.frame}({discardable:0,frame:e.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(t)});return t+=e.duration,{data:i,id:163}})))}function i(e){for(var t=[];e>0;)t.push(255&e),e>>=8;return new Uint8Array(t.reverse())}function o(e){var t=[];e=(e.length%8?new Array(9-e.length%8).join("0"):"")+e;for(var i=0;i<e.length;i+=8)t.push(parseInt(e.substr(i,8),2));return new Uint8Array(t)}function r(e){for(var t=[],n=0;n<e.length;n++){var a=e[n].data;"object"==typeof a&&(a=r(a)),"number"==typeof a&&(a=o(a.toString(2))),"string"==typeof a&&(a=new Uint8Array(a.split("").map((function(e){return e.charCodeAt(0)}))));var s=a.size||a.byteLength||a.length,A=Math.ceil(Math.ceil(Math.log(s)/Math.log(2))/8),c=s.toString(2),d=new Array(7*A+7+1-c.length).join("0")+c,l=new Array(A).join("0")+"1"+d;t.push(i(e[n].id)),t.push(o(l)),t.push(a)}return new Blob(t,{type:"video/webm"})}function n(e,t){return parseInt(e.substr(t+4,4).split("").map((function(e){var t=e.charCodeAt(0).toString(2);return new Array(8-t.length+1).join("0")+t})).join(""),2)}function a(e){for(var t=0,i={};t<e.length;){var o=e.substr(t,4),r=n(e,t),s=e.substr(t+4+4,r);t+=8+r,i[o]=i[o]||[],"RIFF"===o||"LIST"===o?i[o].push(a(s)):i[o].push(s)}return i}var s=new function(e){var i=function(e){if(!e[0])return void postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."});for(var t=e[0].width,i=e[0].height,o=e[0].duration,r=1;r<e.length;r++)o+=e[r].duration;return{duration:o,width:t,height:i}}(e);if(!i)return[];for(var o,n=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:(o=i.duration,[].slice.call(new Uint8Array(new Float64Array([o]).buffer),0).map((function(e){return String.fromCharCode(e)})).reverse().join("")),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:i.width,id:176},{data:i.height,id:186}]}]}]}]}],a=0,s=0;a<e.length;){var A=[],c=0;do{A.push(e[a]),c+=e[a].duration,a++}while(a<e.length&&c<3e4);var d={id:524531317,data:t(s,0,A)};n[1].data.push(d),s+=c}return r(n)}(e.map((function(e){var t=function(e){for(var t=e.RIFF[0].WEBP[0],i=t.indexOf("*"),o=0,r=[];o<4;o++)r[o]=t.charCodeAt(i+3+o);return{width:16383&(r[1]<<8|r[0]),height:16383&(r[3]<<8|r[2]),data:t,riff:e}}(a(atob(e.image.slice(23))));return t.duration=e.duration,t})));postMessage(s)}return e.prototype.add=function(e,t){if("canvas"in e&&(e=e.canvas),"toDataURL"in e&&(e=e.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/gi.test(e))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:e,duration:t||this.duration})},e.prototype.compile=function(e){var i,o,r,n=(i=t,o=l.createObjectURL(new Blob([i.toString(),"this.onmessage =  function (eee) {"+i.name+"(eee.data);}"],{type:"application/javascript"})),r=new Worker(o),l.revokeObjectURL(o),r);n.onmessage=function(t){t.data.error?console.error(t.data.error):e(t.data)},n.postMessage(this.frames)},{Video:e}}();i.Whammy=B;var M={init:function(){var e=this;if("undefined"!=typeof indexedDB&&void 0!==indexedDB.open){var t,i=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),o=indexedDB.open(i,1);o.onerror=e.onError,o.onsuccess=function(){((t=o.result).onerror=e.onError,t.setVersion)?1!==t.version?t.setVersion(1).onsuccess=function(){r(t),n()}:n():n()},o.onupgradeneeded=function(e){r(e.target.result)}}else console.error("IndexedDB API are not available in this browser.");function r(t){t.createObjectStore(e.dataStoreName)}function n(){var i=t.transaction([e.dataStoreName],"readwrite");function o(t){i.objectStore(e.dataStoreName).get(t).onsuccess=function(i){e.callback&&e.callback(i.target.result,t)}}e.videoBlob&&i.objectStore(e.dataStoreName).put(e.videoBlob,"videoBlob"),e.gifBlob&&i.objectStore(e.dataStoreName).put(e.gifBlob,"gifBlob"),e.audioBlob&&i.objectStore(e.dataStoreName).put(e.audioBlob,"audioBlob"),o("audioBlob"),o("videoBlob"),o("gifBlob")}},Fetch:function(e){return this.callback=e,this.init(),this},Store:function(e){return this.audioBlob=e.audioBlob,this.videoBlob=e.videoBlob,this.gifBlob=e.gifBlob,this.init(),this},onError:function(e){console.error(JSON.stringify(e,null,"\t"))},dataStoreName:"recordRTC",dbName:null};function I(e,t){if("undefined"==typeof GIFEncoder){var i=document.createElement("script");i.src="https://www.webrtc-experiment.com/gif-recorder.js",(document.body||document.documentElement).appendChild(i)}t=t||{};var o=e instanceof CanvasRenderingContext2D||e instanceof HTMLCanvasElement;this.record=function(){"undefined"!=typeof GIFEncoder&&A?(o||(t.width||(t.width=d.offsetWidth||320),t.height||(t.height=d.offsetHeight||240),t.video||(t.video={width:t.width,height:t.height}),t.canvas||(t.canvas={width:t.width,height:t.height}),n.width=t.canvas.width||320,n.height=t.canvas.height||240,d.width=t.video.width||320,d.height=t.video.height||240),(u=new GIFEncoder).setRepeat(0),u.setDelay(t.frameRate||200),u.setQuality(t.quality||10),u.start(),"function"==typeof t.onGifRecordingStarted&&t.onGifRecordingStarted(),h=s((function e(i){if(!0!==p.clearedRecordedData){if(r)return setTimeout((function(){e(i)}),100);h=s(e),void 0===typeof l&&(l=i),i-l<90||(!o&&d.paused&&d.play(),o||a.drawImage(d,0,0,n.width,n.height),t.onGifPreview&&t.onGifPreview(n.toDataURL("image/png")),u.addFrame(a),l=i)}})),t.initCallback&&t.initCallback()):setTimeout(p.record,1e3)},this.stop=function(e){e=e||function(){},h&&c(h),this.blob=new Blob([new Uint8Array(u.stream().bin)],{type:"image/gif"}),e(this.blob),u.stream().bin=[]};var r=!1;this.pause=function(){r=!0},this.resume=function(){r=!1},this.clearRecordedData=function(){p.clearedRecordedData=!0,u&&(u.stream().bin=[])},this.name="GifRecorder",this.toString=function(){return this.name};var n=document.createElement("canvas"),a=n.getContext("2d");o&&(e instanceof CanvasRenderingContext2D?n=(a=e).canvas:e instanceof HTMLCanvasElement&&(a=e.getContext("2d"),n=e));var A=!0;if(!o){var d=document.createElement("video");d.muted=!0,d.autoplay=!0,d.playsInline=!0,A=!1,d.onloadedmetadata=function(){A=!0},S(e,d),d.play()}var l,u,h=null,p=this}function L(e,t){t=t||"multi-streams-mixer";var i=[],o=!1,r=document.createElement("canvas"),n=r.getContext("2d");r.style.opacity=0,r.style.position="absolute",r.style.zIndex=-1,r.style.top="-1000em",r.style.left="-1000em",r.className=t,(document.body||document.documentElement).appendChild(r),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0;var a=this,s=window.AudioContext;void 0===s&&("undefined"!=typeof webkitAudioContext&&(s=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(s=mozAudioContext));var A=window.URL;void 0===A&&"undefined"!=typeof webkitURL&&(A=webkitURL),"undefined"!=typeof navigator&&void 0===navigator.getUserMedia&&(void 0!==navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),void 0!==navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var c=window.MediaStream;void 0===c&&"undefined"!=typeof webkitMediaStream&&(c=webkitMediaStream),void 0!==c&&void 0===c.prototype.stop&&(c.prototype.stop=function(){this.getTracks().forEach((function(e){e.stop()}))});var d={};function l(){if(!o){var e=i.length,t=!1,n=[];if(i.forEach((function(e){e.stream||(e.stream={}),e.stream.fullcanvas?t=e:n.push(e)})),t)r.width=t.stream.width,r.height=t.stream.height;else if(n.length){r.width=e>1?2*n[0].width:n[0].width;var s=1;3!==e&&4!==e||(s=2),5!==e&&6!==e||(s=3),7!==e&&8!==e||(s=4),9!==e&&10!==e||(s=5),r.height=n[0].height*s}else r.width=a.width||360,r.height=a.height||240;t&&t instanceof HTMLVideoElement&&u(t),n.forEach((function(e,t){u(e,t)})),setTimeout(l,a.frameInterval)}}function u(e,t){if(!o){var i=0,r=0,a=e.width,s=e.height;1===t&&(i=e.width),2===t&&(r=e.height),3===t&&(i=e.width,r=e.height),4===t&&(r=2*e.height),5===t&&(i=e.width,r=2*e.height),6===t&&(r=3*e.height),7===t&&(i=e.width,r=3*e.height),void 0!==e.stream.left&&(i=e.stream.left),void 0!==e.stream.top&&(r=e.stream.top),void 0!==e.stream.width&&(a=e.stream.width),void 0!==e.stream.height&&(s=e.stream.height),n.drawImage(e,i,r,a,s),"function"==typeof e.stream.onRender&&e.stream.onRender(n,i,r,a,s,t)}}function h(e){var i=document.createElement("video");return function(e,t){"srcObject"in t?t.srcObject=e:"mozSrcObject"in t?t.mozSrcObject=e:t.srcObject=e}(e,i),i.className=t,i.muted=!0,i.volume=0,i.width=e.width||a.width||360,i.height=e.height||a.height||240,i.play(),i}function p(t){i=[],(t=t||e).forEach((function(e){if(e.getTracks().filter((function(e){return"video"===e.kind})).length){var t=h(e);t.stream=e,i.push(t)}}))}void 0!==s?d.AudioContext=s:"undefined"!=typeof webkitAudioContext&&(d.AudioContext=webkitAudioContext),this.startDrawingFrames=function(){l()},this.appendStreams=function(t){if(!t)throw"First parameter is required.";t instanceof Array||(t=[t]),t.forEach((function(t){var o=new c;if(t.getTracks().filter((function(e){return"video"===e.kind})).length){var r=h(t);r.stream=t,i.push(r),o.addTrack(t.getTracks().filter((function(e){return"video"===e.kind}))[0])}if(t.getTracks().filter((function(e){return"audio"===e.kind})).length){var n=a.audioContext.createMediaStreamSource(t);a.audioDestination=a.audioContext.createMediaStreamDestination(),n.connect(a.audioDestination),o.addTrack(a.audioDestination.stream.getTracks().filter((function(e){return"audio"===e.kind}))[0])}e.push(o)}))},this.releaseStreams=function(){i=[],o=!0,a.gainNode&&(a.gainNode.disconnect(),a.gainNode=null),a.audioSources.length&&(a.audioSources.forEach((function(e){e.disconnect()})),a.audioSources=[]),a.audioDestination&&(a.audioDestination.disconnect(),a.audioDestination=null),a.audioContext&&a.audioContext.close(),a.audioContext=null,n.clearRect(0,0,r.width,r.height),r.stream&&(r.stream.stop(),r.stream=null)},this.resetVideoStreams=function(e){!e||e instanceof Array||(e=[e]),p(e)},this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=function(){o=!1;var t=function(){var e;p(),"captureStream"in r?e=r.captureStream():"mozCaptureStream"in r?e=r.mozCaptureStream():a.disableLogs||console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features");var t=new c;return e.getTracks().filter((function(e){return"video"===e.kind})).forEach((function(e){t.addTrack(e)})),r.stream=t,t}(),i=function(){d.AudioContextConstructor||(d.AudioContextConstructor=new d.AudioContext);a.audioContext=d.AudioContextConstructor,a.audioSources=[],!0===a.useGainNode&&(a.gainNode=a.audioContext.createGain(),a.gainNode.connect(a.audioContext.destination),a.gainNode.gain.value=0);var t=0;if(e.forEach((function(e){if(e.getTracks().filter((function(e){return"audio"===e.kind})).length){t++;var i=a.audioContext.createMediaStreamSource(e);!0===a.useGainNode&&i.connect(a.gainNode),a.audioSources.push(i)}})),!t)return;return a.audioDestination=a.audioContext.createMediaStreamDestination(),a.audioSources.forEach((function(e){e.connect(a.audioDestination)})),a.audioDestination.stream}();return i&&i.getTracks().filter((function(e){return"audio"===e.kind})).forEach((function(e){t.addTrack(e)})),e.forEach((function(e){e.fullcanvas})),t}}function _(e,t){e=e||[];var i,o,r=this;(t=t||{elementClass:"multi-streams-mixer",mimeType:"video/webm",video:{width:360,height:240}}).frameInterval||(t.frameInterval=10),t.video||(t.video={}),t.video.width||(t.video.width=360),t.video.height||(t.video.height=240),this.record=function(){var r;i=new L(e,t.elementClass||"multi-streams-mixer"),(r=[],e.forEach((function(e){w(e,"video").forEach((function(e){r.push(e)}))})),r).length&&(i.frameInterval=t.frameInterval||10,i.width=t.video.width||360,i.height=t.video.height||240,i.startDrawingFrames()),t.previewStream&&"function"==typeof t.previewStream&&t.previewStream(i.getMixedStream()),(o=new R(i.getMixedStream(),t)).record()},this.stop=function(e){o&&o.stop((function(t){r.blob=t,e(t),r.clearRecordedData()}))},this.pause=function(){o&&o.pause()},this.resume=function(){o&&o.resume()},this.clearRecordedData=function(){o&&(o.clearRecordedData(),o=null),i&&(i.releaseStreams(),i=null)},this.addStreams=function(r){if(!r)throw"First parameter is required.";r instanceof Array||(r=[r]),e.concat(r),o&&i&&(i.appendStreams(r),t.previewStream&&"function"==typeof t.previewStream&&t.previewStream(i.getMixedStream()))},this.resetVideoStreams=function(e){i&&(!e||e instanceof Array||(e=[e]),i.resetVideoStreams(e))},this.getMixer=function(){return i},this.name="MultiStreamRecorder",this.toString=function(){return this.name}}function D(e,t){var i,o,r;function n(){return new ReadableStream({start:function(o){var r=document.createElement("canvas"),n=document.createElement("video"),a=!0;n.srcObject=e,n.muted=!0,n.height=t.height,n.width=t.width,n.volume=0,n.onplaying=function(){r.width=t.width,r.height=t.height;var e=r.getContext("2d"),s=1e3/t.frameRate,A=setInterval((function(){if(i&&(clearInterval(A),o.close()),a&&(a=!1,t.onVideoProcessStarted&&t.onVideoProcessStarted()),e.drawImage(n,0,0),"closed"!==o._controlledReadableStream.state)try{o.enqueue(e.getImageData(0,0,t.width,t.height))}catch(e){}}),s)},n.play()}})}function a(e,A){if(!t.workerPath&&!A)return i=!1,void fetch("https://unpkg.com/webm-wasm@latest/dist/webm-worker.js").then((function(t){t.arrayBuffer().then((function(t){a(e,t)}))}));if(!t.workerPath&&A instanceof ArrayBuffer){var c=new Blob([A],{type:"text/javascript"});t.workerPath=l.createObjectURL(c)}t.workerPath||console.error("workerPath parameter is missing."),(o=new Worker(t.workerPath)).postMessage(t.webAssemblyPath||"https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm"),o.addEventListener("message",(function(e){"READY"===e.data?(o.postMessage({width:t.width,height:t.height,bitrate:t.bitrate||1200,timebaseDen:t.frameRate||30,realtime:t.realtime}),n().pipeTo(new WritableStream({write:function(e){i?console.error("Got image, but recorder is finished!"):o.postMessage(e.data.buffer,[e.data.buffer])}}))):e.data&&(r||s.push(e.data))}))}"undefined"!=typeof ReadableStream&&"undefined"!=typeof WritableStream||console.error("Following polyfill is strongly recommended: https://unpkg.com/@mattiasbuelens/web-streams-polyfill/dist/polyfill.min.js"),(t=t||{}).width=t.width||640,t.height=t.height||480,t.frameRate=t.frameRate||30,t.bitrate=t.bitrate||1200,t.realtime=t.realtime||!0,this.record=function(){s=[],r=!1,this.blob=null,a(e),"function"==typeof t.initCallback&&t.initCallback()},this.pause=function(){r=!0},this.resume=function(){r=!1};var s=[];this.stop=function(e){i=!0;var t=this;!function(e){o?(o.addEventListener("message",(function(t){null===t.data&&(o.terminate(),o=null,e&&e())})),o.postMessage(null)):e&&e()}((function(){t.blob=new Blob(s,{type:"video/webm"}),e(t.blob)}))},this.name="WebAssemblyRecorder",this.toString=function(){return this.name},this.clearRecordedData=function(){s=[],r=!1,this.blob=null},this.blob=null}i.DiskStorage=M,i.GifRecorder=I,i.MultiStreamRecorder=_,i.RecordRTCPromisesHandler=function(e,t){if(!this)throw'Use "new RecordRTCPromisesHandler()"';if(void 0===e)throw'First argument "MediaStream" is required.';var o=this;o.recordRTC=new i(e,t),this.startRecording=function(){return new Promise((function(e,t){try{o.recordRTC.startRecording(),e()}catch(e){t(e)}}))},this.stopRecording=function(){return new Promise((function(e,t){try{o.recordRTC.stopRecording((function(i){o.blob=o.recordRTC.getBlob(),o.blob&&o.blob.size?e(i):t("Empty blob.",o.blob)}))}catch(e){t(e)}}))},this.pauseRecording=function(){return new Promise((function(e,t){try{o.recordRTC.pauseRecording(),e()}catch(e){t(e)}}))},this.resumeRecording=function(){return new Promise((function(e,t){try{o.recordRTC.resumeRecording(),e()}catch(e){t(e)}}))},this.getDataURL=function(e){return new Promise((function(e,t){try{o.recordRTC.getDataURL((function(t){e(t)}))}catch(e){t(e)}}))},this.getBlob=function(){return new Promise((function(e,t){try{e(o.recordRTC.getBlob())}catch(e){t(e)}}))},this.getInternalRecorder=function(){return new Promise((function(e,t){try{e(o.recordRTC.getInternalRecorder())}catch(e){t(e)}}))},this.reset=function(){return new Promise((function(e,t){try{e(o.recordRTC.reset())}catch(e){t(e)}}))},this.destroy=function(){return new Promise((function(e,t){try{e(o.recordRTC.destroy())}catch(e){t(e)}}))},this.getState=function(){return new Promise((function(e,t){try{e(o.recordRTC.getState())}catch(e){t(e)}}))},this.blob=null,this.version="5.6.2"},i.WebAssemblyRecorder=D}));class _e extends ye{constructor(e){super(),this.player=e,this.fileName="",this.fileType=H,this.isRecording=!1,this.recordingTimestamp=0,this.recordingInterval=null,e.debug.log("Recorder","init")}destroy(){this._reset(),this.player.debug.log("Recorder","destroy")}setFileName(e,t){this.fileName=e,P!==t&&H!==t||(this.fileType=t)}get recording(){return this.isRecording}get recordTime(){return this.recordingTimestamp}startRecord(){const e=this.player.debug,t={type:"video",mimeType:"video/webm;codecs=h264",onTimeStamp:t=>{e.log("Recorder","record timestamp :"+t)},disableLogs:!this.player._opt.debug};try{const e=this.player.video.$videoElement.captureStream(25);if(this.player.audio.mediaStreamAudioDestinationNode&&this.player.audio.mediaStreamAudioDestinationNode.stream&&!this.player.audio.isStateSuspended()&&this.player.audio.hasAudio){const t=this.player.audio.mediaStreamAudioDestinationNode.stream;if(t.getAudioTracks().length>0){const i=t.getAudioTracks()[0];i&&i.enabled&&e.addTrack(i)}}this.recorder=Le(e,t)}catch(t){e.error("Recorder",t),this.emit(R.recordCreateError)}this.recorder&&(this.isRecording=!0,this.player.emit(R.recording,!0),this.recorder.startRecording(),e.log("Recorder","start recording"),this.player.emit(R.recordStart),this.recordingInterval=window.setInterval((()=>{this.recordingTimestamp+=1,this.player.emit(R.recordingTimestamp,this.recordingTimestamp)}),1e3))}stopRecordAndSave(){this.recorder&&this.isRecording&&this.recorder.stopRecording((()=>{this.player.debug.log("Recorder","stop recording"),this.player.emit(R.recordEnd),function(e,t,i){const o=window.URL.createObjectURL(e),r=document.createElement("a");r.href=o,r.download=(t||de())+"."+(i||FILE_SUFFIX.webm),r.click(),window.URL.revokeObjectURL(o)}(this.recorder.getBlob(),this.fileName,this.fileType),this._reset(),this.player.emit(R.recording,!1)}))}_reset(){this.isRecording=!1,this.recordingTimestamp=0,this.recorder&&(this.recorder.destroy(),this.recorder=null),this.fileName=null,this.recordingInterval&&clearInterval(this.recordingInterval),this.recordingInterval=null}}class De{constructor(e){return new(De.getLoaderFactory())(e)}static getLoaderFactory(){return _e}}class ze extends ye{constructor(e){super(),this.player=e,this.hasInit=!1,this.isInitInfo=!1,this.decoder=null,this.initDecoder(),e.debug.log("Webcodecs","init")}destroy(){this.decoder&&(this.decoder.close(),this.decoder=null),this.hasInit=!1,this.isInitInfo=!1,this.off(),this.player.debug.log("Webcodecs","destroy")}initDecoder(){const e=this;this.decoder=new VideoDecoder({output(t){e.handleDecode(t)},error(t){e.handleError(t)}})}handleDecode(e){this.isInitInfo||(this.player.video.updateVideoInfo({width:e.codedWidth,height:e.codedHeight}),this.player.video.initCanvasViewSize(),this.isInitInfo=!0),this.player._times.videoStart||(this.player._times.videoStart=de(),this.player.handlePlayToRenderTimes()),this.player.handleRender(),this.player.video.render({videoFrame:e}),this.player.updateStats({fps:!0,ts:0,buf:this.player.demux.delay}),setTimeout((function(){e.close?e.close():e.destroy()}),100)}handleError(e){this.player.debug.log("Webcodecs","VideoDecoder handleError",e)}decodeVideo(e,t,i){if(this.hasInit){const o=new EncodedVideoChunk({data:e.slice(5),timestamp:t,type:i?q:Z});this.decoder.decode(o)}else if(i&&0===e[1]){const t=15&e[0];if(this.player.video.updateVideoInfo({encTypeCode:t}),t===z)return void this.emit(k.webcodecsH265NotSupport);this.player._times.decodeStart||(this.player._times.decodeStart=de());const i=function(e){let t=e.subarray(1,4),i="avc1.";for(let e=0;e<3;e++){let o=t[e].toString(16);o.length<2&&(o="0"+o),i+=o}return{codec:i,description:e}}(e.slice(5));this.decoder.configure(i),this.hasInit=!0}}}class je{static init(){je.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};for(let e in je.types)je.types.hasOwnProperty(e)&&(je.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);let e=je.constants={};e.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),e.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),e.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSC=e.STCO=e.STTS,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),e.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),e.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}static box(e){let t=8,i=null,o=Array.prototype.slice.call(arguments,1),r=o.length;for(let e=0;e<r;e++)t+=o[e].byteLength;i=new Uint8Array(t),i[0]=t>>>24&255,i[1]=t>>>16&255,i[2]=t>>>8&255,i[3]=255&t,i.set(e,4);let n=8;for(let e=0;e<r;e++)i.set(o[e],n),n+=o[e].byteLength;return i}static generateInitSegment(e){let t=je.box(je.types.ftyp,je.constants.FTYP),i=je.moov(e),o=new Uint8Array(t.byteLength+i.byteLength);return o.set(t,0),o.set(i,t.byteLength),o}static moov(e){let t=je.mvhd(e.timescale,e.duration),i=je.trak(e),o=je.mvex(e);return je.box(je.types.moov,t,i,o)}static mvhd(e,t){return je.box(je.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))}static trak(e){return je.box(je.types.trak,je.tkhd(e),je.mdia(e))}static tkhd(e){let t=e.id,i=e.duration,o=e.presentWidth,r=e.presentHeight;return je.box(je.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,0,0,0,0,i>>>24&255,i>>>16&255,i>>>8&255,255&i,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,o>>>8&255,255&o,0,0,r>>>8&255,255&r,0,0]))}static mdia(e){return je.box(je.types.mdia,je.mdhd(e),je.hdlr(e),je.minf(e))}static mdhd(e){let t=e.timescale,i=e.duration;return je.box(je.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,i>>>24&255,i>>>16&255,i>>>8&255,255&i,85,196,0,0]))}static hdlr(e){let t=null;return t="audio"===e.type?je.constants.HDLR_AUDIO:je.constants.HDLR_VIDEO,je.box(je.types.hdlr,t)}static minf(e){let t=null;return t="audio"===e.type?je.box(je.types.smhd,je.constants.SMHD):je.box(je.types.vmhd,je.constants.VMHD),je.box(je.types.minf,t,je.dinf(),je.stbl(e))}static dinf(){return je.box(je.types.dinf,je.box(je.types.dref,je.constants.DREF))}static stbl(e){return je.box(je.types.stbl,je.stsd(e),je.box(je.types.stts,je.constants.STTS),je.box(je.types.stsc,je.constants.STSC),je.box(je.types.stsz,je.constants.STSZ),je.box(je.types.stco,je.constants.STCO))}static stsdOld(e){return"audio"===e.type?je.box(je.types.stsd,je.constants.STSD_PREFIX,je.mp4a(e)):"avc"===e.videoType?je.box(je.types.stsd,je.constants.STSD_PREFIX,je.avc1(e)):je.box(je.types.stsd,je.constants.STSD_PREFIX,je.hvc1(e))}static stsd(e){return"audio"===e.type?je.box(je.types.stsd,je.constants.STSD_PREFIX,je.mp4a(e)):"avc"===e.videoType?je.box(je.types.stsd,je.constants.STSD_PREFIX,je.avc1(e)):je.box(je.types.stsd,je.constants.STSD_PREFIX,je.hvc1(e))}static mp4a(e){let t=e.channelCount,i=e.audioSampleRate,o=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t,0,16,0,0,0,0,i>>>8&255,255&i,0,0]);return je.box(je.types.mp4a,o,je.esds(e))}static esds(e){let t=e.config||[],i=t.length,o=new Uint8Array([0,0,0,0,3,23+i,0,1,0,4,15+i,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([i]).concat(t).concat([6,1,2]));return je.box(je.types.esds,o)}static avc1(e){let t=e.avcc;const i=e.codecWidth,o=e.codecHeight;let r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,i>>>8&255,255&i,o>>>8&255,255&o,0,72,0,0,0,72,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return je.box(je.types.avc1,r,je.box(je.types.avcC,t))}static hvc1(e){let t=e.avcc;const i=e.codecWidth,o=e.codecHeight;let r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,i>>>8&255,255&i,o>>>8&255,255&o,0,72,0,0,0,72,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return je.box(je.types.hvc1,r,je.box(je.types.hvcC,t))}static mvex(e){return je.box(je.types.mvex,je.trex(e))}static trex(e){let t=e.id,i=new Uint8Array([0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return je.box(je.types.trex,i)}static moof(e,t){return je.box(je.types.moof,je.mfhd(e.sequenceNumber),je.traf(e,t))}static mfhd(e){let t=new Uint8Array([0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e]);return je.box(je.types.mfhd,t)}static traf(e,t){let i=e.id,o=je.box(je.types.tfhd,new Uint8Array([0,0,0,0,i>>>24&255,i>>>16&255,i>>>8&255,255&i])),r=je.box(je.types.tfdt,new Uint8Array([0,0,0,0,t>>>24&255,t>>>16&255,t>>>8&255,255&t])),n=je.sdtp(e),a=je.trun(e,n.byteLength+16+16+8+16+8+8);return je.box(je.types.traf,o,r,a,n)}static sdtpOld(e){let t=new Uint8Array(5),i=e.flags;return t[4]=i.isLeading<<6|i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy,je.box(je.types.sdtp,t)}static sdtp(e){let t=new Uint8Array(5),i=e.flags;return t[4]=i.isLeading<<6|i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy,je.box(je.types.sdtp,t)}static trun(e,t){let i=new Uint8Array(28);t+=36,i.set([0,0,15,1,0,0,0,1,t>>>24&255,t>>>16&255,t>>>8&255,255&t],0);let o=e.duration,r=e.size,n=e.flags,a=e.cts;return i.set([o>>>24&255,o>>>16&255,o>>>8&255,255&o,r>>>24&255,r>>>16&255,r>>>8&255,255&r,n.isLeading<<2|n.dependsOn,n.isDependedOn<<6|n.hasRedundancy<<4|n.isNonSync,0,0,a>>>24&255,a>>>16&255,a>>>8&255,255&a],12),je.box(je.types.trun,i)}static mdat(e){return je.box(je.types.mdat,e)}}je.init();class Ve{constructor(e){this.TAG="ExpGolomb",this._buffer=e,this._buffer_index=0,this._total_bytes=e.byteLength,this._total_bits=8*e.byteLength,this._current_word=0,this._current_word_bits_left=0}destroy(){this._buffer=null}_fillCurrentWord(){let e=this._total_bytes-this._buffer_index,t=Math.min(4,e),i=new Uint8Array(4);i.set(this._buffer.subarray(this._buffer_index,this._buffer_index+t)),this._current_word=new DataView(i.buffer).getUint32(0,!1),this._buffer_index+=t,this._current_word_bits_left=8*t}readBits(e){if(e<=this._current_word_bits_left){let t=this._current_word>>>32-e;return this._current_word<<=e,this._current_word_bits_left-=e,t}let t=this._current_word_bits_left?this._current_word:0;t>>>=32-this._current_word_bits_left;let i=e-this._current_word_bits_left;this._fillCurrentWord();let o=Math.min(i,this._current_word_bits_left),r=this._current_word>>>32-o;return this._current_word<<=o,this._current_word_bits_left-=o,t=t<<o|r,t}readBool(){return 1===this.readBits(1)}readByte(){return this.readBits(8)}_skipLeadingZero(){let e;for(e=0;e<this._current_word_bits_left;e++)if(0!=(this._current_word&2147483648>>>e))return this._current_word<<=e,this._current_word_bits_left-=e,e;return this._fillCurrentWord(),e+this._skipLeadingZero()}readUEG(){let e=this._skipLeadingZero();return this.readBits(e+1)-1}readSEG(){let e=this.readUEG();return 1&e?e+1>>>1:-1*(e>>>1)}}class Fe{static _ebsp2rbsp(e){let t=e,i=t.byteLength,o=new Uint8Array(i),r=0;for(let e=0;e<i;e++)e>=2&&3===t[e]&&0===t[e-1]&&0===t[e-2]||(o[r]=t[e],r++);return new Uint8Array(o.buffer,0,r)}static parseSPS(e){let t=Fe._ebsp2rbsp(e),i=new Ve(t);i.readByte();let o=i.readByte();i.readByte();let r=i.readByte();i.readUEG();let n=Fe.getProfileString(o),a=Fe.getLevelString(r),s=1,A=420,c=[0,420,422,444],d=8;if((100===o||110===o||122===o||244===o||44===o||83===o||86===o||118===o||128===o||138===o||144===o)&&(s=i.readUEG(),3===s&&i.readBits(1),s<=3&&(A=c[s]),d=i.readUEG()+8,i.readUEG(),i.readBits(1),i.readBool())){let e=3!==s?8:12;for(let t=0;t<e;t++)i.readBool()&&(t<6?Fe._skipScalingList(i,16):Fe._skipScalingList(i,64))}i.readUEG();let l=i.readUEG();if(0===l)i.readUEG();else if(1===l){i.readBits(1),i.readSEG(),i.readSEG();let e=i.readUEG();for(let t=0;t<e;t++)i.readSEG()}let u=i.readUEG();i.readBits(1);let h=i.readUEG(),p=i.readUEG(),m=i.readBits(1);0===m&&i.readBits(1),i.readBits(1);let f=0,g=0,b=0,v=0;i.readBool()&&(f=i.readUEG(),g=i.readUEG(),b=i.readUEG(),v=i.readUEG());let y=1,w=1,S=0,C=!0,E=0,R=0;if(i.readBool()){if(i.readBool()){let e=i.readByte(),t=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],o=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];e>0&&e<16?(y=t[e-1],w=o[e-1]):255===e&&(y=i.readByte()<<8|i.readByte(),w=i.readByte()<<8|i.readByte())}if(i.readBool()&&i.readBool(),i.readBool()&&(i.readBits(4),i.readBool()&&i.readBits(24)),i.readBool()&&(i.readUEG(),i.readUEG()),i.readBool()){let e=i.readBits(32),t=i.readBits(32);C=i.readBool(),E=t,R=2*e,S=E/R}}let T=1;1===y&&1===w||(T=y/w);let k=0,x=0;if(0===s)k=1,x=2-m;else{k=3===s?1:2,x=(1===s?2:1)*(2-m)}let B=16*(h+1),M=16*(p+1)*(2-m);B-=(f+g)*k,M-=(b+v)*x;let I=Math.ceil(B*T);return i.destroy(),i=null,{profile_string:n,level_string:a,bit_depth:d,ref_frames:u,chroma_format:A,chroma_format_string:Fe.getChromaFormatString(A),frame_rate:{fixed:C,fps:S,fps_den:R,fps_num:E},sar_ratio:{width:y,height:w},codec_size:{width:B,height:M},present_size:{width:I,height:M}}}static _skipScalingList(e,t){let i=8,o=8,r=0;for(let n=0;n<t;n++)0!==o&&(r=e.readSEG(),o=(i+r+256)%256),i=0===o?i:o}static getProfileString(e){switch(e){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}}static getLevelString(e){return(e/10).toFixed(1)}static getChromaFormatString(e){switch(e){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}}}class Oe extends ye{constructor(e){super(),this.player=e,this.isAvc=!0,this.mediaSource=new window.MediaSource,this.sourceBuffer=null,this.hasInit=!1,this.isInitInfo=!1,this.cacheTrack={},this.timeInit=!1,this.sequenceNumber=0,this.mediaSourceOpen=!1,this.bufferList=[],this.dropping=!1,this.player.video.$videoElement.src=window.URL.createObjectURL(this.mediaSource);const{debug:t,events:{proxy:i}}=e;i(this.mediaSource,"sourceopen",(()=>{this.mediaSourceOpen=!0,this.player.emit(R.mseSourceOpen)})),i(this.mediaSource,"sourceclose",(()=>{this.player.emit(R.mseSourceClose)})),e.debug.log("MediaSource","init")}destroy(){this.stop(),this.sourceBuffer&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(this.sourceBuffer),this.mediaSource=null,this.sourceBuffer=null),Array.isArray(this.bufferList)&&(this.bufferList.length=0),this.mediaSourceOpen=!1,this.hasInit=!1,this.isInitInfo=!1,this.sequenceNumber=0,this.cacheTrack=null,this.timeInit=!1,this.off(),this.player.debug.log("MediaSource","destroy")}get state(){return this.mediaSource.readyState}get isStateOpen(){return this.state===J}get isStateClosed(){return this.state===K}get isStateEnded(){return this.state===X}get duration(){return this.mediaSource.duration}set duration(e){this.mediaSource.duration=e}decodeVideo(e,t,i){const o=this.player;if(this.hasInit)this._decodeVideo(e,t,i);else if(i&&0===e[1]){const r=15&e[0];if(o.video.updateVideoInfo({encTypeCode:r}),r===z)return void this.emit(k.mediaSourceH265NotSupport);o._times.decodeStart||(o._times.decodeStart=de()),this._decodeConfigurationRecord(e,t,i,r),this.hasInit=!0}}_doDecode(){const e=this.bufferList.shift();e&&this._decodeVideo(e.payload,e.ts,e.isIframe)}_decodeConfigurationRecord(e,t,i,o){let r=e.slice(5),n={};o===D?n=function(e){const t={},i=new DataView(e.buffer);let o=i.getUint8(0),r=i.getUint8(1);if(i.getUint8(2),i.getUint8(3),1!==o||0===r)return;const n=1+(3&i.getUint8(4));if(3!==n&&4!==n)return;let a=31&i.getUint8(5);if(0===a)return;let s=6;for(let o=0;o<a;o++){let r=i.getUint16(s,!1);if(s+=2,0===r)continue;let n=new Uint8Array(e.buffer,s,r);s+=r;let a=Fe.parseSPS(n);if(0!==o)continue;t.codecWidth=a.codec_size.width,t.codecHeight=a.codec_size.height,t.presentWidth=a.present_size.width,t.presentHeight=a.present_size.height,t.profile=a.profile_string,t.level=a.level_string,t.bitDepth=a.bit_depth,t.chromaFormat=a.chroma_format,t.sarRatio=a.sar_ratio,t.frameRate=a.frame_rate,!1!==a.frame_rate.fixed&&0!==a.frame_rate.fps_num&&0!==a.frame_rate.fps_den||(t.frameRate={});let A=t.frameRate.fps_den,c=t.frameRate.fps_num;t.refSampleDuration=t.timescale*(A/c);let d=n.subarray(1,4),l="avc1.";for(let e=0;e<3;e++){let t=d[e].toString(16);t.length<2&&(t="0"+t),l+=t}t.codec=l}let A=i.getUint8(s);if(0!==A){s++;for(let t=0;t<A;t++){let t=i.getUint16(s,!1);s+=2,0!==t&&(new Uint8Array(e.buffer,s,t),s+=t)}return t.videoType="avc",t}}(r):o===z&&(n=function(e){const t={videoType:"hevc"};let i=23;if(e[i]!==V)return t;i+=2,i+=1;const o=e[i+1]|e[i]<<8;i+=2;const r=e.slice(i,i+o);if(console.log(Uint8Array.from(r)),i+=o,e[i]!==F)return t;i+=2,i+=1;const n=e[i+1]|e[i]<<8;i+=2;const a=e.slice(i,i+n);if(console.log(Uint8Array.from(a)),i+=n,e[i]!==O)return t;i+=2,i+=1;const s=e[i+1]|e[i]<<8;i+=2;const A=e.slice(i,i+s);console.log(Uint8Array.from(A));let c=Uint8Array.from(a),d=class{static parseSPS(e){}}.parseSPS(c);return t.codecWidth=d.codec_size.width,t.codecHeight=d.codec_size.height,t.presentWidth=d.present_size.width,t.presentHeight=d.present_size.height,t.profile=d.profile_string,t.level=d.level_string,t.bitDepth=d.bit_depth,t.chromaFormat=d.chroma_format,t.sarRatio=d.sar_ratio,t}(r));const a={id:1,type:"video",timescale:1e3,duration:0,avcc:r,codecWidth:n.codecWidth,codecHeight:n.codecHeight,videoType:n.videoType},s=je.generateInitSegment(a);this.isAvc=!0,s.buffer&&this.appendBuffer(s.buffer),this.sequenceNumber=0,this.cacheTrack=null,this.timeInit=!1}_decodeVideo(e,t,i){const o=this.player;let r=e.slice(5),n=r.byteLength,a=t;const s=o.video.$videoElement;if(s.buffered.length>1&&(this.removeBuffer(s.buffered.start(0),s.buffered.end(0)),this.timeInit=!1),s.drop&&a-this.cacheTrack.dts>1e3)s.drop=!1,this.cacheTrack={};else if(this.cacheTrack&&a>this.cacheTrack.dts){let e=8+this.cacheTrack.size,i=new Uint8Array(e);i[0]=e>>>24&255,i[1]=e>>>16&255,i[2]=e>>>8&255,i[3]=255&e,i.set(je.types.mdat,4),i.set(this.cacheTrack.data,8),this.cacheTrack.duration=a-this.cacheTrack.dts;let r=je.moof(this.cacheTrack,this.cacheTrack.dts),n=new Uint8Array(r.byteLength+i.byteLength);n.set(r,0),n.set(i,r.byteLength),n.buffer&&this.appendBuffer(n.buffer),o.handleRender(),o.updateStats({fps:!0,ts:t,buf:o.demux?o.demux.delay:{}}),o._times.videoStart||(o._times.videoStart=de(),o.handlePlayToRenderTimes())}else o.debug.log("MediaSource","timeInit set false , cacheTrack = {}"),this.timeInit=!1,this.cacheTrack={};this.cacheTrack||(this.cacheTrack={}),this.cacheTrack.id=1,this.cacheTrack.sequenceNumber=++this.sequenceNumber,this.cacheTrack.size=n,this.cacheTrack.dts=a,this.cacheTrack.cts=0,this.cacheTrack.isKeyframe=i,this.cacheTrack.data=r,this.cacheTrack.flags={isLeading:0,dependsOn:i?2:1,isDependedOn:i?1:0,hasRedundancy:0,isNonSync:i?0:1},this.timeInit||1!==s.buffered.length||(o.debug.log("MediaSource","timeInit set true"),this.timeInit=!0,s.currentTime=s.buffered.end(0)),!this.isInitInfo&&s.videoWidth>0&&s.videoHeight>0&&(o.debug.log("MediaSource",`updateVideoInfo: ${s.videoWidth},${s.videoHeight}`),o.video.updateVideoInfo({width:s.videoWidth,height:s.videoHeight}),o.video.initCanvasViewSize(),this.isInitInfo=!0)}async appendBuffer(e){const{debug:t,events:{proxy:i}}=this.player;if(null!==e&&(null===this.sourceBuffer&&(this.sourceBuffer=this.mediaSource.addSourceBuffer(Y),i(this.sourceBuffer,"error",(e=>{this.player.emit(R.mseSourceBufferError,e),this.dropSourceBuffer(!0)}))),!this.sourceBuffer.updating))if(!1===this.sourceBuffer.updating&&this.isStateOpen)try{this.sourceBuffer.appendBuffer(e),e&&e.slice&&e.slice(e.byteLength)}catch(e){console.error("error: => sourceBuffer => appendBuffer"),this.player.replay()}else this.isStateClosed?this.player.emit(R.mseSourceBufferError,"mediaSource is not attached to video or mediaSource is closed"):this.isStateEnded?this.player.emit(R.mseSourceBufferError,"mediaSource is closed"):!0===this.sourceBuffer.updating&&(this.player.emit(R.mseSourceBufferBusy),this.dropSourceBuffer(!0))}stop(){this.isStateOpen&&this.sourceBuffer&&this.sourceBuffer.abort(),this.endOfStream()}dropSourceBuffer(e){const t=this.player.video.$videoElement;this.dropping=e,t.buffered.length>0&&t.buffered.end(0)-t.currentTime>1&&(t.currentTime=t.buffered.end(0))}removeBuffer(e,t){if(this.isStateOpen&&!1===this.sourceBuffer.updating)try{this.sourceBuffer.remove(e,t)}catch(e){console.error(e)}}endOfStream(){this.isStateOpen&&this.mediaSource.endOfStream()}}class Ue{constructor(e){this.player=e,e._opt.useWebRTC||e._opt.useMSE?setTimeout(this.__initWebRTCStatus.bind(this),200):(this.decoderWorker=new Worker(e._opt.decoder),this._initDecoderWorker(),e.debug.log("decoderWorker","init"))}__initWebRTCStatus(){this.player.loaded||this.player.emit(R.load),this.player.emit(R.decoderWorkerInit)}destroy(){this.decoderWorker&&(this.decoderWorker.postMessage({cmd:E}),this.decoderWorker.terminate(),this.decoderWorker=null),this.player.debug.log("decoderWorker","destroy")}_initDecoderWorker(){const{debug:e,events:{proxy:t}}=this.player;this.decoderWorker.onmessage=t=>{const i=t.data;switch(i.cmd){case d:e.log("decoderWorker","onmessage:",d),this.player.loaded||this.player.emit(R.load),this.player.emit(R.decoderWorkerInit),this._initWork();break;case f:e.log("decoderWorker","onmessage:",f,i.code),this.player._times.decodeStart||(this.player._times.decodeStart=de()),this.player.video.updateVideoInfo({encTypeCode:i.code});break;case m:e.log("decoderWorker","onmessage:",m,i.code),this.player.audio.updateAudioInfo({encTypeCode:i.code});break;case l:e.log("decoderWorker","onmessage:",l,`width:${i.w},height:${i.h}`),this.player.video.updateVideoInfo({width:i.w,height:i.h}),this.player.video.initCanvasViewSize();break;case p:e.log("decoderWorker","onmessage:",p,`channels:${i.channels},sampleRate:${i.sampleRate}`),this.player.audio.updateAudioInfo(i),this.player.audio.initScriptNode(i);break;case u:this.player.handleRender(),this.player.video.render(i),this.player.emit(R.timeUpdate,i.ts),this.player.updateStats({fps:!0,ts:i.ts,buf:i.delay}),this.player._times.videoStart||(this.player._times.videoStart=de(),this.player.handlePlayToRenderTimes());break;case h:e.log("decoderWorker","onmessage:",h,`msg ts:${i.ts}`),this.player.playing&&this.player.audio.play(i.buffer,i.ts);break;default:this.player[i.cmd]&&this.player[i.cmd](i)}}}_initWork(){const e={debug:this.player._opt.debug,forceNoOffscreen:this.player._opt.forceNoOffscreen,useWCS:this.player._opt.useWCS,videoBuffer:this.player._opt.videoBuffer};this.decoderWorker.postMessage({cmd:w,opt:JSON.stringify(e),sampleRate:this.player.audio.audioContext.sampleRate})}decodeVideo(e,t,i){const o={type:b,ts:Math.max(t,0),isIFrame:i};this.decoderWorker.postMessage({cmd:S,buffer:e,options:o},[e.buffer])}decodeAudio(e,t){this.player._opt.useWCS&&!this.player._opt.useOffscreen||this.player._opt.useMSE?this._decodeAudioNoDelay(e,t):this._decodeAudio(e,t)}_decodeAudio(e,t){const i={type:g,ts:Math.max(t,0)};this.decoderWorker.postMessage({cmd:S,buffer:e,options:i},[e.buffer])}_decodeAudioNoDelay(e,t){this.decoderWorker.postMessage({cmd:C,buffer:e,ts:Math.max(t,0)},[e.buffer])}}class We extends ye{constructor(e){super(),this.player=e,this.stopId=null,this.firstTimestamp=null,this.startTimestamp=null,this.delay=-1,this.bufferList=[],this.dropping=!1,this.initInterval()}destroy(){this.player.weak.has(this.player.demux)&&(clearInterval(this.player.weak.get(this.player.demux)),this.player.weak.delete(this.player.demux),this.initInterval=null),this.firstTimestamp=null,this.startTimestamp=null,this.delay=-1,Array.isArray(this.bufferList)?(this.bufferList.length=0,this.bufferList=[]):this.bufferList=[],this.dropping=!1,this.off()}getDelay(e){return e?(this.firstTimestamp?e&&(this.delay=Date.now()-this.startTimestamp-(e-this.firstTimestamp)):(this.firstTimestamp=e,this.startTimestamp=Date.now(),this.delay=-1),this.delay):-1}resetDelay(){this.firstTimestamp=null,this.startTimestamp=null,this.delay=-1,this.dropping=!1}initInterval(){const e=this.player._opt.videoBuffer;this.player.debug.log("common dumex","init Interval");let t=()=>{let t;if(this.bufferList.length)if(this.dropping){for(t=this.bufferList.shift(),t.type===g&&0===t.payload[1]&&this._doDecoderDecode(t);!t.isIFrame&&this.bufferList.length;)t=this.bufferList.shift(),t.type===g&&0===t.payload[1]&&(this._doDecoderDecode(t),t&&t.slice&&t.slice(t.byteLength));t.isIFrame&&(this.dropping=!1,this._doDecoderDecode(t),t&&t.slice&&t.slice(t.byteLength))}else if(t=this.bufferList[0],-1===this.getDelay(t.ts))this.bufferList.shift(),this._doDecoderDecode(t);else if(this.delay>e+1e3)this.resetDelay(),this.dropping=!0;else for(;this.bufferList.length;){if(t=this.bufferList[0],!(this.getDelay(t.ts)>e)){this.bufferList.length>20&&(this.bufferList.shift(),this._doDecoderDecode(t));break}this.bufferList.shift(),this._doDecoderDecode(t)}};t(),setInterval(t,10)}_doDecode(e,t,i,o){const r=this.player;let n={ts:i,type:t,isIFrame:!1};if(r._opt.useMSE)t===b&&(n.isIFrame=o),this.pushBuffer(e,n);else{const{decoderWorker:a}=r;r._opt.useWCS&&!r._opt.useOffscreen?(t===b&&(n.isIFrame=o),this.pushBuffer(e,n)):t===b?a.decodeVideo(e,i,o):t===g&&a.decodeAudio(e,i)}}_doDecoderDecode(e){const t=this.player,{decoderWorker:i,webcodecsDecoder:o,mseDecoder:r}=t;e.type===g?i.decodeAudio(e.payload,e.ts):e.type===b&&(t._opt.useWCS&&!t._opt.useOffscreen?o.decodeVideo(e.payload,e.ts,e.isIFrame):t._opt.useMSE&&r.decodeVideo(e.payload,e.ts,e.isIFrame))}pushBuffer(e,t){t.type===g?this.bufferList.push({ts:t.ts,payload:e,type:g}):t.type===b&&this.bufferList.push({ts:t.ts,payload:e,type:b,isIFrame:t.isIFrame}),this.bufferList.length%100||console.log(this.bufferList)}close(){}}class Qe extends We{constructor(e){super(e),this.input=this._inputFlv(),this.flvDemux=this.dispatchFlvData(this.input),e.debug.log("FlvDemux","init")}destroy(){super.destroy(),this.input=null,this.flvDemux=null,this.player.debug.log("FlvDemux","destroy")}dispatch(e){this.flvDemux(e)}*_inputFlv(){yield 9;const e=new ArrayBuffer(4),t=new Uint8Array(e),i=new Uint32Array(e),o=this.player;for(;;){t[3]=0;const e=yield 15,r=e[4];t[0]=e[7],t[1]=e[6],t[2]=e[5];const n=i[0];t[0]=e[10],t[1]=e[9],t[2]=e[8];let a=i[0];16777215===a&&(t[3]=e[11],a=i[0]);const s=yield n;switch(r){case v:o._opt.hasAudio&&(o.updateStats({abps:s.byteLength}),s.byteLength>0&&this._doDecode(s,g,a));break;case y:if(o._times.demuxStart||(o._times.demuxStart=de()),o._opt.hasVideo){o.updateStats({vbps:s.byteLength});const e=s[0]>>4==1;s.byteLength>0&&this._doDecode(s,b,a,e)}}}}dispatchFlvData(e){let t=e.next(),i=null;return o=>{let r=new Uint8Array(o);if(i){let e=new Uint8Array(i.length+r.length);e.set(i),e.set(r,i.length),r=e,i=null}for(;r.length>=t.value;){let i=r.slice(t.value);t=e.next(r.slice(0,t.value)),r=i}r.length>0&&(i=r)}}close(){this.input&&this.input.return(null)}}class Pe extends We{constructor(e){super(e),e.debug.log("M7sDemux","init")}destroy(){super.destroy(),this.player.debug.log("M7sDemux","destroy"),this.dispatch=null,this.player=null}dispatch(e){const t=this.player,i=new DataView(e),o=i.getUint8(0),r=i.getUint32(1,!1);switch(o){case g:if(t._opt.hasAudio){const i=new Uint8Array(e,5);t.updateStats({abps:i.byteLength}),i.byteLength>0&&this._doDecode(i,o,r)}break;case b:if(t._opt.hasVideo&&(t._times.demuxStart||(t._times.demuxStart=de()),i.byteLength>5)){const n=new Uint8Array(e,5),a=i.getUint8(5)>>4==1;t.updateStats({vbps:n.byteLength}),n.byteLength>0&&(this._doDecode(n,o,r,a),i&&i.slice&&i.slice(i.byteLength),n&&n.slice&&n.slice(n.byteLength))}}}}class He{constructor(e){return new(He.getLoaderFactory(e._opt.demuxType))(e)}static getLoaderFactory(e){return e===A?Pe:e===s?Qe:void 0}}function Ne(){let{path:e,color:t,className:i="",children:o="",style:r="",...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=[];return"string"==typeof e&&(e=[e]),"string"==typeof r?"string"==typeof t&&(r+=`;fill: ${t};`):(r.fill=t,r.color&&(r.fill=r.color,console.warn(`if you will set svg with color: "${r.color}", please use { fill: ${r.color} }`)),r=Object.entries(r).map((e=>{let[t,i]=e;return`${t}: ${i};`})).join("")),r&&a.push(`style="${r}"`),n&&"object"==typeof n&&Object.entries(n).map((e=>{let[t,i]=e;return a.push(`${t}="${i}"`)})),`<svg\n      class="icon ${i}"\n      viewBox="0 0 1024 1024"\n      version="1.1"\n      xmlns="http://www.w3.org/2000/svg"\n      width="200"\n      height="200"\n      ${a.join(" \n")}\n    >\n      ${e&&e.length?e.map((e=>`<path d="${e}"/>`)).join(""):""}${o||""}\n    </svg>`}const Ge={};Ge.__up="\nM560.256 314.453333c2.474667 2.389333 13.056 11.52 21.76 19.968 54.741333 49.706667 144.341333 179.370667 171.690667 247.253334 4.394667 10.325333 13.696 36.394667 14.293333 50.304 0 13.354667-3.072 26.026667-9.301333 38.186666a79.957333 79.957333 0 0 1-38.570667 33.92c-11.221333 4.266667-44.8 10.922667-45.397333 10.922667-36.736 6.656-96.426667 10.325333-162.389334 10.325333-62.848 0-120.106667-3.669333-157.397333-9.088-0.597333-0.64-42.325333-7.253333-56.618667-14.549333A76.16 76.16 0 0 1 256 634.368v-2.389333c0.64-18.176 16.853333-56.362667 17.450667-56.362667 27.392-64.213333 112.597333-190.890667 169.216-241.834667 0 0 14.549333-14.336 23.637333-20.565333A76.074667 76.074667 0 0 1 511.701333 298.666667c18.048 0 34.858667 5.461333 48.554667 15.786666z\n",Ge.up="\nM512.298667 561.706667l15.104-0.085334c59.904-0.512 113.365333-4.096 147.242666-10.325333 0.64 0 34.218667-6.826667 45.397334-11.136 16.213333-6.826667 29.909333-19.072 38.613333-34.517333a85.333333 85.333333 0 0 0 9.344-38.826667c-0.512-10.624-5.845333-28.16-10.325333-40.704l-4.010667-10.410667c-27.392-68.992-116.906667-200.832-171.690667-251.349333l-3.84-3.712-17.92-16.64A79.189333 79.189333 0 0 0 511.658667 128c-16.170667 0-32.341333 4.949333-45.397334 14.805333-4.224 2.986667-9.642667 7.68-14.250666 11.946667l-16.938667 16.170667C378.709333 226.56 299.605333 347.093333 273.365333 409.557333c-0.554667 0-16.768 38.826667-17.365333 57.301334v2.432c0 28.373333 16.170667 54.869333 42.282667 68.394666 7.168 3.712 21.162667 7.253333 33.450666 9.941334l23.210667 4.864c37.290667 5.546667 94.549333 9.216 157.354667 9.216z m-65.066667 270.165333c0 35.413333 29.013333 64.128 64.768 64.128a64.426667 64.426667 0 0 0 64.768-64.128l-13.994667-157.866667c0-27.733333-22.698667-50.304-50.773333-50.304-28.074667 0-50.816 22.528-50.816 50.346667l-13.952 157.824z\n",Ge.up_square="\nM938.666667 337.92v348.586667c0 150.613333-96.896 252.16-241.493334 252.16H327.253333C182.613333 938.666667 85.333333 837.12 85.333333 686.506667V337.92C85.333333 186.88 182.613333 85.333333 327.253333 85.333333h369.92C841.770667 85.333333 938.666667 186.88 938.666667 337.92zM480 415.146667v270.933333c0 17.92 14.506667 32 32 32 17.92 0 32-14.08 32-32V415.146667l105.386667 105.813333c5.973333 5.973333 14.506667 9.386667 22.613333 9.386667 8.064 0 16.213333-3.413333 22.613333-9.386667 12.373333-12.373333 12.373333-32.853333 0-45.226667l-160-160.853333a33.024 33.024 0 0 0-45.226666 0l-160 160.853333c-12.373333 12.373333-12.373333 32.853333 0 45.226667 12.8 12.373333 32.853333 12.373333 45.653333 0l104.96-105.813333z\n",Ge.up_circular="\nM512 85.333333c235.52 0 426.666667 191.573333 426.666667 426.666667l-0.170667 11.946667C932.181333 753.92 743.509333 938.666667 512 938.666667 276.906667 938.666667 85.333333 747.52 85.333333 512 85.333333 276.906667 276.906667 85.333333 512 85.333333zM341.333333 596.48c12.8 12.373333 32.853333 12.373333 45.226667-0.426667L512 470.186667l125.44 125.866666c12.373333 12.8 32.853333 12.8 45.226667 0.426667 12.8-12.8 12.8-32.853333 0-45.226667l-148.053334-148.906666a32 32 0 0 0-45.226666 0L341.333333 551.253333c-6.4 5.973333-9.386667 14.08-9.386666 22.186667 0 8.533333 2.986667 16.64 9.386666 23.04z\n",Ge.__right="\nM314.453333 463.744c2.389333-2.474667 11.52-13.056 19.968-21.76 49.706667-54.741333 179.370667-144.341333 247.253334-171.690667 10.325333-4.394667 36.394667-13.696 50.304-14.293333 13.354667 0 26.026667 3.072 38.186666 9.301333 15.146667 8.704 27.306667 22.4 33.92 38.570667 4.266667 11.221333 10.922667 44.8 10.922667 45.397333 6.656 36.736 10.325333 96.426667 10.325333 162.389334 0 62.848-3.669333 120.106667-9.088 157.397333-0.64 0.597333-7.253333 42.325333-14.549333 56.618667a76.16 76.16 0 0 1-67.328 42.325333h-2.389333c-18.176-0.64-56.362667-16.853333-56.362667-17.450667-64.213333-27.392-190.890667-112.597333-241.834667-169.216 0 0-14.336-14.549333-20.565333-23.637333A76.074667 76.074667 0 0 1 298.666667 512.298667c0-18.048 5.461333-34.858667 15.786666-48.554667z\n",Ge.right="\nM462.293333 512.298667l0.085334 15.104c0.512 59.904 4.096 113.365333 10.325333 147.242666 0 0.64 6.826667 34.218667 11.136 45.397334 6.826667 16.213333 19.072 29.909333 34.517333 38.613333a85.333333 85.333333 0 0 0 38.826667 9.344c10.624-0.512 28.16-5.845333 40.704-10.325333l10.410667-4.010667c68.992-27.392 200.832-116.906667 251.349333-171.690667l3.712-3.84 16.64-17.92c10.453333-13.738667 16-30.506667 16-48.554666 0-16.170667-4.949333-32.341333-14.805333-45.397334-2.986667-4.224-7.68-9.642667-11.946667-14.250666l-16.170667-16.938667c-55.68-56.362667-176.170667-135.466667-238.634666-161.706667 0-0.554667-38.826667-16.768-57.301334-17.365333h-2.432c-28.373333 0-54.869333 16.170667-68.394666 42.282667-3.712 7.168-7.253333 21.162667-9.941334 33.450666l-4.864 23.210667c-5.546667 37.290667-9.216 94.549333-9.216 157.354667z m-270.165333-65.066667C156.714667 447.232 128 476.245333 128 512a64.426667 64.426667 0 0 0 64.128 64.768l157.866667-13.994667c27.733333 0 50.304-22.698667 50.304-50.773333 0-28.074667-22.528-50.816-50.346667-50.816l-157.824-13.952z\n",Ge.right_square="\nM337.92 85.333333h348.586667C837.12 85.333333 938.666667 182.229333 938.666667 326.826667v369.92c0 144.64-101.546667 241.92-252.16 241.92H337.92C186.88 938.666667 85.333333 841.386667 85.333333 696.746667V326.826667C85.333333 182.229333 186.88 85.333333 337.92 85.333333z m77.226667 458.666667h270.933333c17.92 0 32-14.506667 32-32 0-17.92-14.08-32-32-32H415.146667l105.813333-105.386667c5.973333-5.973333 9.386667-14.506667 9.386667-22.613333 0-8.064-3.413333-16.213333-9.386667-22.613333a32.170667 32.170667 0 0 0-45.226667 0l-160.853333 160c-11.946667 11.946667-11.946667 33.28 0 45.226666l160.853333 160c12.373333 12.373333 32.853333 12.373333 45.226667 0 12.373333-12.8 12.373333-32.853333 0-45.653333l-105.813333-104.96z\n",Ge.right_circular="\nM938.666667 512c0 235.52-191.573333 426.666667-426.666667 426.666667l-11.946667-0.170667C270.08 932.181333 85.333333 743.509333 85.333333 512 85.333333 276.906667 276.48 85.333333 512 85.333333c235.093333 0 426.666667 191.573333 426.666667 426.666667zM427.52 341.333333c-12.373333 12.8-12.373333 32.853333 0.426667 45.226667L553.813333 512l-125.866666 125.44c-12.8 12.373333-12.8 32.853333-0.426667 45.226667 12.8 12.8 32.853333 12.8 45.226667 0l148.906666-148.053334a32 32 0 0 0 0-45.226666L472.746667 341.333333a30.037333 30.037333 0 0 0-22.186667-9.386666c-8.533333 0-16.64 2.986667-23.04 9.386666z\n",Ge.__down="\nM463.744 709.546667c-2.474667-2.389333-13.056-11.52-21.76-19.968-54.741333-49.706667-144.341333-179.370667-171.690667-247.253334-4.394667-10.325333-13.696-36.394667-14.293333-50.304 0-13.354667 3.072-26.026667 9.301333-38.186666 8.704-15.146667 22.4-27.306667 38.570667-33.92 11.221333-4.266667 44.8-10.922667 45.397333-10.922667 36.736-6.656 96.426667-10.325333 162.389334-10.325333 62.848 0 120.106667 3.669333 157.397333 9.088 0.597333 0.64 42.325333 7.253333 56.618667 14.549333 26.112 13.354667 42.325333 39.424 42.325333 67.328v2.389333c-0.64 18.176-16.853333 56.362667-17.450667 56.362667-27.392 64.213333-112.597333 190.890667-169.216 241.834667 0 0-14.549333 14.336-23.637333 20.565333a76.074667 76.074667 0 0 1-45.397333 14.549333c-18.048 0-34.858667-5.461333-48.554667-15.786666z\n",Ge.down="\nM447.232 192.128l13.994667 157.866667c0 27.733333 22.698667 50.304 50.773333 50.304 28.074667 0 50.816-22.528 50.816-50.346667l13.952-157.824C576.768 156.714667 547.754667 128 512 128a64.426667 64.426667 0 0 0-64.768 64.128z m11.434667 683.136c2.389333 2.176 4.266667 3.84 5.12 4.693333 13.738667 10.496 30.506667 16.042667 48.554666 16.042667 16.170667 0 32.341333-4.949333 45.397334-14.805333 9.045333-6.314667 23.637333-20.906667 23.637333-20.906667 56.618667-51.797333 141.824-180.522667 169.216-245.845333 0.597333 0 16.810667-38.826667 17.408-57.301334v-2.432c0-28.373333-16.170667-54.869333-42.282667-68.394666-10.837333-5.589333-37.290667-10.837333-49.834666-13.354667a73.514667 73.514667 0 0 1-6.826667-1.450667c-37.290667-5.546667-94.549333-9.216-157.354667-9.216-65.962667 0-125.653333 3.669333-162.346666 10.410667-0.64 0-34.218667 6.826667-45.397334 11.136-16.213333 6.826667-29.909333 19.072-38.613333 34.517333a85.333333 85.333333 0 0 0-9.344 38.826667c0.64 14.165333 9.984 40.661333 14.336 51.114667 27.392 68.992 116.906667 200.832 171.690667 251.349333 5.674667 5.632 12.16 11.52 16.64 15.616z\n",Ge.down_square="\nM85.333333 686.08V337.493333C85.333333 186.88 182.186667 85.333333 326.826667 85.333333h369.92C841.386667 85.333333 938.666667 186.88 938.666667 337.493333v348.586667c0 151.04-97.28 252.586667-241.92 252.586667H326.826667C182.186667 938.666667 85.333333 837.12 85.333333 686.08z m458.666667-77.226667V337.92c0-17.92-14.506667-32-32-32-17.92 0-32 14.08-32 32v270.933333l-105.386667-105.813333a32.725333 32.725333 0 0 0-22.613333-9.386667c-8.106667 0-16.213333 3.413333-22.613333 9.386667-12.373333 12.373333-12.373333 32.853333 0 45.226667l160 160.853333c11.946667 11.946667 33.28 11.946667 45.226666 0l160-160.853333c12.373333-12.373333 12.373333-32.853333 0-45.226667a32.725333 32.725333 0 0 0-45.653333 0l-104.96 105.813333z\n",Ge.down_circular="\nM512 938.666667C276.48 938.666667 85.333333 747.093333 85.333333 512 85.333333 276.48 276.48 85.333333 512 85.333333c235.093333 0 426.666667 191.146667 426.666667 426.666667 0 235.093333-191.573333 426.666667-426.666667 426.666667z m170.666667-511.146667a31.786667 31.786667 0 0 0-45.226667 0.426667L512 553.813333l-125.44-125.866666c-12.373333-12.8-32.853333-12.8-45.226667-0.426667-12.8 12.8-12.8 32.853333 0 45.226667l148.053334 148.906666a32 32 0 0 0 45.226666 0L682.666667 472.746667c6.4-5.973333 9.386667-14.08 9.386666-22.186667 0-8.533333-2.986667-16.64-9.386666-23.04z\n",Ge.__left="\nM314.453333 463.744c2.389333-2.474667 11.52-13.056 19.968-21.76 49.706667-54.741333 179.370667-144.341333 247.253334-171.690667 10.325333-4.394667 36.394667-13.696 50.304-14.293333 13.354667 0 26.026667 3.072 38.186666 9.301333 15.146667 8.704 27.306667 22.4 33.92 38.570667 4.266667 11.221333 10.922667 44.8 10.922667 45.397333 6.656 36.736 10.325333 96.426667 10.325333 162.389334 0 62.848-3.669333 120.106667-9.088 157.397333-0.64 0.597333-7.253333 42.325333-14.549333 56.618667a76.16 76.16 0 0 1-67.328 42.325333h-2.389333c-18.176-0.64-56.362667-16.853333-56.362667-17.450667-64.213333-27.392-190.890667-112.597333-241.834667-169.216 0 0-14.336-14.549333-20.565333-23.637333A76.074667 76.074667 0 0 1 298.666667 512.298667c0-18.048 5.461333-34.858667 15.786666-48.554667z\n",Ge.left="\nM561.706667 511.701333l-0.085334-15.104c-0.512-59.904-4.096-113.365333-10.325333-147.242666 0-0.64-6.826667-34.218667-11.136-45.397334-6.826667-16.213333-19.072-29.909333-34.517333-38.613333a85.333333 85.333333 0 0 0-38.826667-9.344c-10.624 0.512-28.16 5.845333-40.704 10.325333l-10.410667 4.010667c-68.992 27.392-200.832 116.906667-251.349333 171.690667l-3.712 3.84-16.64 17.92A79.189333 79.189333 0 0 0 128 512.341333c0 16.170667 4.949333 32.341333 14.805333 45.397334 2.986667 4.224 7.68 9.642667 11.946667 14.250666l16.170667 16.938667c55.637333 56.362667 176.170667 135.466667 238.634666 161.706667 0 0.554667 38.826667 16.768 57.301334 17.365333h2.432c28.373333 0 54.869333-16.170667 68.394666-42.282667 3.712-7.168 7.253333-21.162667 9.941334-33.450666l4.864-23.210667c5.546667-37.290667 9.216-94.549333 9.216-157.354667z m270.165333 65.066667c35.413333 0 64.128-29.013333 64.128-64.768a64.426667 64.426667 0 0 0-64.128-64.768l-157.866667 13.994667c-27.733333 0-50.304 22.698667-50.304 50.773333 0 28.074667 22.528 50.816 50.346667 50.816l157.824 13.952z\n",Ge.left_square="\nM337.92 85.333333h348.586667C837.12 85.333333 938.666667 182.229333 938.666667 326.826667v369.92c0 144.64-101.546667 241.92-252.16 241.92H337.92C186.88 938.666667 85.333333 841.386667 85.333333 696.746667V326.826667C85.333333 182.229333 186.88 85.333333 337.92 85.333333z m77.226667 458.666667h270.933333c17.92 0 32-14.506667 32-32 0-17.92-14.08-32-32-32H415.146667l105.813333-105.386667c5.973333-5.973333 9.386667-14.506667 9.386667-22.613333 0-8.064-3.413333-16.213333-9.386667-22.613333a32.170667 32.170667 0 0 0-45.226667 0l-160.853333 160c-11.946667 11.946667-11.946667 33.28 0 45.226666l160.853333 160c12.373333 12.373333 32.853333 12.373333 45.226667 0 12.373333-12.8 12.373333-32.853333 0-45.653333l-105.813333-104.96z\n",Ge.left_circular="\nM85.333333 512C85.333333 276.48 276.906667 85.333333 512 85.333333l11.946667 0.170667C753.92 91.818667 938.666667 280.490667 938.666667 512c0 235.093333-191.146667 426.666667-426.666667 426.666667-235.093333 0-426.666667-191.573333-426.666667-426.666667z m511.146667 170.666667c12.373333-12.8 12.373333-32.853333-0.426667-45.226667L470.186667 512l125.866666-125.44c12.8-12.373333 12.8-32.853333 0.426667-45.226667-12.8-12.8-32.853333-12.8-45.226667 0l-148.906666 148.053334a32 32 0 0 0 0 45.226666L551.253333 682.666667c5.973333 6.4 14.08 9.386667 22.186667 9.386666 8.533333 0 16.64-2.986667 23.04-9.386666z\n",Ge.swap="\nM321.962667 139.861333c7.082667 5.12 18.517333 16.853333 18.517333 16.853334 44.373333 41.642667 111.274667 145.066667 132.736 197.589333 0.426667 0 13.226667 31.232 13.653333 46.08v1.962667c0 22.784-12.714667 44.074667-33.152 54.954666-8.448 4.48-29.013333 8.661333-38.912 10.666667-3.242667 0.682667-5.376 1.109333-5.504 1.237333-29.269333 4.48-74.154667 7.381333-123.434666 7.381334-51.712 0-98.56-2.901333-127.36-8.405334-0.512 0-26.837333-5.418667-35.626667-8.917333a63.573333 63.573333 0 0 1-30.293333-27.733333 69.418667 69.418667 0 0 1-7.253334-31.146667c0.426667-11.392 7.808-32.682667 11.178667-41.088 21.461333-55.466667 91.733333-161.450667 134.698667-202.069333 4.437333-4.522667 9.514667-9.258667 13.056-12.544 1.877333-1.792 3.328-3.114667 4.010666-3.84 10.709333-8.362667 23.893333-12.842667 38.101334-12.842667 12.629333 0 25.301333 3.968 35.584 11.861333z m455.808 293.717334a40.106667 40.106667 0 0 1-39.850667 40.448 40.106667 40.106667 0 0 1-39.850667-40.448l-11.008-195.413334a51.2 51.2 0 0 1 50.858667-51.498666c28.032 0 50.773333 23.04 50.773333 51.541333l-10.922666 195.370667z m123.306666 131.157333c12.714667 5.461333 23.466667 15.36 30.293334 27.733333 4.906667 9.813333 7.296 20.309333 7.296 31.189334-0.426667 11.349333-7.808 32.682667-11.221334 41.088-21.418667 55.466667-91.733333 161.408-134.613333 202.069333-4.394667 4.394667-9.386667 9.045333-12.928 12.373333l-4.181333 3.925334c-10.794667 8.405333-23.893333 12.885333-38.058667 12.885333a58.026667 58.026667 0 0 1-35.626667-11.946667c-7.082667-5.034667-18.517333-16.768-18.517333-16.768-44.458667-41.557333-111.274667-145.109333-132.736-197.632-0.512 0-13.226667-31.146667-13.653333-45.994666v-1.962667c0-22.826667 12.629333-44.117333 33.152-55.04 8.448-4.394667 28.928-8.576 38.826666-10.666667 3.328-0.64 5.461333-1.066667 5.546667-1.194666 29.312-4.48 74.197333-7.424 123.477333-7.424 51.712 0 98.56 2.986667 127.36 8.405333 0.469333 0 26.837333 5.461333 35.626667 8.96zM286.165333 549.973333a40.106667 40.106667 0 0 0-39.850666 40.448l-11.008 195.413334a51.2 51.2 0 0 0 50.858666 51.498666c28.032 0 50.773333-23.04 50.773334-51.541333l-10.965334-195.370667a40.106667 40.106667 0 0 0-39.808-40.405333z\n";const $e={};$e.video_camera="\nM880.298667 297.984L761.173333 419.84v-72.362667c0-76.117333-61.44-137.557333-137.557333-137.557333H192.853333c-76.117333 0-137.557333 61.44-137.557333 137.557333v374.101334c0 76.117333 61.44 137.557333 137.557333 137.557333h430.421334c76.117333 0 137.557333-61.44 137.557333-137.557333v-64.170667l119.125333 113.664c32.426667 33.109333 88.405333 10.24 88.405334-36.181333V333.824c0.341333-46.08-55.637333-68.949333-88.064-35.84zM358.4 405.845333H186.368c-19.114667 0-34.474667-15.36-34.474667-34.474666s15.36-34.474667 34.474667-34.474667h172.032c19.114667 0 34.474667 15.36 34.474667 34.474667a34.816 34.816 0 0 1-34.474667 34.474666z\n",$e.xxxx="\nM345.344 \n";const qe={},Ze="\nM906.9 298.1a95.5 95.5 0 0 0-100 9.1L704 384V320a128.1 128.1 0 0 0-128-128H192A128.1 128.1 0 0 0 64 320v384a128.1 128.1 0 0 0 128 128h384a128.1 128.1 0 0 0 128-128V640l102.4 76.8a95.5 95.5 0 0 0 57.5 19.3 96.7 96.7 0 0 0 43-10A95.5 95.5 0 0 0 960 640V384a95.5 95.5 0 0 0-53.1-85.9z\n",Ye=["\nM320 64m192 0l0 0q192 0 192 192l0 256q0 192-192 192l0 0q-192 0-192-192l0-256q0-192 192-192Z\n","\nM800 416a32 32 0 0 0-32 32v64a256 256 0 0 1-512 0v-64a32 32 0 0 0-64 0v64A320 320 0 0 0 480 830v66H320a32 32 0 1 0 0 64h384a32 32 0 0 0 0-64h-160V830a320 320 0 0 0 288-318v-64a32 32 0 0 0-32-32z\n"],Xe=["\nM495.941767 913.437905 495.941767 736.922702c0-0.203638 0-0.407276 0.01535-0.611937-134.418432-8.27957-240.878093-119.882368-240.878093-256.512165l0-6.288217 0.047072 0c-0.031722-0.548492-0.047072-1.096984-0.047072-1.653663 0-13.305027 10.772344-24.086581 24.085558-24.086581 13.314237 0 24.086581 10.781554 24.086581 24.086581 0 0.556679-0.016373 1.105171-0.047072 1.653663l0.047072 0 0 8.476045c0 115.39824 93.459578 208.78721 208.747301 208.78721 115.304096 0 208.747301-93.475951 208.747301-208.78721l0-8.476045 0.047072 0c-0.030699-0.548492-0.047072-1.096984-0.047072-1.653663 0-13.305027 10.772344-24.086581 24.086581-24.086581 13.313214 0 24.085558 10.781554 24.085558 24.086581 0 0.556679-0.01535 1.105171-0.047072 1.653663l0.047072 0 0 6.288217c0 136.552026-106.427938 248.233618-240.878093 256.512165 0.01535 0.203638 0.01535 0.407276 0.01535 0.611937l0 176.515203 88.23867 0c13.344936 0 24.164353 10.694573 24.164353 24.085558 0 13.297864-10.709923 24.085558-24.164353 24.085558l-208.590735 0c-13.344936 0-24.164353-10.69355-24.164353-24.085558 0-13.296841 10.709923-24.085558 24.164353-24.085558L495.941767 913.437905z\n","\nM511.999488 62.389956c-88.708368 0-160.575162 71.92103-160.575162 160.637584l0 256.794597c0 88.590688 71.898517 160.637584 160.575162 160.637584 88.708368 0 160.575162-71.92103 160.575162-160.637584L672.57465 223.027539C672.57465 134.436852 600.676134 62.389956 511.999488 62.389956zM624.402511 479.955166c0 62.035892-50.446949 112.332415-112.403023 112.332415-62.08194 0-112.403023-50.188053-112.403023-112.332415L399.596466 222.89451c0-62.034868 50.446949-112.331391 112.403023-112.331391 62.08194 0 112.403023 50.187029 112.403023 112.331391L624.402511 479.955166z\n"],Je=["\nM519.253333 721.28h-14.506666a195.2 195.2 0 0 1-194.986667-195.2V201.685333A195.2 195.2 0 0 1 504.746667 6.485333h14.506666a195.2 195.2 0 0 1 194.986667 195.2v324.394667a195.2 195.2 0 0 1-194.986667 195.2zM504.746667 74.581333a127.146667 127.146667 0 0 0-126.890667 127.146667v324.352a127.146667 127.146667 0 0 0 126.890667 127.146667h14.506666a127.146667 127.146667 0 0 0 126.890667-127.146667V201.685333A127.146667 127.146667 0 0 0 519.253333 74.581333h-14.506666z\n","\nM512 847.274667a322.56 322.56 0 0 1-322.133333-322.133334 34.048 34.048 0 0 1 68.138666 0 253.994667 253.994667 0 1 0 507.989334 0 34.048 34.048 0 0 1 68.096 0A322.56 322.56 0 0 1 512 847.317333z\n","\nM487.765333 967.68a34.048 34.048 0 0 1-9.813333-24.405333V813.226667a34.048 34.048 0 0 1 68.096 0v130.048a34.048 34.048 0 0 1-58.282667 24.405333z\n","\nM663.637333 1002.538667H360.362667a34.048 34.048 0 0 1 0-68.096h303.274666a34.048 34.048 0 1 1 0 68.096z\n"],Ke=["\nM512 704a191.5 191.5 0 0 0 82.8-18.7L320 410.5V512a192 192 0 0 0 192 192zM704 512V256a192 192 0 0 0-382.4-24.9l363.7 363.7a191.5 191.5 0 0 0 18.7-82.8z\n","\nM704 896h-160V830a315.6 315.6 0 0 0 144.5-51l-46.4-46.4A256.1 256.1 0 0 1 256 512v-64a32 32 0 0 0-64 0v64A320 320 0 0 0 480 830v66H320a32 32 0 1 0 0 64h384a32 32 0 0 0 0-64zM832 512v-64a32 32 0 0 0-64 0v64a254.3 254.3 0 0 1-35.4 130l46.4 46.4a317.5 317.5 0 0 0 53-176.4zM886.6 841.4l-704-704a32 32 0 1 0-45.2 45.2l704 704a31.9 31.9 0 0 0 45.2 0 31.9 31.9 0 0 0 0-45.2z\n"],et=["\nM512 952.32a30.72 30.72 0 0 1-30.72-30.72v-117.76a30.72 30.72 0 0 1 61.44 0v117.76a30.72 30.72 0 0 1-30.72 30.72z\n","\nM596.48 967.68h-168.96a30.72 30.72 0 0 1 0-61.44h168.96a30.72 30.72 0 0 1 0 61.44zM931.84 931.84a20.48 20.48 0 0 1-14.4896-5.9904l-839.68-839.68a20.48 20.48 0 0 1 28.9792-28.9792l839.68 839.68A20.48 20.48 0 0 1 931.84 931.84z\n","\nM814.08 532.48a30.72 30.72 0 0 0-61.44 0 239.2576 239.2576 0 0 1-19.5072 94.8736l46.08 46.08A300.288 300.288 0 0 0 814.08 532.48zM512 773.12a240.64 240.64 0 0 1-240.64-240.64 30.72 30.72 0 0 0-61.44 0 302.08 302.08 0 0 0 546.9696 176.5376l-44.1344-44.0832A240.64 240.64 0 0 1 512 773.12zM378.88 245.76a133.12 133.12 0 0 1 266.24 0v293.4272l48.2816 48.2816A187.8016 187.8016 0 0 0 701.44 532.48V245.76a190.0032 190.0032 0 0 0-189.44-189.44 190.1056 190.1056 0 0 0-187.4944 162.4576L378.88 273.1008z\n","\nM512 665.6a133.12 133.12 0 0 1-133.12-133.12V331.0592l-56.32-56.32V532.48a190.0032 190.0032 0 0 0 189.44 189.44 189.7472 189.7472 0 0 0 163.5328-94.208l-41.6768-41.728A133.12 133.12 0 0 1 512 665.6z\n"],tt=["\nM220.754773 485.12a35.328 35.328 0 0 1 35.157334 30.592l0.341333 4.693333v8.832c0 136.106667 111.488 246.869333 248.490667 246.869334a248.746667 248.746667 0 0 0 215.893333-125.013334l51.498667 51.456a320.341333 320.341333 0 0 1-221.653334 140.8l-10.368 1.322667v107.946667h177.408a35.328 35.328 0 0 1 4.693334 70.272l-4.693334 0.298666H291.880107a35.370667 35.370667 0 0 1-25.045334-60.288 35.328 35.328 0 0 1 20.394667-9.984l4.693333-0.298666H469.202773v-107.946667c-155.989333-17.237333-278.528-146.517333-283.776-304.853333l-0.170666-10.581334v-8.874666a35.328 35.328 0 0 1 35.456-35.285334z m97.536-236.373333l353.493334 353.536a186.624 186.624 0 0 1-167.125334 103.381333c-99.797333 0-181.418667-78.336-186.154666-176.256l-0.213334-8.96V248.746667z m470.314667 236.373333a35.328 35.328 0 0 1 35.157333 30.592l0.298667 4.693333v8.832a313.770667 313.770667 0 0 1-30.208 134.698667l-54.272-54.272c7.765333-22.4 12.373333-46.208 13.354667-70.997333l0.170666-9.429334v-8.874666a35.328 35.328 0 0 1 35.498667-35.285334zM504.616107 0.085333c99.797333 0 181.418667 78.250667 186.154666 176.256l0.213334 8.96v335.104c0 12.629333-1.28 24.96-3.712 36.864L318.290773 188.416v-3.072C318.290773 83.157333 401.874773 0.128 504.616107 0.128z\n","\nM142.364101 188.327773m30.16989-30.169889l0 0q30.169889-30.169889 60.339778 0l603.397787 603.397787q30.169889 30.169889 0 60.339778l0 0q-30.169889 30.169889-60.339779 0l-603.397786-603.397786q-30.169889-30.169889 0-60.339779Z\n"];qe.video="\nM260.821333 192h247.125334c103.338667 0 175.488 71.210667 175.488 173.226667v293.546666c0 102.016-72.106667 173.226667-175.488 173.226667H260.821333C157.482667 832 85.333333 760.789333 85.333333 658.773333V365.226667C85.333333 263.253333 157.482667 192 260.821333 192z m590.72 101.504c18.730667-9.514667 40.704-8.533333 58.581334 2.730667 17.877333 11.221333 28.544 30.72 28.544 52.053333v327.466667c0 21.333333-10.666667 40.832-28.544 52.053333a59.093333 59.093333 0 0 1-58.624 2.688l-63.189334-31.914667a69.248 69.248 0 0 1-37.888-62.165333V387.541333c0-26.496 14.506667-50.346667 37.888-62.122666l63.232-31.914667z\n",qe.video2="\nM763.221333 177.493333H260.778667a136.533333 136.533333 0 0 0-136.533334 136.533334v502.442666a136.533333 136.533333 0 0 0 136.533334 136.533334h502.442666a136.533333 136.533333 0 0 0 136.533334-136.533334V314.026667a136.533333 136.533333 0 0 0-136.533334-136.533334z m-131.072 446.805334l-134.826666 77.824a68.266667 68.266667 0 0 1-102.4-59.050667v-155.648a68.266667 68.266667 0 0 1 102.4-59.050667l134.826666 77.824a68.266667 68.266667 0 0 1 0 118.101334z\n",qe.video3=Ze,qe.video3=Ze,qe.video3_disabled="\nM64 320v384a128.1 128.1 0 0 0 128 128h384a128.1 128.1 0 0 0 107.3-58.2l-561-561A127.6 127.6 0 0 0 64 320zM906.9 298.1a95.5 95.5 0 0 0-100 9.1L704 384V320a128.1 128.1 0 0 0-128-128H282.6L810 719.1a95.1 95.1 0 0 0 54 16.8 96.7 96.7 0 0 0 43-10A95.5 95.5 0 0 0 960 640V384a95.5 95.5 0 0 0-53.1-85.9zM182.6 137.4a32 32 0 1 0-45.2 45.2l704 704a31.9 31.9 0 0 0 45.2 0 31.9 31.9 0 0 0 0-45.2z\n",qe.play="\nM85.333333 512.256C85.333333 276.736 276.821333 85.333333 512 85.333333s426.666667 191.402667 426.666667 426.922667C938.666667 747.264 747.178667 938.666667 512 938.666667S85.333333 747.264 85.333333 512.256z m583.168 43.178667c4.522667-4.522667 10.282667-11.52 11.52-13.184 6.613333-8.618667 9.898667-19.328 9.898667-29.994667 0-11.989333-3.712-23.125333-10.709333-32.170667a158.805333 158.805333 0 0 1-3.157334-3.413333c-2.730667-2.944-6.698667-7.253333-10.453333-10.965333-33.749333-36.266667-121.898667-95.530667-168.021333-113.621334-6.997333-2.858667-24.704-9.045333-34.176-9.472-9.045333 0-17.706667 2.048-25.941334 6.186667a53.376 53.376 0 0 0-23.04 25.514667c-2.901333 7.381333-7.424 29.610667-7.424 30.037333-4.565333 24.32-6.997333 63.786667-6.997333 107.434667 0 41.642667 2.432 79.445333 6.144 104.149333 0.128 0.085333 0.469333 1.877333 1.024 4.608 1.706667 8.362667 5.12 25.728 8.874667 32.853333 9.045333 17.28 26.752 27.989333 45.696 27.989334h1.664c12.373333-0.426667 38.314667-11.093333 38.314666-11.52 43.648-18.133333 129.706667-74.496 164.309334-111.957334l2.474666-2.474666z\n",qe.play2="\nM204.672 204.8l0.576-9.024a76.8 76.8 0 0 1 114.624-57.472l2.688 1.6 464.64 309.888a78.08 78.08 0 0 1-1.472 126.72l-462.08 306.816c-12.224 8.448-26.88 13.184-42.176 12.608-42.24-1.536-76.8-34.56-76.8-76.8V204.8z\n",qe.pause="\nM255.36 896c-42.432 0-63.36-34.368-63.36-76.8V204.8c0-42.432 20.928-76.8 63.36-76.8s63.36 34.368 63.36 76.8v614.4c0 42.432-20.928 76.8-63.36 76.8zM767.36 896c-42.432 0-63.36-34.368-63.36-76.8V204.8c0-42.432 20.928-76.8 63.36-76.8s63.36 34.368 63.36 76.8v614.4c0 42.432-20.928 76.8-63.36 76.8z\n",qe.fast_forward="\nM510.08 174.4l8.32 4.544 8.192 5.248 7.936 5.696 332.864 255.168c19.712 17.664 29.184 40 28.608 66.944-0.64 26.944-10.24 47.616-28.8 61.888l-354.688 269.44-7.04 4.224c-24.32 13.44-56.32 18.56-57.472-44.16l0.256-154.24-255.744 194.176-7.04 4.224c-24.32 13.44-56.32 18.56-57.472-44.16l0.832-549.696c0.128-89.088 30.72-94.272 61.248-79.296l8.32 4.544 8.192 5.248 7.936 5.696 234.24 179.584V253.696c0.192-89.088 30.72-94.272 61.312-79.296z\n",qe.backward="\nM513.92 174.4l-8.32 4.544-8.192 5.248-7.936 5.696-332.864 255.168A83.264 83.264 0 0 0 128 512c0.64 26.944 10.24 47.616 28.8 61.888l354.688 269.44 7.04 4.224c24.32 13.44 56.32 18.56 57.472-44.16l-0.256-154.24 255.744 194.176 7.04 4.224c24.32 13.44 56.32 18.56 57.472-44.16l-0.832-549.696c-0.128-89.088-30.72-94.272-61.248-79.296l-8.32 4.544-8.192 5.248-7.936 5.696-234.24 179.584V253.696c-0.192-89.088-30.72-94.272-61.312-79.296z\n",qe.prev="\nM792.128 845.696l-536.32-269.44 0.576 264.768c0 30.336-28.288 54.912-63.232 54.976-35.008 0-63.424-24.448-63.488-54.784l-0.768-328.704L128 512l0.896-0.448-0.704-328.576C128.128 152.64 156.352 128 191.36 128c35.008-0.064 63.424 24.448 63.488 54.72l0.64 264.704 491.968-249.408c54.848-28.864 140.672-63.552 140.928 58.048l1.28 549.632c-1.856 69.12-60.416 55.936-97.536 40z\n",qe.next="\nM225.536 845.696l536.32-269.44-0.576 264.768c0 30.336 28.288 54.912 63.232 54.976 35.008 0 63.424-24.448 63.488-54.784l0.768-328.704L889.6 512l-0.896-0.448 0.704-328.576C889.6 152.64 861.248 128 826.24 128c-34.944-0.064-63.36 24.448-63.488 54.72l-0.576 264.704-491.968-249.408C215.36 169.152 129.536 134.4 129.216 256L128 805.696c1.856 69.12 60.352 55.936 97.536 40z\n",qe.microphone=Ye,qe.microphone0="\nM511.752 70.5c-86.605 0-156.835 69.734-156.835 155.747l0 273.812c0 86.013 70.23 155.748 156.835 155.748 86.602 0 156.832-69.735 156.832-155.748L668.584 226.247C668.584 140.234 598.354 70.5 511.752 70.5L511.752 70.5 511.752 70.5zM243.854 461.102c-18.051 0-32.649 14.496-32.649 32.451 0 2.269 0.197 4.436 0.689 6.506l-0.689 0c0 151.605 113.922 276.578 261.386 295.713l0 80.687-52.275 0c-21.702 0-39.257 17.458-39.257 38.964 0 21.499 17.555 38.957 39.257 38.957l182.969 0c21.701 0 39.256-17.458 39.256-38.957 0-21.506-17.555-38.964-39.256-38.964L551.01 876.459l0-80.687c143.119-18.543 254.383-137.002 260.691-282.688 0.396-2.072 0.695-4.243 0.695-6.512 0-0.79-0.197-1.479-0.197-2.167 0-1.483 0.197-2.86 0.197-4.345l-0.695 0c-3.058-14.795-16.172-25.94-32.057-25.94-15.782 0-28.999 11.145-32.057 25.94l-0.688 0c0 129.019-105.344 233.572-235.249 233.572-129.903 0-235.249-104.554-235.249-233.572l-0.689 0c0.396-2.07 0.689-4.237 0.689-6.506C276.503 475.598 261.906 461.102 243.854 461.102L243.854 461.102 243.854 461.102zM243.854 461.102\n",qe.microphone1="\nM495.940744 913.438928 495.940744 736.922702c0-0.203638 0-0.407276 0.01535-0.611937-134.418432-8.278547-240.878093-119.882368-240.878093-256.512165l0-6.288217 0.047072 0c-0.031722-0.548492-0.047072-1.096984-0.047072-1.653663 0-13.305027 10.772344-24.086581 24.085558-24.086581 13.314237 0 24.086581 10.781554 24.086581 24.086581 0 0.556679-0.016373 1.105171-0.047072 1.653663l0.047072 0 0 8.476045c0 115.399263 93.459578 208.78721 208.747301 208.78721 115.304096 0 208.747301-93.476975 208.747301-208.78721l0-8.476045 0.047072 0c-0.030699-0.548492-0.047072-1.096984-0.047072-1.653663 0-13.305027 10.772344-24.086581 24.086581-24.086581 13.313214 0 24.085558 10.781554 24.085558 24.086581 0 0.556679-0.01535 1.105171-0.047072 1.653663l0.047072 0 0 6.288217c0 136.551002-106.427938 248.233618-240.878093 256.512165 0.01535 0.203638 0.01535 0.407276 0.01535 0.611937l0 176.516226 88.23867 0c13.344936 0 24.164353 10.694573 24.164353 24.085558 0 13.305027-10.709923 24.085558-24.164353 24.085558l-208.590735 0c-13.344936 0-24.164353-10.694573-24.164353-24.085558 0-13.305027 10.709923-24.085558 24.164353-24.085558L495.940744 913.438928zM351.423303 223.027539c0-88.716554 71.866794-160.637584 160.575162-160.637584 88.676645 0 160.575162 72.046896 160.575162 160.637584l0 256.794597c0 88.716554-71.866794 160.637584-160.575162 160.637584-88.676645 0-160.575162-72.046896-160.575162-160.637584L351.423303 223.027539z\n",qe.microphone2=Xe,qe.microphone3="\nM277.585106 1023.445637a40.93757 40.93757 0 0 1-40.639066-41.278716 40.93757 40.93757 0 0 1 40.639066-41.236073L490.503112 940.888205v-107.759623c-166.436806-10.490252-298.503112-143.11092-298.503112-304.856964v-63.197373C192 443.070301 210.166047 426.439413 232.639067 426.439413c22.47302 0 40.596423 17.56904 40.596423 38.634832v63.197373c0 125.54188 107.20526 228.269594 238.589273 228.269594s238.589273-101.832204 238.589273-228.269594v-63.197373c0-21.9613 18.123403-38.634831 40.596423-38.634832 22.47302 0 40.639067 17.56904 40.639066 38.634832v63.197373c0 147.63111-110.019718 270.998182-255.817166 299.355978L575.789715 940.930848h184.986643a40.93757 40.93757 0 0 1 40.639066 41.278716c0.852866 22.85681-18.166047 41.278716-40.639066 41.278716H277.585106zM512.251196 0.006396a170.573207 170.573207 0 0 1 111.98131 40.639067C659.839663 71.09278 682.397969 115.143311 682.397969 164.183108v353.854117c0 49.08244-22.60095 93.132971-58.165463 123.580289A170.573207 170.573207 0 0 1 512.251196 682.299224a173.558238 173.558238 0 0 1-120.680544-48.272218 158.462509 158.462509 0 0 1-50.319096-115.989781V164.268395c0-44.860753 19.104199-86.352686 49.46623-115.989781A177.310848 177.310848 0 0 1 512.251196 0.006396z\n",qe.microphone4=Je,qe.microphone_disabled=Ke,qe.microphone_disabled0="\nM665.472 153.6a153.6 153.6 0 0 0-307.2 0v23.808l307.2 307.2zM726.144 798.72L885.376 957.696l72.448-72.192-819.2-819.2L66.176 138.496l292.096 292.352V512A153.6 153.6 0 0 0 578.176 650.496l75.008 74.752A256 256 0 0 1 255.872 512h-102.4a358.4 358.4 0 0 0 307.2 354.304V921.6l-102.4 102.4h307.2l-102.4-102.4v-55.296a355.84 355.84 0 0 0 163.072-67.584zM870.272 512h-102.4a246.272 246.272 0 0 1-8.96 66.048l80.128 79.872a356.096 356.096 0 0 0 31.232-145.92z\n",qe.microphone_disabled1="\nM412.032 592l-44.992 46.016a197.376 197.376 0 0 1-35.008-59.008A189.248 189.248 0 0 1 320 512V256c1.344-54.656 20.032-100.032 56-136C412.032 84.032 457.28 65.344 512 64c54.72 1.344 100.032 20.032 136 56 36.032 35.968 54.656 81.28 56 136v44.032l-64 64V256c-0.64-36.032-13.12-66.176-37.504-90.496C578.176 141.184 548.032 128.704 512 128c-35.968 0.64-66.176 13.184-90.496 37.504-24.32 24.32-36.8 54.528-37.504 90.496v256c0.64 30.72 9.984 57.344 28.032 80z m51.968 39.04a126.656 126.656 0 0 0 119.488-12.992A127.68 127.68 0 0 0 640.128 512v-56.96l64-64V512a189.632 189.632 0 0 1-96 166.016 187.776 187.776 0 0 1-95.488 26.048c-33.664 0-65.856-8.32-96.512-25.024l48-48z m-148.992 148.992l46.08-46.08A222.144 222.144 0 0 0 480 768h64c63.36-1.344 116.16-23.168 158.464-65.536 42.368-42.24 64.192-95.104 65.536-158.464V512c0-9.344 2.944-17.024 8.96-23.04a31.168 31.168 0 0 1 23.04-8.96c9.344 0 17.024 3.008 23.04 8.96 5.952 6.016 8.96 13.696 8.96 23.04v32c-2.048 81.344-30.208 149.12-84.48 203.52-54.4 54.272-122.24 82.432-203.52 84.48v64h64c9.344 0 17.024 3.008 23.04 8.96 5.952 6.016 8.96 13.696 8.96 23.04a31.168 31.168 0 0 1-8.96 23.04 31.168 31.168 0 0 1-23.04 8.96h-192a31.168 31.168 0 0 1-23.04-8.96 31.168 31.168 0 0 1-8.96-23.04c0-9.344 3.008-17.024 8.96-23.04a31.168 31.168 0 0 1 23.04-8.96h64v-64c-30.72 0-60.032-4.48-88-13.504a278.4 278.4 0 0 1-76.992-38.464z m-48-42.048A286.272 286.272 0 0 1 192 544V512c0-9.344 3.008-16.96 8.96-22.976a31.168 31.168 0 0 1 23.04-8.96c9.344 0 17.024 2.944 23.04 8.96 5.952 6.016 8.96 13.632 8.96 23.04v32c0 28.608 4.992 55.488 15.04 80.512 9.984 24.96 23.68 47.488 40.96 67.456l-44.992 45.952zM151.04 859.008a32.832 32.832 0 0 1-22.528 8.96 30.272 30.272 0 0 1-22.016-9.472 32 32 0 0 1-9.984-22.016 30.848 30.848 0 0 1 8.512-22.464l704-709.056a32.832 32.832 0 0 1 22.464-8.96c8.32 0 15.68 3.2 22.016 9.536a32.512 32.512 0 0 1 1.536 45.44l-704 708.032z\n",qe.microphone_disabled2=et,qe.microphone_disabled3="\nM841.5 510.1v-76.9c0-21.2-16.5-38.5-36.9-38.5-20.3 0-36.8 17.2-36.8 38.5v76.9c0 24.9-3.2 49.6-9.5 73.7l58.3 60.7c16.8-42.7 25.3-88.3 24.9-134.4z m-147.7 0V202.4c0.9-50.7-18.7-99.6-54.2-135.8-33.4-36.5-80.8-57-130.2-56.5-49.5-0.6-96.9 20-130.4 56.5-20.7 21.1-36.1 46.7-45.1 74.8l359.8 375c0.1-2 0.1-4.1 0.1-6.3z m10.4 280.5l-52.8-55c-41.5 29.3-91.2 44.6-141.9 43.9-68.8 1-134.9-27.7-182.7-79.4-49.4-49.7-76.8-118.6-75.8-190.2v-76.7c0.1-21.2-16.3-38.3-36.5-38.5-10 0-19.5 4.1-26.3 11.5-7.1 7.2-11.1 16.9-11 27v76.9c-1.1 85.5 29.3 168.2 85 231 53.8 64 129 104.2 210.2 112.7v79.3H324.8c-20.4 0-36.9 17.2-36.9 38.5 0 21.2 16.5 38.4 36.9 38.4h368.9c20.4 0 36.9-17.2 36.9-38.5S714.1 933 693.7 933H546.2v-79.3c57.5-5.9 112.2-27.8 158-63.1zM324.8 510.2c0.3 106 82.7 191.9 184.4 192.3 31 0.4 61.5-7.6 88.3-23.1L324.8 395.1v115.1zM844.4 838c-7.8 0-15.2-3.2-20.5-8.8L151.4 133.5c-11.4-12-11.5-30.9-0.2-43 10.7-11.4 28.6-12 40-1.4l1.2 1.2L865 786.1c11.4 12 11.5 30.8 0.2 42.9-5.4 5.8-12.9 9-20.8 9z\n",qe.microphone_disabled4="\nM272.4 633.3l-51.1 51.1c-4.8-11.7-8.8-23.7-12.2-36.1-0.7-2.7-1.1-5.6-1.1-8.4V496.7c0-17.4 13.7-32.2 31.1-32.7 18.1-0.5 32.9 14 32.9 32v129.8c0 2.5 0.1 5 0.4 7.5z m110.3 68.3l-44.2 44.2C384 789.6 445.7 816 512 816c107.4 0 202.7-69.1 236.7-169.9 2.2-6.5 3.3-13.4 3.3-20.3V496.7c0-17.4 13.7-32.2 31.1-32.7 18.1-0.5 32.9 14 32.9 32v144c0 2.8-0.4 5.6-1.1 8.4-18.5 68.2-58.9 126.1-112.3 166.9-43.5 33.3-95.6 55.2-151.5 62.2-4 0.5-7 3.9-7 7.9V944c0 8.8 7.2 16 16 16h80c35.3 0 64 28.6 64 64H320c0-17.7 7.2-33.7 18.7-45.3S366.3 960 384 960h80c8.8 0 16-7.2 16-16v-58.5c0-4-3-7.4-7-7.9-68.7-8.6-131.5-39.7-179.7-86.6L182.1 902.1c-6.3 6.3-14.4 9.4-22.6 9.4s-16.4-3.1-22.6-9.4c-12.5-12.5-12.5-32.8 0-45.3l115.1-115 46.3-46.3 44.7-44.7 48.3-48.3 441.6-441.6c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3L704 380.3V560c0 52.8-21.6 100.8-56.4 135.6S564.8 752 512 752c-49.7 0-95.2-19.1-129.3-50.4zM704 192v9.7L321.5 584.2c-1-7.9-1.5-16-1.5-24.2V192C320 86.4 406.4 0 512 0s192 86.4 192 192z\n",qe.microphone_disabled5="\nM512 0C406.4 0 320 86.4 320 192v368c0 8.2 0.5 16.3 1.5 24.2l62.5-62.5V192c0-34 13.4-66.1 37.7-90.4C445.9 77.4 478 64 512 64s66.1 13.4 90.3 37.6C626.6 125.9 640 158 640 192v73.7l64-64V192C704 86.4 617.6 0 512 0zM272.4 633.3l-51.1 51.1c-4.8-11.7-8.8-23.7-12.2-36.1-0.7-2.7-1.1-5.6-1.1-8.4V496.7c0-17.4 13.7-32.2 31.1-32.7 18.1-0.5 32.9 14 32.9 32v129.8c0 2.5 0.1 5 0.4 7.5zM512 752c52.8 0 100.8-21.6 135.6-56.4S704 612.8 704 560V380.3l174.1-174.1c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L391.3 602.5 343 650.8l-44.7 44.7-46.3 46.3-115.1 115.1c-12.5 12.5-12.5 32.8 0 45.3 6.3 6.3 14.4 9.4 22.6 9.4s16.4-3.1 22.6-9.4L293.3 791c48.2 46.8 111.1 77.9 179.7 86.6 4 0.5 7 3.9 7 7.9V944c0 8.8-7.2 16-16 16h-80c-17.7 0-33.7 7.2-45.3 18.7S320 1006.3 320 1024h384c0-35.4-28.7-64-64-64h-80c-8.8 0-16-7.2-16-16v-58.5c0-4 3-7.4 7-7.9 56-7 108.1-29 151.5-62.2 53.4-40.8 93.8-98.8 112.3-166.9 0.7-2.7 1.1-5.6 1.1-8.4V496c0-18-14.8-32.5-32.9-32-17.4 0.5-31.1 15.2-31.1 32.7v129.2c0 6.9-1.1 13.8-3.3 20.3C714.7 746.9 619.4 816 512 816c-66.3 0-128-26.4-173.5-70.2l44.2-44.2C416.8 732.9 462.3 752 512 752z m128-307.7V560c0 34-13.4 66.1-37.7 90.3C578.1 674.6 546 688 512 688c-31.1 0-60.6-11.2-84-31.7l212-212z\n",qe.microphone_disabled6="\nM378.4192 238.592c0-69.8368 56.5248-126.464 126.3616-126.6176h14.4896c69.8368 0.1024 126.3616 56.7808 126.3616 126.6176v266.752c0 4.4032-0.256 8.8064-0.6656 13.1072l55.8592 55.8592c8.1408-21.4528 12.6464-44.6464 12.6464-68.9664V238.592c0-107.264-86.8864-194.304-194.2016-194.4064h-14.4896c-90.5728 0.1024-166.6048 62.1056-188.1088 145.9712L378.4192 251.904v-13.312zM832.768 504.4224c0-18.688-15.1552-33.8432-33.8944-33.8944-18.7392 0-33.9456 15.1552-33.9456 33.8944 0 39.1168-8.9088 76.1856-24.7808 109.2608l50.0224 50.0224c27.0336-46.8992 42.5472-101.2736 42.5984-159.2832zM912.5376 868.7104L155.2896 111.4624a31.0272 31.0272 0 0 0-43.8272 0c-12.0832 12.0832-12.0832 31.6928 0 43.8272l199.1168 199.1168V505.344c0 107.264 86.8864 194.304 194.2016 194.4064h14.4896c38.912-0.0512 75.0592-11.5712 105.4208-31.2832l38.6048 38.6048c-42.1888 31.5392-94.5152 50.3296-151.2448 50.3296-139.7248 0-252.9792-113.2544-252.9792-252.9792 0-18.7392-15.2064-33.8944-33.8944-33.8944-18.7392 0-33.8944 15.2064-33.8944 33.8944 0.256 165.5808 125.7472 301.824 286.8736 318.9248v88.6272H361.0112c-18.688 0-33.8432 15.1552-33.8944 33.8944 0 18.7392 15.1552 33.9456 33.8944 33.9456h302.0288c18.688 0 33.8432-15.1552 33.8944-33.8944 0-18.7392-15.1552-33.9456-33.8944-33.9456h-117.0944v-88.6272c62.2592-6.6048 119.1424-31.0784 165.5808-68.0448l157.2352 157.2352a30.89408 30.89408 0 0 0 21.9136 9.0624c7.936 0 15.872-3.0208 21.9136-9.0624a31.07328 31.07328 0 0 0-0.0512-43.8272z m-393.3184-236.8h-14.4896c-69.8368-0.1024-126.3616-56.7808-126.3616-126.6176V422.1952l196.608 196.608a124.86144 124.86144 0 0 1-55.7568 13.1072z\n",qe.microphone_disabled7="\nM841.5 510.1v-76.9c0-21.2-16.5-38.5-36.9-38.5-20.3 0-36.8 17.2-36.8 38.5v76.9c0 24.9-3.2 49.6-9.5 73.7l58.3 60.7c16.8-42.7 25.3-88.3 24.9-134.4z m-147.7 0V202.4c0.9-50.7-18.7-99.6-54.2-135.8-33.4-36.5-80.8-57-130.2-56.5-49.5-0.6-96.9 20-130.4 56.5-20.7 21.1-36.1 46.7-45.1 74.8l359.8 375c0.1-2 0.1-4.1 0.1-6.3z m10.4 280.5l-52.8-55c-41.5 29.3-91.2 44.6-141.9 43.9-68.8 1-134.9-27.7-182.7-79.4-49.4-49.7-76.8-118.6-75.8-190.2v-76.7c0.1-21.2-16.3-38.3-36.5-38.5-10 0-19.5 4.1-26.3 11.5-7.1 7.2-11.1 16.9-11 27v76.9c-1.1 85.5 29.3 168.2 85 231 53.8 64 129 104.2 210.2 112.7v79.3H324.8c-20.4 0-36.9 17.2-36.9 38.5 0 21.2 16.5 38.4 36.9 38.4h368.9c20.4 0 36.9-17.2 36.9-38.5S714.1 933 693.7 933H546.2v-79.3c57.5-5.9 112.2-27.8 158-63.1zM324.8 510.2c0.3 106 82.7 191.9 184.4 192.3 31 0.4 61.5-7.6 88.3-23.1L324.8 395.1v115.1zM844.4 838c-7.8 0-15.2-3.2-20.5-8.8L151.4 133.5c-11.4-12-11.5-30.9-0.2-43 10.7-11.4 28.6-12 40-1.4l1.2 1.2L865 786.1c11.4 12 11.5 30.8 0.2 42.9-5.4 5.8-12.9 9-20.8 9z\n",qe.microphone_disabled8="\nM983.000554 937.607235L87.075587 29.523287a31.99732 31.99732 0 1 0-45.436194 44.796249L320.016079 356.5359V512.042876a191.983921 191.983921 0 0 0 191.983921 191.983922 191.983921 191.983921 0 0 0 113.270514-37.756838l44.796248 45.436195A255.978562 255.978562 0 0 1 256.021438 512.042876V448.048236a31.99732 31.99732 0 0 0-63.99464 0v63.99464a319.973202 319.973202 0 0 0 291.81556 319.973203H480.00268v127.989281H320.016079a31.99732 31.99732 0 0 0 0 63.99464h383.967842a31.99732 31.99732 0 0 0 0-63.99464H543.99732v-127.989281a319.973202 319.973202 0 0 0 172.785529-71.673998l222.061403 225.261135a31.99732 31.99732 0 0 0 45.436195-44.796249zM512 640.032157a127.989281 127.989281 0 0 1-127.989281-127.989281V421.810433l195.8236 198.383386A127.989281 127.989281 0 0 1 512 640.032157zM352.653345 157.512568a31.99732 31.99732 0 0 0 42.236463-16.638606A127.989281 127.989281 0 0 1 639.989281 192.069674v255.978562a31.99732 31.99732 0 0 0 63.99464 0V192.069674a191.983921 191.983921 0 0 0-367.969182-76.793568 31.99732 31.99732 0 0 0 16.638606 42.236462zM790.376686 593.956016h5.759518a31.99732 31.99732 0 0 0 31.357373-26.877749A331.492238 331.492238 0 0 0 831.973202 512.042876V448.048236a31.99732 31.99732 0 0 0-63.99464 0v63.99464a262.378026 262.378026 0 0 1-3.839679 44.796249 31.99732 31.99732 0 0 0 26.237803 37.116891z\n",qe.microphone_disabled9=tt;const it={};it.off="\nM871.253333 139.52a39.509333 39.509333 0 1 1 55.850667 55.936L195.370667 927.146667a40.405333 40.405333 0 0 1-27.904 11.562666 41.088 41.088 0 0 1-27.776-11.434666 39.68 39.68 0 0 1-0.170667-56.021334l120.618667-120.618666h-1.237334c-60.117333 0-103.893333-42.453333-112-108.373334-9.088-65.92-7.253333-178.858667 0-238.933333 8.533333-62.293333 54.613333-105.173333 112-105.173333h78.08l149.077334-121.941334c18.133333-15.36 50.176-29.866667 75.008-30.250666 45.141333 0 86.698667 31.573333 101.589333 82.176 5.888 21.248 8.192 42.410667 9.984 62.805333l3.584 28.842667c0.597333 4.437333 1.109333 8.704 1.578667 13.226666L871.253333 139.52z m-236.373333 446.336c6.144-5.973333 19.754667-10.24 25.898667-8.661333 16.597333 4.224 19.84 27.989333 19.584 46.72-0.768 54.272-2.56 92.032-5.461334 115.370666l-2.048 19.242667v0.341333c-1.962667 19.370667-3.968 39.381333-9.685333 60.757334-15.061333 50.517333-55.381333 83.285333-101.248 83.285333l-4.522667-0.042667c-25.344 0-52.778667-15.189333-68.394666-28.416l-55.466667-42.922666c-21.12-15.701333-14.890667-40.704-3.072-55.210667 8.874667-10.794667 115.072-108.288 170.88-159.488 18.901333-17.365333 32-29.44 33.578667-30.976z\n",it.up="\nM569.898667 275.2c-2.133333-20.736-4.394667-42.24-9.898667-63.744C545.066667 160.085333 503.509333 128 459.008 128c-24.832-0.085333-56.234667 15.189333-74.069333 30.72l-147.626667 123.605333h-77.226667c-56.874667 0-102.570667 43.818667-111.232 107.093334-7.338667 60.757333-9.130667 175.36 0 242.218666 7.936 66.858667 51.626667 110.037333 111.232 110.037334h77.226667l150.485333 125.44c15.445333 13.44 42.666667 28.842667 67.754667 28.842666l4.48 0.042667c45.354667 0 85.333333-33.28 100.266667-84.48 5.674667-21.717333 7.68-42.026667 9.557333-61.653333l0.042667-0.341334 2.005333-19.584c7.68-63.445333 7.68-372.864 0-435.84l-2.005333-18.858666z m172.8 1.92a38.698667 38.698667 0 0 0-54.570667-10.112 40.832 40.832 0 0 0-9.728 55.808c34.218667 50.432 53.034667 117.589333 53.034667 189.184 0 71.552-18.816 138.752-53.034667 189.184a40.789333 40.789333 0 0 0 9.813333 55.808 38.613333 38.613333 0 0 0 54.485334-10.112c43.178667-63.658667 67.029333-147.072 67.029333-234.88s-23.850667-171.221333-67.029333-234.88zM823.04 137.386667a38.613333 38.613333 0 0 1 54.485333 10.069333C944.469333 246.058667 981.333333 375.552 981.333333 512c0 136.533333-36.864 265.984-103.808 364.544a38.485333 38.485333 0 0 1-54.442666 10.069333 40.832 40.832 0 0 1-9.813334-55.808c57.856-85.290667 89.770667-198.528 89.770667-318.805333 0-120.234667-31.914667-233.472-89.813333-318.762667a40.874667 40.874667 0 0 1 9.813333-55.808z\n",it.down="\nM645.973333 211.456c5.504 21.504 7.722667 43.008 9.898667 63.786667l2.005333 18.858666c7.68 62.976 7.68 372.394667 0 435.84l-2.005333 19.584-0.042667 0.341334c-1.92 19.626667-3.925333 39.936-9.557333 61.610666-15.018667 51.285333-55.04 84.522667-100.437333 84.522667l-4.48-0.042667c-25.088 0-52.352-15.36-67.84-28.8l-150.613334-125.482666H245.546667c-59.733333 0-103.424-43.178667-111.36-110.037334-9.130667-66.816-7.338667-181.461333 0-242.218666 8.661333-63.274667 54.442667-107.093333 111.36-107.093334h77.354666l147.797334-123.648c17.792-15.488 49.237333-30.762667 74.112-30.677333 44.586667 0 86.144 32.085333 101.12 83.456z m128.341334 55.552a38.826667 38.826667 0 0 1 54.528 10.112C872.106667 340.821333 896 424.234667 896 512s-23.893333 171.178667-67.157333 234.88a39.04 39.04 0 0 1-32.170667 17.237333 38.485333 38.485333 0 0 1-22.357333-7.125333 40.746667 40.746667 0 0 1-9.813334-55.808c34.261333-50.474667 53.12-117.674667 53.12-189.184 0-71.552-18.858667-138.666667-53.12-189.184a40.746667 40.746667 0 0 1 9.813334-55.808z\n";const ot={};ot.follow="\nM582.136486 958.756758c-36.425039 0-70.509513-16.091383-93.91516-44.105017L109.708121 529.994554a42.569021 42.569021 0 0 1-2.047994-2.194279C34.371194 441.345665 16.963244 333.533401 59.824835 232.303976 106.050989 123.321431 212.912398 44.912512 325.698361 37.305676a311.660824 311.660824 0 0 1 256.511268 106.422553A311.733966 311.733966 0 0 1 838.501468 37.305676c114.029388 7.533693 222.35365 88.722032 263.386676 197.412008 38.765604 102.47285 12.287965 210.211971-72.411222 295.496298l-352.98642 383.92576c-23.405647 28.379347-57.709549 44.617015-94.354016 44.617016\n",ot.un_follow="\nM167.919429 474.844998l378.732633 384.876614a41.179311 41.179311 0 0 1 2.633135 2.998849 43.37359 43.37359 0 0 0 67.437522-1.974852l354.741843-385.900611c63.707247-64.07296 83.016906-138.971032 55.442127-211.821109C996.625633 182.859546 916.973289 122.882575 833.151814 117.323733a233.032477 233.032477 0 0 0-191.926308 80.603199l-28.306205 33.938188a40.082171 40.082171 0 0 1-61.58611 0l-28.379347-34.011331a231.277053 231.277053 0 0 0-191.926309-80.530056c-81.992909 5.485699-163.181248 65.608955-197.338865 146.285297-17.919949 42.422736-37.229608 125.95164 34.230759 211.235968m414.206817 483.91176c-36.425039 0-70.509513-16.091383-93.91516-44.105017L109.697881 529.994554a42.569021 42.569021 0 0 1-2.047994-2.194279C34.360954 441.345665 16.953004 333.533401 59.814595 232.303976 106.040749 123.321431 212.902158 44.912512 325.688121 37.305676a311.660824 311.660824 0 0 1 256.511268 106.422553A311.733966 311.733966 0 0 1 838.491228 37.305676c114.029388 7.533693 222.35365 88.722032 263.386676 197.412008 38.765604 102.47285 12.287965 210.211971-72.411222 295.496298l-352.98642 383.92576c-23.405647 28.379347-57.709549 44.617015-94.354016 44.617016\n";const rt={};rt.__more="\nM746.662 512c0 51.836 42.045 93.866 93.866 93.866 51.852 0 93.866-42.03 93.866-93.866 0-51.837-42.014-93.866-93.866-93.866-51.821 0.001-93.866 42.03-93.866 93.866zM89.604 512c0 51.836 42.044 93.866 93.865 93.866 51.822 0 93.866-42.03 93.866-93.866 0-51.837-42.044-93.866-93.866-93.866-51.82 0.001-93.865 42.03-93.865 93.866zM418.133 512c0 51.836 42.014 93.866 93.866 93.866 51.822 0 93.865-42.03 93.865-93.866 0-51.837-42.043-93.866-93.865-93.866-51.852 0.001-93.866 42.03-93.866 93.866z\n",rt.more_horizontal="\nM192 448a64 64 0 1 0 64 64 64.1 64.1 0 0 0-64-64z m320 0a64 64 0 1 0 64 64 64.1 64.1 0 0 0-64-64z m320 0a64 64 0 1 0 64 64 64.1 64.1 0 0 0-64-64z\n",rt.more_vertical="\nM512 256a64 64 0 1 0-64-64 64.1 64.1 0 0 0 64 64z m0 192a64 64 0 1 0 64 64 64.1 64.1 0 0 0-64-64z m0 320a64 64 0 1 0 64 64 64.1 64.1 0 0 0-64-64z\n";const nt={};nt.move="\nM484.906667 58.197333a38.4 38.4 0 0 1 54.314666 0l128 128a38.4 38.4 0 0 1-54.314666 54.272l-62.421334-62.421333V473.6h295.552l-62.464-62.464a38.4 38.4 0 1 1 54.314667-54.272l128 128a38.4 38.4 0 0 1 0 54.272l-128 128a38.4 38.4 0 1 1-54.314667-54.272L846.08 550.4h-295.552v295.552l62.421333-62.421333a38.4 38.4 0 1 1 54.314667 54.272l-128 128a38.4 38.4 0 0 1-54.314667 0l-128-128a38.4 38.4 0 1 1 54.314667-54.272l62.464 62.421333V550.4H178.090667l62.464 62.464a38.4 38.4 0 0 1-54.314667 54.272l-128-128a38.4 38.4 0 0 1 0-54.272l128-128a38.4 38.4 0 0 1 54.314667 54.272L178.090667 473.6h295.594666V178.048L411.221333 240.469333a38.4 38.4 0 0 1-54.314666-54.272l128-128z\n",nt.right="\nM356.906667 228.864a38.4 38.4 0 0 1 54.314666 0l256 256a38.4 38.4 0 0 1 0 54.272l-256 256a38.4 38.4 0 1 1-54.314666-54.272L585.813333 512 356.906667 283.136a38.4 38.4 0 0 1 0-54.272z\n",nt.double_right="\nM228.906667 271.530667a38.4 38.4 0 0 1 54.314666 0l213.333334 213.333333a38.4 38.4 0 0 1 0 54.272l-213.333334 213.333333a38.4 38.4 0 1 1-54.314666-54.272L415.146667 512 228.906667 325.802667a38.4 38.4 0 0 1 0-54.272z m298.666666 0a38.4 38.4 0 0 1 54.314667 0l213.333333 213.333333a38.4 38.4 0 0 1 0 54.272l-213.333333 213.333333a38.4 38.4 0 1 1-54.314667-54.272L713.813333 512l-186.197333-186.197333a38.4 38.4 0 0 1 0-54.272z\n",nt.left="\nM667.221333 228.864a38.4 38.4 0 0 1 0 54.272L438.357333 512l228.864 228.864a38.4 38.4 0 0 1-54.314666 54.272l-256-256a38.4 38.4 0 0 1 0-54.272l256-256a38.4 38.4 0 0 1 54.314666 0z\n",nt.double_left="\nM496.554667 271.530667a38.4 38.4 0 0 1 0 54.272L310.357333 512l186.197334 186.197333a38.4 38.4 0 0 1-54.314667 54.272l-213.333333-213.333333a38.4 38.4 0 0 1 0-54.272l213.333333-213.333333a38.4 38.4 0 0 1 54.314667 0z m298.666666 0a38.4 38.4 0 0 1 0 54.272L609.024 512l186.197333 186.197333a38.4 38.4 0 0 1-54.314666 54.272l-213.333334-213.333333a38.4 38.4 0 0 1 0-54.272l213.333334-213.333333a38.4 38.4 0 0 1 54.314666 0z\n",nt.up="\nM484.906667 356.864a38.4 38.4 0 0 1 54.314666 0l256 256a38.4 38.4 0 0 1-54.314666 54.272l-228.821334-228.821333-228.864 228.821333a38.4 38.4 0 1 1-54.314666-54.272l256-256z\n",nt.double_up="\nM484.906667 228.864a38.4 38.4 0 0 1 54.314666 0l213.333334 213.333333a38.4 38.4 0 0 1-54.314667 54.272l-186.154667-186.154666-186.197333 186.154666a38.4 38.4 0 1 1-54.314667-54.272l213.333334-213.333333z m-213.333334 512l213.333334-213.333333a38.4 38.4 0 0 1 54.314666 0l213.333334 213.333333a38.4 38.4 0 0 1-54.314667 54.272l-186.154667-186.154667-186.197333 186.154667a38.4 38.4 0 1 1-54.314667-54.272z\n",nt.down="\nM228.906667 356.864a38.4 38.4 0 0 1 54.314666 0l228.864 228.821333 228.821334-228.821333a38.4 38.4 0 0 1 54.314666 54.272l-256 256a38.4 38.4 0 0 1-54.314666 0l-256-256a38.4 38.4 0 0 1 0-54.272z\n",nt.double_down="\nM271.573333 228.864a38.4 38.4 0 0 1 54.314667 0l186.197333 186.154667 186.154667-186.154667a38.4 38.4 0 0 1 54.314667 54.272l-213.333334 213.333333a38.4 38.4 0 0 1-54.314666 0l-213.333334-213.333333a38.4 38.4 0 0 1 0-54.272z m0 298.666667a38.4 38.4 0 0 1 54.314667 0l186.197333 186.154666 186.154667-186.154666a38.4 38.4 0 1 1 54.314667 54.272l-213.333334 213.333333a38.4 38.4 0 0 1-54.314666 0l-213.333334-213.333333a38.4 38.4 0 0 1 0-54.272z\n",nt.sort="\nM484.906667 143.530667a38.4 38.4 0 0 1 54.314666 0l213.333334 213.333333a38.4 38.4 0 0 1-54.314667 54.272l-186.154667-186.154667-186.197333 186.154667a38.4 38.4 0 0 1-54.314667-54.272l213.333334-213.333333z m-213.333334 469.333333a38.4 38.4 0 0 1 54.314667 0l186.197333 186.154667 186.154667-186.154667a38.4 38.4 0 1 1 54.314667 54.272l-213.333334 213.333333a38.4 38.4 0 0 1-54.314666 0l-213.333334-213.333333a38.4 38.4 0 0 1 0-54.272z\n";const at={},st=["\nM42.752 132.266667a38.4 38.4 0 0 1 38.4 38.4v217.6h217.6a38.4 38.4 0 0 1 0 76.8h-256a38.4 38.4 0 0 1-38.4-38.4V170.666667a38.4 38.4 0 0 1 38.4-38.4z\n","\nM453.12 94.122667a422.4 422.4 0 1 1-339.498667 558.634666 38.4 38.4 0 0 1 72.405334-25.514666 345.6 345.6 0 1 0 80.981333-358.613334l-197.973333 186.026667A38.4 38.4 0 0 1 16.426667 398.677333l197.546666-185.6a422.4 422.4 0 0 1 239.189334-118.954666z\n"];at.left=st,at.right="\nM345.344 209.450667a345.6 345.6 0 0 1 411.904 58.88l0.256 0.256L884.608 388.266667h-159.189333a38.4 38.4 0 1 0 0 76.8h256a38.229333 38.229333 0 0 0 23.722666-8.234667 38.314667 38.314667 0 0 0 14.677334-30.165333V170.666667a38.4 38.4 0 0 0-76.8 0v167.082666l-132.437334-124.672A422.4 422.4 0 1 0 910.506667 652.8a38.4 38.4 0 1 0-72.405334-25.6A345.6 345.6 0 1 1 345.344 209.493333z\n";const At={};At.maximize="\nM640.085333 166.4a38.4 38.4 0 1 1 0-76.8h256a38.4 38.4 0 0 1 38.4 38.4v256a38.4 38.4 0 0 1-76.8 0V220.714667l-233.130666 233.088a38.4 38.4 0 1 1-54.314667-54.272L803.413333 166.4h-163.285333z m-186.197333 403.797333a38.4 38.4 0 0 1 0 54.272L220.757333 857.6h163.328a38.4 38.4 0 1 1 0 76.8h-256a38.4 38.4 0 0 1-38.4-38.4v-256a38.4 38.4 0 1 1 76.8 0v163.285333l233.088-233.088a38.4 38.4 0 0 1 54.314667 0z\n",At.minimize="\nM865.834667 97.834667a42.666667 42.666667 0 1 1 60.330666 60.330666L700.330667 384H853.333333a42.666667 42.666667 0 1 1 0 85.333333h-256a42.666667 42.666667 0 0 1-42.666666-42.666666V170.666667a42.666667 42.666667 0 1 1 85.333333 0v153.002666l225.834667-225.834666zM128 597.333333a42.666667 42.666667 0 0 1 42.666667-42.666666h256a42.666667 42.666667 0 0 1 42.666666 42.666666v256a42.666667 42.666667 0 1 1-85.333333 0v-153.002666l-225.834667 225.834666a42.666667 42.666667 0 0 1-60.330666-60.330666L323.669333 640H170.666667a42.666667 42.666667 0 0 1-42.666667-42.666667z\n",At.maximize2="\nM125.909333 125.866667A123.733333 123.733333 0 0 1 213.333333 89.6h128a38.4 38.4 0 1 1 0 76.8h-128a46.933333 46.933333 0 0 0-46.933333 46.933333v128a38.4 38.4 0 0 1-76.8 0V213.333333a123.733333 123.733333 0 0 1 36.266667-87.466666z m518.4 2.133333a38.4 38.4 0 0 1 38.4-38.4h128a123.733333 123.733333 0 0 1 123.733334 123.733333v128a38.4 38.4 0 0 1-76.8 0V213.333333a46.933333 46.933333 0 0 0-46.933334-46.933333h-128a38.4 38.4 0 0 1-38.4-38.4z m-516.266666 516.266667a38.4 38.4 0 0 1 38.4 38.4v128a46.933333 46.933333 0 0 0 46.933333 46.933333h128a38.4 38.4 0 1 1 0 76.8h-128a123.733333 123.733333 0 0 1-123.733333-123.733333v-128a38.4 38.4 0 0 1 38.4-38.4z m768 0a38.4 38.4 0 0 1 38.4 38.4v128a123.733333 123.733333 0 0 1-123.733334 123.733333h-128a38.4 38.4 0 1 1 0-76.8h128a46.933333 46.933333 0 0 0 46.933334-46.933333v-128a38.4 38.4 0 0 1 38.4-38.4z\n",At.minimize2="\nM341.418667 89.6a38.4 38.4 0 0 1 38.4 38.4v128a123.733333 123.733333 0 0 1-123.733334 123.733333h-128a38.4 38.4 0 0 1 0-76.8h128a46.933333 46.933333 0 0 0 46.933334-46.933333V128a38.4 38.4 0 0 1 38.4-38.4z m341.333333 0a38.4 38.4 0 0 1 38.4 38.4v128a46.933333 46.933333 0 0 0 46.933333 46.933333h128a38.4 38.4 0 0 1 0 76.8h-128a123.733333 123.733333 0 0 1-123.733333-123.733333V128a38.4 38.4 0 0 1 38.4-38.4zM89.685333 682.666667a38.4 38.4 0 0 1 38.4-38.4h128a123.733333 123.733333 0 0 1 123.733334 123.733333v128a38.4 38.4 0 1 1-76.8 0v-128a46.933333 46.933333 0 0 0-46.933334-46.933333h-128a38.4 38.4 0 0 1-38.4-38.4z m678.4 38.4a46.933333 46.933333 0 0 0-46.933333 46.933333v128a38.4 38.4 0 0 1-76.8 0v-128a123.733333 123.733333 0 0 1 123.733333-123.733333h128a38.4 38.4 0 0 1 0 76.8h-128z\n";const ct={},dt=["\nM1008.554667 228.864a38.4 38.4 0 0 1 0 54.272l-405.333334 405.333333a38.4 38.4 0 0 1-54.314666 0l-186.154667-186.154666-292.864 292.821333a38.4 38.4 0 1 1-54.314667-54.272l320-320a38.4 38.4 0 0 1 54.314667 0l186.197333 186.154667 378.154667-378.154667a38.4 38.4 0 0 1 54.314667 0z\n","\nM687.018667 256a38.4 38.4 0 0 1 38.4-38.4h256a38.4 38.4 0 0 1 38.4 38.4v256a38.4 38.4 0 0 1-76.8 0V294.4h-217.6a38.4 38.4 0 0 1-38.4-38.4z\n"],lt=["\nM15.573333 228.864a38.4 38.4 0 0 1 54.314667 0l292.864 292.821333 186.154667-186.154666a38.4 38.4 0 0 1 54.314666 0l405.333334 405.333333a38.4 38.4 0 0 1-54.314667 54.272l-378.154667-378.154667-186.197333 186.154667a38.4 38.4 0 0 1-54.314667 0l-320-320a38.4 38.4 0 0 1 0-54.272z\n","\nM981.418667 473.6a38.4 38.4 0 0 1 38.4 38.4v256a38.4 38.4 0 0 1-38.4 38.4h-256a38.4 38.4 0 1 1 0-76.8h217.6V512a38.4 38.4 0 0 1 38.4-38.4z\n"];ct.up=dt,ct.down=lt;const ut={},ht=["\nM586.0864 463.744l68.49536 20.0192-112.85504 386.20672-68.5056-20.0192z\n","\nM541.83936 887.92064c-1.68448 0-3.37408-0.23552-5.02272-0.72192l-68.49536-20.0192a17.95072 17.95072 0 0 1-12.1856-22.25152l112.58368-386.27328a17.93024 17.93024 0 0 1 22.2208-12.20096l68.50048 20.01408a17.94048 17.94048 0 0 1 12.18048 22.25664l-112.58368 386.27328a17.93536 17.93536 0 0 1-17.19808 12.92288z m-46.27456-50.16064l34.08896 9.9584 102.53824-351.81568-34.09408-9.96352-102.53312 351.8208z\n","\nM676.95104 499.93728c-20.13696 0-40.58624-2.82112-60.87168-8.75008-115.19488-33.664-181.5552-154.89024-147.93728-270.22848 16.2816-55.87456 53.3248-102.05184 104.29952-130.03264 50.95936-27.97568 109.76256-34.4064 165.57056-18.0992 115.18976 33.664 181.5552 154.88512 147.93728 270.22848-27.6992 95.03232-114.76992 156.88192-208.9984 156.88192z m-0.16384-400.03072c-30.13632 0-59.96032 7.58272-87.12192 22.49216-42.5728 23.3728-73.51808 61.94176-87.1168 108.61056-28.0832 96.34816 27.35104 197.60128 123.5712 225.72544 96.24576 28.12928 197.34016-27.39712 225.42336-123.73504 28.07808-96.34816-27.35616-197.60128-123.57632-225.72032a182.31296 182.31296 0 0 0-51.17952-7.3728z m191.95904 238.12096h0.0512-0.0512zM942.08 960H81.92c-9.89696 0-17.92-8.0384-17.92-17.9456a17.93536 17.93536 0 0 1 17.92-17.9456h860.16c9.89696 0 17.92 8.0384 17.92 17.9456a17.94048 17.94048 0 0 1-17.92 17.9456z\n","\nM698.93632 816.4864h-373.9136c-69.25312 0-125.3888 56.1408-125.3888 125.3888v0.1792h624.69632v-0.1792c0-69.248-56.1408-125.3888-125.39392-125.3888z\n","\nM824.33024 960H199.63392c-9.89696 0-17.92-8.0384-17.92-17.9456 0-80.47104 63.93344-143.5136 145.55136-143.5136h368.85504c81.94048 0 146.13504 63.03744 146.13504 143.5136a17.9456 17.9456 0 0 1-17.92512 17.9456z m-605.32224-35.8912h585.93792c-8.51456-51.51744-53.26336-89.6768-108.83072-89.6768H327.26528c-55.27552 0-99.78368 38.15936-108.25728 89.6768z\n"],pt=["\nM828.32 811.25333333H184.16c-40.32 0-72.96-32.64-72.96-72.96V273.65333333c0-40.32 32.64-72.96 72.96-72.96H828.8c40.32 0 72.96 32.64 72.96 72.96v464.64c-0.48 40.32-33.12 72.96-73.44 72.96zM184.16 248.69333333c-13.92 0-24.96 11.04-24.96 24.96v464.64c0 13.92 11.04 24.96 24.96 24.96H828.8c13.92 0 24.96-11.04 24.96-24.96V273.65333333c0-13.92-11.04-24.96-24.96-24.96H184.16z\n","\nM261.44 557.33333333l46.08-10.56c3.36 31.68 20.16 47.52 49.92 48.48 36.96 0.96 54.72-15.84 54.24-49.92-2.88-26.88-20.64-40.8-54.24-41.76h-33.6v-39.36h23.04c34.08 0 52.32-14.4 54.24-43.2-0.96-23.52-14.4-35.52-40.32-36.48-25.92 1.92-41.76 16.8-47.04 44.64L266.72 418.13333333c12.48-48.48 43.2-73.44 91.68-74.4 57.6 0.96 87.36 26.88 89.28 78.24 0 26.88-14.88 46.56-44.64 58.08 36 14.4 54.24 36.96 55.2 67.68-3.84 53.76-36.48 82.56-98.4 84.96-55.68-0.48-88.8-25.92-98.4-75.36zM604.16 627.41333333H502.88V348.05333333h104.16c90.72 0.96 136.8 47.52 137.76 140.64 2.4 95.04-44.16 141.6-140.64 138.72z m1.44-237.6h-56.64v199.68h55.2c62.88 0.96 94.08-32.64 93.12-99.84-0.96-65.76-31.68-98.88-91.68-99.84z\n"],mt=["\nM978.432 850.432c0 70.656-57.344 128-128 128H173.568c-70.656 0-128-57.344-128-128V173.568c0-70.656 57.344-128 128-128h677.376c70.656 0 128 57.344 128 128v676.864zM872.448 10.24H151.552C73.728 10.24 10.24 73.728 10.24 151.552v720.896C10.24 950.272 73.728 1013.76 151.552 1013.76h720.896c77.824 0 141.312-63.488 141.312-141.312V151.552C1013.76 73.728 950.272 10.24 872.448 10.24z\n","\nM850.432 79.872H173.568c-51.2 0-93.184 41.984-93.184 93.184v677.376c0 51.2 41.984 93.184 93.184 93.184h677.376c51.2 0 93.184-41.984 93.184-93.184V173.568c0-51.712-41.984-93.696-93.696-93.696zM504.32 826.368c-37.376 0-68.096-29.696-68.096-66.048 0-36.352 30.208-66.048 68.096-66.048s68.096 29.696 68.096 66.048c0 36.352-30.72 66.048-68.096 66.048z m195.584-412.672c-9.216 16.896-20.48 31.744-33.28 44.032-12.8 12.288-35.84 33.28-69.12 62.464-9.216 8.192-16.384 15.36-22.016 22.016-5.632 6.144-9.728 11.776-12.288 17.408-2.56 5.12-4.608 10.24-6.144 15.36-1.536 5.12-3.584 14.336-6.656 27.648-5.12 27.648-21.504 41.472-48.64 41.472-13.824 0-26.112-4.608-35.328-13.824-9.728-9.216-14.336-22.528-14.336-40.448 0-22.528 3.584-41.984 10.752-58.368 7.168-16.384 16.384-30.72 28.16-43.008 11.776-12.288 27.136-27.136 47.104-44.032 17.408-14.848 29.696-26.112 37.376-33.792s14.336-15.872 19.456-25.6c5.12-9.216 7.68-19.456 7.68-30.208 0-21.504-8.192-39.424-24.064-54.272-16.384-14.848-36.864-22.016-62.464-22.016-29.696 0-51.712 7.168-66.048 22.016-14.336 14.848-26.112 36.864-35.84 65.536-9.216 30.208-26.624 45.056-52.224 45.056-15.36 0-28.16-5.12-38.4-15.872-11.264-10.24-16.384-21.504-16.384-33.792 0-25.6 8.192-51.2 24.576-77.312 16.384-26.112 40.448-47.616 72.704-64.512 31.744-16.896 68.608-25.6 111.104-25.6 39.424 0 74.24 7.168 103.936 21.504 30.208 14.336 53.248 33.792 69.632 58.368 16.384 24.576 24.576 51.2 24.576 79.872 0 22.528-4.608 42.496-13.824 59.904z\n"],ft=["\nM0 566.62016m56.89344 0l56.87296 0q56.89344 0 56.89344 56.89344l0 113.7664q0 56.89344-56.89344 56.89344l-56.87296 0q-56.89344 0-56.89344-56.89344l0-113.7664q0-56.89344 56.89344-56.89344Z\n","\nM284.44672 452.83328m56.89344 0l56.87296 0q56.89344 0 56.89344 56.89344l0 227.55328q0 56.89344-56.89344 56.89344l-56.87296 0q-56.89344 0-56.89344-56.89344l0-227.55328q0-56.89344 56.89344-56.89344Z\n","\nM568.89344 339.06688m56.89344 0l56.87296 0q56.89344 0 56.89344 56.89344l0 341.31968q0 56.89344-56.89344 56.89344l-56.87296 0q-56.89344 0-56.89344-56.89344l0-341.31968q0-56.89344 56.89344-56.89344Z\n","\nM853.34016 225.28m56.89344 0l56.87296 0q56.89344 0 56.89344 56.89344l0 455.10656q0 56.89344-56.89344 56.89344l-56.87296 0q-56.89344 0-56.89344-56.89344l0-455.10656q0-56.89344 56.89344-56.89344Z\n"],gt=["M112.88 689.631h155.428v244.244h-155.428v-244.244z","M334.921 556.409h155.428v377.467h-155.428v-377.467z","M579.164 400.98h133.223v532.895h-133.223v-532.895z","M801.202 245.553h155.428v688.323h-155.428v-688.323z","M1023.242 90.125h155.427v843.75h-155.428v-843.75z"];ut.icon_PTZ_control=ht,ut.icon_three_dimensional=pt,ut.icon_screenshot="\nM437.76 430.08L170.496 79.36C156.672 61.44 159.232 35.84 176.64 20.48c16.896-14.848 42.496-12.8 56.832 4.096L512 344.576l278.528-320c14.848-16.896 39.936-18.432 56.832-4.096 17.408 14.848 19.968 40.448 6.144 58.88L586.24 430.08l165.888 190.976c92.672-33.792 196.096 4.096 245.248 89.6 49.152 85.504 29.184 194.048-47.104 256.512-76.288 62.464-186.368 61.44-260.608-3.072-74.752-64.512-92.16-173.056-40.96-257.536-1.536-1.536-3.072-3.584-4.096-5.12L512 527.872 437.76 430.08zM383.488 492.544l77.824 101.888L379.904 701.44c-1.536 1.536-2.56 3.584-4.096 5.12 50.688 84.48 33.792 193.024-40.96 257.536-74.752 64.512-184.832 65.536-260.608 3.072-76.288-62.464-95.744-171.008-47.104-256.512 49.152-85.504 152.576-123.392 245.248-89.6l111.104-128.512zM215.04 931.84c44.032-3.584 82.432-30.72 100.352-70.656 17.92-39.936 13.312-86.528-12.8-122.368-26.112-35.328-69.12-53.76-112.64-48.64-65.536 8.192-112.64 67.584-105.472 133.12 6.656 66.048 64.512 114.176 130.56 108.544z m593.92 0c43.52 5.632 86.528-13.312 112.64-48.64 26.112-35.328 30.72-81.92 12.8-121.856-17.92-39.936-56.32-67.072-100.352-70.656-66.048-5.632-124.416 42.496-131.072 108.032-6.656 65.536 40.448 124.928 105.984 133.12z m0 0\n",ut.icon_information="\nM512 1024C228.693 1024 0 795.307 0 512S228.693 0 512 0s512 228.693 512 512-228.693 512-512 512z m61.44-723.627c0-34.133-27.307-61.44-61.44-61.44s-61.44 27.307-61.44 61.44v269.654c0 34.133 27.307 61.44 61.44 61.44s61.44-27.307 61.44-61.44V300.373zM512 692.907c-34.133 0-61.44 27.306-61.44 61.44s27.307 61.44 61.44 61.44 61.44-27.307 61.44-61.44-27.307-61.44-61.44-61.44z\n",ut.icon_information2="\nM566.912 224.128a67.392 67.392 0 0 0-53.376 21.632 49.92 49.92 0 0 0-21.632 47.04 64 64 0 0 0 21.632 48.256 99.648 99.648 0 0 0 53.376 21.632 67.392 67.392 0 0 0 53.376-21.632 50.816 50.816 0 0 0 21.632-48.256 59.968 59.968 0 0 0-21.632-47.04 65.728 65.728 0 0 0-53.376-21.632z m21.632 518.4c-16.512 0-26.688 0-32-5.056a42.432 42.432 0 0 1-10.176-26.688 60.032 60.032 0 0 1 5.056-26.688 253.888 253.888 0 0 1 5.056-26.688l32-105.472a69.632 69.632 0 0 0 5.056-32v-27.008a65.024 65.024 0 0 0-26.688-53.376 87.872 87.872 0 0 0-68.608-21.632 242.56 242.56 0 0 0-53.376 10.176 218.176 218.176 0 0 0-58.432 21.632l-10.176 32c5.056 0 10.176-5.056 21.632-5.056s16.512-5.056 26.688-5.056a178.112 178.112 0 0 1 32 5.056 42.432 42.432 0 0 1 10.176 26.688 60.032 60.032 0 0 1-5.056 26.688 253.888 253.888 0 0 1-5.056 26.688l-32 105.472a69.632 69.632 0 0 0-5.056 32v26.688a72.704 72.704 0 0 0 26.688 53.376 87.872 87.872 0 0 0 68.608 21.632 173.248 173.248 0 0 0 53.376-5.056 521.408 521.408 0 0 0 58.432-21.632l10.176-32c-5.056 0-10.176 5.056-21.632 5.056z\n",ut.icon_help=mt,ut.icon_help2="\nM506.163573 81.905428C259.515057 85.213777 62.256414 287.808962 65.561693 534.460548c3.310396 246.496044 205.903533 443.814038 452.557166 440.504666 246.524696-3.304256 443.842691-205.903533 440.504666-452.551026C955.375551 275.888468 752.747621 78.601172 506.163573 81.905428L506.163573 81.905428 506.163573 81.905428zM512.3249 847.413166l-2.40477 0c-36.709063-1.099031-62.622246-28.570709-61.593823-65.297169 1.026376-36.043914 27.552519-62.291718 63.08785-62.291718l2.171456 0.058328c37.735439 1.134847 63.385633 28.337395 62.267159 66.101487C574.825372 822.119083 548.683992 847.413166 512.3249 847.413166L512.3249 847.413166 512.3249 847.413166zM675.538145 514.910283c-9.714246 13.525038-30.92636 30.356378-57.719586 50.910507l-29.515221 20.10285c-16.188704 12.424984-25.942859 24.076348-29.582759 35.538401-2.960425 9.126868-4.303003 11.458983-4.565992 29.841655l-0.067538 4.725628L441.501878 656.029324l0.326435-9.416464c1.382487-38.648229 2.365884-61.308321 18.583241-80.109526 25.480324-29.457916 81.69258-65.159022 84.058464-66.647933 8.045233-6.01704 14.806217-12.782118 19.897166-20.034289 11.81714-16.051581 17.005302-28.740578 17.005302-41.10314 0-17.253966-5.188162-33.208333-15.428388-47.387263-9.885138-13.726629-28.634154-20.652366-55.754838-20.652366-26.891464 0-45.275159 8.449439-56.308447 25.699312-11.394515 17.769712-17.074887 36.348859-17.074887 55.413054l0 4.761444L320.706721 456.552154l0.194428-4.983501c2.987031-70.108754 28.372188-120.572076 75.452459-150.023852 29.519314-18.805298 66.290799-28.288277 109.171422-28.288277 56.148811 0 103.657848 13.46364 140.955312 39.97034 37.823444 26.867928 57.000202 67.163679 57.000202 119.695103 0 29.4221-9.388834 57.032948-27.943422 82.08553L675.537122 514.910283 675.538145 514.910283zM675.538145 514.910283\n",ut.icon_help3="\nM150.308607 0h721.486305A150.308607 150.308607 0 0 1 1022.103519 150.321084v721.473828A150.308607 150.308607 0 0 1 871.794912 1022.103519H150.308607A150.308607 150.308607 0 0 1 0 871.794912V150.321084A150.308607 150.308607 0 0 1 150.308607 0zM517.789258 308.876889c8.658934 1.122916 17.467589 1.684375 25.951847 3.493517 38.41622 8.097475 54.710985 57.593138 29.345551 87.712253-15.396432 18.278585-34.236475 32.439809-53.201287 46.451311-48.659713 36.008188-73.887903 83.994151-73.613413 144.731455a46.538649 46.538649 0 0 0 5.389999 21.123307c8.983332 16.656594 24.08032 23.593723 42.708257 25.178282 33.338142 2.807291 59.614387-25.602495 57.393508-52.402768a85.890633 85.890633 0 0 1 3.393703-29.944439c5.414953-18.952335 19.052149-32.439809 34.086753-44.242909 20.586802-16.057705 42.421289-30.618189 62.384248-47.412028 20.661663-17.317867 34.510966-39.651428 39.302076-66.726192s2.345648-53.737791-5.502291-79.851837c-15.982844-53.276148-52.402768-85.404035-105.279657-99.577737-29.944439-8.010137-60.500244-8.384443-91.081002-4.890925-47.748903 5.46486-89.833317 23.481431-124.581343 57.231309-14.435715 14.073886-25.914417 30.293791-31.354323 50.044644-3.743055 13.724535-3.992592 27.636222 4.653865 39.925919 14.822497 20.998538 46.339019 26.949995 69.321376 13.974071 10.967151-6.238425 17.791988-16.132567 25.328005-25.565065 10.181109-12.776294 21.497612-24.142704 37.03129-30.518374s31.678721-7.72317 48.247977-8.733794z m41.423141 442.279364v-8.895994c0-22.720343-11.017058-38.678234-31.104786-48.185593-18.191247-8.733795-37.30578-8.297105-55.946194-1.921435-17.0309 5.814212-30.368652 17.018423-35.01004 34.935179-2.49537 9.619651-1.971342 20.112682-2.121064 30.21893-0.336875 22.208792 11.391364 37.156058 30.268837 46.912954 14.735159 7.635832 30.742957 8.733795 46.85057 6.126134 17.891802-2.957013 31.865874-12.239789 41.11122-28.122819 5.876596-10.093771 6.126133-21.210644 5.93898-31.104787z m0 0\n",ut.icon_wifi=ft,ut.icon_wifi_green=gt,ut.icon_wifi_guarantee="\nM511.168026 0.031999l-431.154526 135.323771 2.23993 510.768038 1.183963 10.047686c3.263898 15.231524 23.551264 95.197025 101.564826 170.938658 61.854067 60.254117 202.489672 133.43583 270.135558 168.538733l7.551764 3.935877 45.662573 24.383238 34.366926-17.567451c36.510859-17.631449 222.489047-109.11659 294.550795-179.226399 79.517515-77.373582 98.684916-156.699103 102.428799-178.394425l2.591919-513.391957-431.154526-135.387769zM726.745289 538.959158l-161.690947 0 0 161.690947-107.772632 0 0-161.690947-161.690947 0 0-107.772632 161.690947 0 0-161.690947 107.772632 0 0 161.690947 161.690947 0 0 107.772632z\n",ut.icon_wifi_guarantee2="\nM931.908267 215.466667c-127.266133-51.968-239.598933-114.688-332.612267-185.856a143.616 143.616 0 0 0-174.574933 0c-93.013333 71.150933-205.346133 133.888-332.629334 185.856a34.133333 34.133333 0 0 0-21.384533 31.5392v280.439466c0 242.722133 376.644267 496.520533 441.2928 496.520534 64.648533 0 441.2928-253.815467 441.2928-496.520534V247.005867a34.133333 34.133333 0 0 0-21.384533-31.5392zM651.6224 497.9712L496.810667 714.7008c-9.642667 13.5168-30.958933 6.690133-30.958934-9.915733v-134.724267a17.066667 17.066667 0 0 0-17.066666-17.066667h-62.532267a17.066667 17.066667 0 0 1-13.892267-26.9824l154.811734-216.7296c9.642667-13.5168 30.958933-6.690133 30.958933 9.915734v134.7072a17.066667 17.066667 0 0 0 17.066667 17.066666h62.549333c13.8752 0.017067 21.947733 15.701333 13.8752 26.999467z\n";const bt={};bt.search_line="\nM469.333333 85.333333c211.968 0 384 172.032 384 384s-172.032 384-384 384-384-172.032-384-384 172.032-384 384-384z m0 682.666667c164.992 0 298.666667-133.674667 298.666667-298.666667 0-165.034667-133.674667-298.666667-298.666667-298.666666-165.034667 0-298.666667 133.632-298.666666 298.666666 0 164.992 133.632 298.666667 298.666666 298.666667z m362.026667 3.029333l120.704 120.661334-60.373333 60.373333-120.661334-120.704 60.330667-60.330667z\n",bt.search_line2="\nM769.322667 708.992l182.741333 182.698667-60.373333 60.373333-182.698667-182.741333A382.293333 382.293333 0 0 1 469.333333 853.333333c-211.968 0-384-172.032-384-384s172.032-384 384-384 384 172.032 384 384a382.293333 382.293333 0 0 1-84.010666 239.658667z m-85.589334-31.658667A297.685333 297.685333 0 0 0 768 469.333333c0-165.034667-133.674667-298.666667-298.666667-298.666666-165.034667 0-298.666667 133.632-298.666666 298.666666 0 164.992 133.632 298.666667 298.666666 298.666667a297.685333 297.685333 0 0 0 208-84.266667l6.4-6.4z\n",bt.search_fill="\nM469.333333 85.333333c211.968 0 384 172.032 384 384s-172.032 384-384 384-384-172.032-384-384 172.032-384 384-384z m362.026667 685.696l120.704 120.661334-60.373333 60.373333-120.661334-120.704 60.330667-60.330667z\n",bt.search_fill2="\nM769.322667 708.992l182.741333 182.698667-60.373333 60.373333-182.698667-182.741333A382.293333 382.293333 0 0 1 469.333333 853.333333c-211.968 0-384-172.032-384-384s172.032-384 384-384 384 172.032 384 384a382.293333 382.293333 0 0 1-84.010666 239.658667z\n",bt.zoom_in_line="\nM769.322667 708.992l182.741333 182.698667-60.373333 60.373333-182.698667-182.741333A382.293333 382.293333 0 0 1 469.333333 853.333333c-211.968 0-384-172.032-384-384s172.032-384 384-384 384 172.032 384 384a382.293333 382.293333 0 0 1-84.010666 239.658667z m-85.589334-31.658667A297.685333 297.685333 0 0 0 768 469.333333c0-165.034667-133.674667-298.666667-298.666667-298.666666-165.034667 0-298.666667 133.632-298.666666 298.666666 0 164.992 133.632 298.666667 298.666666 298.666667a297.685333 297.685333 0 0 0 208-84.266667l6.4-6.4zM426.666667 426.666667V298.666667h85.333333v128h128v85.333333h-128v128h-85.333333v-128H298.666667v-85.333333h128z\n",bt.zoom_in_fill="\nM769.322667 708.992l182.741333 182.698667-60.373333 60.373333-182.698667-182.741333A382.293333 382.293333 0 0 1 469.333333 853.333333c-211.968 0-384-172.032-384-384s172.032-384 384-384 384 172.032 384 384a382.293333 382.293333 0 0 1-84.010666 239.658667zM426.666667 426.666667H298.666667v85.333333h128v128h85.333333v-128h128v-85.333333h-128V298.666667h-85.333333v128z\n",bt.zoom_out_line="\nM769.322667 708.992l182.741333 182.698667-60.373333 60.373333-182.698667-182.741333A382.293333 382.293333 0 0 1 469.333333 853.333333c-211.968 0-384-172.032-384-384s172.032-384 384-384 384 172.032 384 384a382.293333 382.293333 0 0 1-84.010666 239.658667z m-85.589334-31.658667A297.685333 297.685333 0 0 0 768 469.333333c0-165.034667-133.674667-298.666667-298.666667-298.666666-165.034667 0-298.666667 133.632-298.666666 298.666666 0 164.992 133.632 298.666667 298.666666 298.666667a297.685333 297.685333 0 0 0 208-84.266667l6.4-6.4zM298.666667 426.666667h341.333333v85.333333H298.666667v-85.333333z\n",bt.zoom_out_fill="\nM769.322667 708.992l182.741333 182.698667-60.373333 60.373333-182.698667-182.741333A382.293333 382.293333 0 0 1 469.333333 853.333333c-211.968 0-384-172.032-384-384s172.032-384 384-384 384 172.032 384 384a382.293333 382.293333 0 0 1-84.010666 239.658667zM298.666667 426.666667v85.333333h341.333333v-85.333333H298.666667z\n";var vt={icon_close:"\nM512 85.333333C276.352 85.333333 85.333333 276.352 85.333333 512s191.018667 426.666667 426.666667 426.666667 426.666667-191.018667 426.666667-426.666667S747.648 85.333333 512 85.333333zM350.72 350.72a32 32 0 0 1 45.226667 0l126.72 126.72 126.72-126.72a32 32 0 1 1 45.226666 45.226667l-126.72 126.72 126.72 126.72a32 32 0 1 1-45.226666 45.226666l-126.72-126.72-126.72 126.72a32 32 0 0 1-45.226667-45.226666l126.72-126.72-126.72-126.72a32 32 0 0 1 0-45.226667z\n"};const yt={};yt.arrow=Ge,yt.ArrowUp=e=>Ne({...e,path:Ge.up}),yt.ArrowUpSquare=e=>Ne({...e,path:Ge.up_square}),yt.ArrowUpCircular=e=>Ne({...e,path:Ge.up_circular}),yt.ArrowRight=e=>Ne({...e,path:Ge.right}),yt.ArrowRightSquare=e=>Ne({...e,path:Ge.right_square}),yt.ArrowRightCircular=e=>Ne({...e,path:Ge.right_circular}),yt.ArrowDown=e=>Ne({...e,path:Ge.down}),yt.ArrowDownSquare=e=>Ne({...e,path:Ge.down_square}),yt.ArrowDownCircular=e=>Ne({...e,path:Ge.down_circular}),yt.ArrowLeft=e=>Ne({...e,path:Ge.left}),yt.ArrowLeftSquare=e=>Ne({...e,path:Ge.left_square}),yt.ArrowLeftCircular=e=>Ne({...e,path:Ge.left_circular});yt.CameraVideo=e=>Ne({...e,path:$e.video_camera});yt.Video=e=>Ne({...e,path:qe.video}),yt.Video2=e=>Ne({...e,path:qe.video2}),yt.Video3=e=>Ne({...e,path:qe.video3}),yt.Video3Disabled=e=>Ne({...e,path:qe.video3_disabled}),yt.VideoPlay=e=>Ne({...e,path:qe.play}),yt.VideoPlay2=e=>Ne({...e,path:qe.play2}),yt.VideoPause=e=>Ne({...e,path:qe.pause}),yt.VideoFastForward=e=>Ne({...e,path:qe.fast_forward}),yt.VideoBackward=e=>Ne({...e,path:qe.backward}),yt.VideoPrev=e=>Ne({...e,path:qe.prev}),yt.VideoNext=e=>Ne({...e,path:qe.next}),yt.Microphone=e=>Ne({...e,path:qe.microphone}),yt.Microphone0=e=>Ne({...e,path:qe.microphone0}),yt.Microphone1=e=>Ne({...e,path:qe.microphone1}),yt.Microphone2=e=>Ne({...e,path:qe.microphone2}),yt.Microphone3=e=>Ne({...e,path:qe.microphone3}),yt.Microphone4=e=>Ne({...e,path:qe.microphone4}),yt.MicrophoneDisabled=e=>Ne({...e,path:qe.microphone_disabled}),yt.MicrophoneDisabled1=e=>Ne({...e,path:qe.microphone_disabled1}),yt.MicrophoneDisabled2=e=>Ne({...e,path:qe.microphone_disabled2}),yt.MicrophoneDisabled3=e=>Ne({...e,path:qe.microphone_disabled3}),yt.MicrophoneDisabled4=e=>Ne({...e,path:qe.microphone_disabled4}),yt.MicrophoneDisabled5=e=>Ne({...e,path:qe.microphone_disabled5}),yt.MicrophoneDisabled6=e=>Ne({...e,path:qe.microphone_disabled6}),yt.MicrophoneDisabled7=e=>Ne({...e,path:qe.microphone_disabled7}),yt.MicrophoneDisabled8=e=>Ne({...e,path:qe.microphone_disabled8}),yt.MicrophoneDisabled9=e=>Ne({...e,path:qe.microphone_disabled9});yt.VolumeOff=e=>Ne({...e,path:it.off}),yt.VolumeUp=e=>Ne({...e,path:it.up}),yt.VolumeDown=e=>Ne({...e,path:it.down});yt.HeartFollow=e=>Ne({...e,path:ot.follow}),yt.HeartUnFollow=e=>Ne({...e,path:ot.un_follow});yt.TrendingUp=e=>Ne({...e,path:ct.up}),yt.TrendingDown=e=>Ne({...e,path:ct.down});yt.More=e=>Ne({...e,path:rt.__more}),yt.MoreHorizontal=e=>Ne({...e,path:rt.more_horizontal}),yt.MoreVertical=e=>Ne({...e,path:rt.more_vertical});yt.Move=e=>Ne({...e,path:nt.move}),yt.MoveUp=e=>Ne({...e,path:nt.up}),yt.MoveDoubleUp=e=>Ne({...e,path:nt.double_up}),yt.MoveRight=e=>Ne({...e,path:nt.right}),yt.MoveDoubleRight=e=>Ne({...e,path:nt.double_right}),yt.MoveDown=e=>Ne({...e,path:nt.down}),yt.MoveDoubleDown=e=>Ne({...e,path:nt.double_down}),yt.MoveLeft=e=>Ne({...e,path:nt.left}),yt.MoveDoubleLeft=e=>Ne({...e,path:nt.double_left});yt.RotationLeft=e=>Ne({...e,path:at.left}),yt.RotationRight=e=>Ne({...e,path:at.right});yt.ScreenMaximize=e=>Ne({...e,path:At.maximize}),yt.ScreenMaximize2=e=>Ne({...e,path:At.maximize2}),yt.ScreenMinimize=e=>Ne({...e,path:At.minimize}),yt.ScreenMinimize2=e=>Ne({...e,path:At.minimize2});yt.PTZControl=e=>Ne({...e,path:ut.icon_PTZ_control}),yt.Screenshot=e=>Ne({...e,path:ut.icon_screenshot}),yt.ThreeDimensional=e=>Ne({...e,path:ut.icon_three_dimensional}),yt.Information=e=>Ne({...e,path:ut.icon_information}),yt.Information2=e=>Ne({...e,path:ut.icon_information2}),yt.Help=e=>Ne({...e,path:ut.icon_help}),yt.Help2=e=>Ne({...e,path:ut.icon_help2}),yt.Help3=e=>Ne({...e,path:ut.icon_help3}),yt.Wifi=e=>Ne({...e,path:ut.icon_wifi}),yt.WifiGreen=e=>Ne({...e,path:ut.icon_wifi_green}),yt.Guarantee=e=>Ne({...e,path:ut.icon_wifi_guarantee}),yt.Guarantee2=e=>Ne({...e,path:ut.icon_wifi_guarantee2});yt.SearchLine=e=>Ne({...e,path:bt.search_line}),yt.SearchLine2=e=>Ne({...e,path:bt.search_line2}),yt.SearchFill=e=>Ne({...e,path:bt.search_fill}),yt.SearchFill2=e=>Ne({...e,path:bt.search_fill2}),yt.ZoomInLine=e=>Ne({...e,path:bt.zoom_in_line}),yt.ZoomInFill=e=>Ne({...e,path:bt.zoom_in_fill}),yt.ZoomOutLine=e=>Ne({...e,path:bt.zoom_out_line}),yt.ZoomOutFill=e=>Ne({...e,path:bt.zoom_out_fill});yt.Close=e=>Ne({...e,path:vt.icon_close}),window.__Icons=yt;const wt={color:"white",style:"width: 1.2rem; height: 1.2rem;"},St={play:{label:"播放",icon:yt.VideoPlay(wt),withTips:!0},pause:{label:"暂停",icon:yt.VideoPause(wt),withTips:!0},audio:{icon:yt.VolumeUp({...wt,style:"width: 19px; height: 19px;"})},mute:{icon:yt.VolumeOff({...wt,style:"width: 19px; height: 19px;"})},screenshot:{label:"截图",icon:yt.Screenshot(wt),withTips:!0},fullscreen:{label:"全屏",icon:yt.ScreenMaximize(wt),withTips:!0},fullscreenExit:{label:"退出全屏",icon:yt.ScreenMinimize(wt),withTips:!0},record:{label:"录制",icon:yt.Video3(wt),withTips:!0},recordStop:{label:"停止录制",icon:yt.Video3Disabled({...wt,style:"color: red;"+wt.style}),withTips:!0},loading:"加载"};var Ct=Object.keys(St).reduce(((e,t)=>("loading"===t?(e[t]=`<i class="jessibuca-icon jessibuca-icon-${t}">x</i>`,St[t]&&(e[t]+=`<span class="icon-title-tips"><span class="icon-title">${St[t]}</span></span>`)):(e[t]=`<div class="jessibuca-icon jessibuca-icon-${t}">${St[t].icon}</div>`,St[t].withTips&&(e[t]+=`<span class="icon-title-tips"><span class="icon-title">${St[t].label}</span></span>`)),e)),{}),Et=(e,t)=>{const{events:{proxy:i}}=e,o=document.createElement("object");o.setAttribute("aria-hidden","true"),o.setAttribute("tabindex",-1),o.type="text/html",o.data="about:blank",ue(o,{display:"block",position:"absolute",top:"0",left:"0",height:"100%",width:"100%",overflow:"hidden",pointerEvents:"none",zIndex:"-1"});let r=e.width,n=e.height;i(o,"load",(()=>{i(o.contentDocument.defaultView,"resize",(()=>{e.width===r&&e.height===n||(r=e.width,n=e.height,e.emit(R.resize))}))})),e.$container.appendChild(o),e.on(R.destroy,(()=>{e.$container.removeChild(o)})),e.on(R.volumechange,(()=>{!function(e){if(0===e)ue(t.$volumeOn,"display","none"),ue(t.$volumeOff,"display","flex"),ue(t.$volumeHandle,"top","48px");else if(t.$volumeHandle&&t.$volumePanel){const i=he(t.$volumePanel,"height")||60,o=he(t.$volumeHandle,"height"),r=i-(i-o)*e-o;ue(t.$volumeHandle,"top",`${r}px`),ue(t.$volumeOn,"display","flex"),ue(t.$volumeOff,"display","none")}t.$volumePanelText&&(t.$volumePanelText.innerHTML=parseInt(100*e))}(e.volume)})),e.on(R.loading,(e=>{ue(t.$loading,"display",e?"flex":"none"),ue(t.$poster,"display","none"),e&&ue(t.$playBig,"display","none")}));try{const i=()=>{ue(t.$fullscreenExit,"display",e.fullscreen?"flex":"none"),ue(t.$fullscreen,"display",e.fullscreen?"none":"flex")};ae.on("change",i),e.events.destroys.push((()=>{ae.off("change",i)}))}catch(e){}e.on(R.recording,(i=>{ue(t.$record,"display",e.recording?"none":"flex"),ue(t.$recordStop,"display",e.recording?"flex":"none")})),e.on(R.recordingTimestamp,(e=>{console.log(e)})),e.on(R.playing,(i=>{const o=e.width,r=Ce(t,o);i?(r("$screenshot",500,"flex"),r("$record",300,"flex")):(ue(t.$screenshot,"display","none"),ue(t.$record,"display","none")),ue(t.$play,"display",i?"none":"flex"),ue(t.$playBig,"display",i?"none":"block"),ue(t.$pause,"display",i?"flex":"none"),ue(t.$fullscreen,"display",i?"flex":"none"),i||t.$speed&&(t.$speed.innerHTML=fe(""))})),e.on(R.kBps,(e=>{const i=fe(e);t.$speed&&(t.$speed.innerHTML=i)})),t.on("movement",(()=>{console.log("control: movement")}))};function Rt(e,t){void 0===t&&(t={});var i=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===i&&o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}Rt('@keyframes rotation{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}.jessibuca-container .jessibuca-icon{cursor:pointer;width:16px;height:16px}.jessibuca-container .jessibuca-poster{position:absolute;z-index:10;left:0;top:0;right:0;bottom:0;height:100%;width:100%;background-position:50%;background-repeat:no-repeat;background-size:contain;pointer-events:none}.jessibuca-container .jessibuca-play-big{position:absolute;display:none;height:100%;width:100%;background:rgba(0,0,0,.4);background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAACgklEQVRoQ+3ZPYsTQRjA8eeZZCFlWttAwCIkZOaZJt8hlvkeHrlccuAFT6wEG0FQOeQQLCIWih6chQgKgkkKIyqKCVYip54IWmiQkTmyYhFvd3Zn3yDb7szu/7cv7GaDkPEFM94PK0DSZ9DzDAyHw7uI2HRDlVJX5/N5r9FoHCYdr/fvCRiNRmpJ6AEidoUQ15NG+AH8BgD2n9AHANAmohdJQfwAfgGA4xF4bjabnW21Whob62ILoKNfAsAGEd2PU2ATcNSNiDf0/cE5/xAHxDpgEf0NADaJ6HLUiKgAbvcjpdSGlPJZVJCoAUfdSqkLxWLxTLlc/mkbEgtgET1TSnWklLdtIuIEuN23crlcp16vv7cBSQKgu38AwBYRXQyLSArg3hsjRDxNRE+CQhIF/BN9qVAobFYqle+mkLQAdLd+8K0T0U0TRJoAbvc9fVkJId75gaQRoLv1C2STiPTb7rFLWgE6+g0RncwyYEJEtawCvjDGmpzzp5kD6NfxfD7frtVqB17xen2a7oG3ALBm+oMoFQBEPD+dTvtBfpImDXjIGFvjnD/3c7ksG5MU4HDxWeZa0HB3XhKAXcdxOn5vUi9gnIDXSqm2lHLPK8pkfVyAbSLqm4T5HRs1YB8RO0KIid8g03FRAT4rpbpSyh3TINPxUQB2GGM9zvkn05gg420CJovLZT9ISNA5tgB9ItoOGhFmnh/AcZ/X9xhj65zzV2Eiwsz1A1j2B8dHAOgS0W6YnduY6wkYj8d3lFKn/j66Ea84jtOrVqtfbQSE3YYnYDAY5Eql0hYAnNDv6kKIx2F3anO+J8DmzqLY1goQxVE12ebqDJgcrSjGrs5AFEfVZJt/AF0m+jHzUTtnAAAAAElFTkSuQmCC");background-repeat:no-repeat;background-position:50%;cursor:pointer;background-size:48px 48px}.jessibuca-container .jessibuca-play-big:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAACEElEQVRoQ+2ZXStEQRjH/3/yIXwDdz7J+i7kvdisXCk3SiFJW27kglBcSFFKbqwQSa4krykuKB09Naf2Yndn5jgzc06d53Znd36/mWfeniVyHsw5PwqB0DOonYEoijYBlOpAFwCMkHwLDS/9mwhEDUCfAAyTXA4tYSLwC6CtCegegH6S56FETAR+AHRoACcBTJAUWa+RloBAXwAYIrnt0yBNgZi7qtbHgw8RFwLC/QFglOScawlXAjH3gUqrE1cirgVi7mkAYyS/0xbxJSDcdwAGSa6nKeFTIOZeUyL3aYiEEBDuLwDjJGf+KxFKIOY+BdBL8iipSGiBmHtWbbuftiJZERBuOfgGSK7aSGRJIObeUml1ayKSRQHhlgtkiaTcdltGVgUE+ppkV54FaiS78yrwqlLoOI8Cch2XV548W7WRpTVwA6DP9kGUFYEpAOUkT9LQAvtq1M+0udKkQSgBqSlJWWYxKXj8vRACK+o6bbRIdYI+Ba7U7rKjg7L53JdAhWTZBsy0rWuBXZUuNVMg23auBF7UIl2yBbJt70JAoKV6/WwLk6R9mgKSJlJ1kLTxFmkJyCla8UZd15GJQKvyumyJ8gy8DAEvfZoINPqD41EtUjmUgoaJwAaAnjrKebVI34OSq85NBNqlCAWgE0CV5GEWwI3vQlmCbcSinYFCwPEIFDPgeIC1P1/MgHaIHDf4Aydx2TF7wnKeAAAAAElFTkSuQmCC")}.jessibuca-container .jessibuca-loading{display:none;flex-direction:column;justify-content:center;align-items:center;position:absolute;z-index:20;left:0;top:0;right:0;bottom:0;width:100%;height:100%;pointer-events:none}.jessibuca-container .jessibuca-loading-text{line-height:20px;font-size:13px;color:#fff;margin-top:10px}.jessibuca-container .jessibuca-controls{display:flex;flex-direction:column;justify-content:flex-end;position:absolute;z-index:40;left:0;right:0;bottom:0;height:38px;padding-left:13px;padding-right:13px;font-size:14px;color:#fff;opacity:0;visibility:hidden;transition:all .2s ease-in-out;-webkit-user-select:none;user-select:none}.jessibuca-container .jessibuca-controls .jessibuca-controls-item{position:relative;display:flex;justify-content:center;padding:0 8px}.jessibuca-container .jessibuca-controls .jessibuca-controls-item:hover .icon-title-tips{visibility:visible;opacity:1}.jessibuca-container .jessibuca-controls .jessibuca-fullscreen,.jessibuca-container .jessibuca-controls .jessibuca-fullscreen-exit,.jessibuca-container .jessibuca-controls .jessibuca-icon-audio,.jessibuca-container .jessibuca-controls .jessibuca-microphone-close,.jessibuca-container .jessibuca-controls .jessibuca-pause,.jessibuca-container .jessibuca-controls .jessibuca-play,.jessibuca-container .jessibuca-controls .jessibuca-record,.jessibuca-container .jessibuca-controls .jessibuca-record-stop,.jessibuca-container .jessibuca-controls .jessibuca-screenshot{display:none}.jessibuca-container .jessibuca-controls .jessibuca-icon-audio,.jessibuca-container .jessibuca-controls .jessibuca-icon-mute{z-index:1}.jessibuca-container .jessibuca-controls .jessibuca-controls-bottom{position:relative;display:flex;justify-content:space-between;height:100%}.jessibuca-container .jessibuca-controls .jessibuca-controls-bottom .jessibuca-controls-left,.jessibuca-container .jessibuca-controls .jessibuca-controls-bottom .jessibuca-controls-right{display:flex;align-items:center}.jessibuca-container .jessibuca-controls .jessibuca-controls-bottom .jessibuca-controls-right.jessibuca-controls-popover{position:absolute;right:0;background:rgba(0,0,0,.6);bottom:100%;display:flex;flex-direction:column;width:2rem}.jessibuca-container .jessibuca-controls .jessibuca-controls-bottom .jessibuca-controls-right.jessibuca-controls-popover .jessibuca-controls-item{padding-top:.4rem;padding-bottom:.4rem}.jessibuca-container.jessibuca-controls-show:hover .jessibuca-controls{opacity:1;background-color:rgba(22,22,22,.8);visibility:visible}.jessibuca-container.jessibuca-hide-cursor *{cursor:none!important}.jessibuca-container.jessibuca-fullscreen-web{position:fixed;z-index:9999;left:0;top:0;right:0;bottom:0;width:100%!important;height:100%!important;background:#000}.jessibuca-container .jessibuca-icon-loading{width:50px;height:50px;background:url("data:image/png;base64,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") no-repeat 50%;background-size:100% 100%;animation:rotation 1s linear infinite}.jessibuca-container .jessibuca-icon-audio,.jessibuca-container .jessibuca-icon-audio:hover,.jessibuca-container .jessibuca-icon-fullscreen,.jessibuca-container .jessibuca-icon-fullscreen:hover,.jessibuca-container .jessibuca-icon-fullscreenExit,.jessibuca-container .jessibuca-icon-fullscreenExit:hover,.jessibuca-container .jessibuca-icon-mute,.jessibuca-container .jessibuca-icon-mute:hover,.jessibuca-container .jessibuca-icon-pause,.jessibuca-container .jessibuca-icon-pause:hover,.jessibuca-container .jessibuca-icon-play,.jessibuca-container .jessibuca-icon-play:hover,.jessibuca-container .jessibuca-icon-record,.jessibuca-container .jessibuca-icon-record:hover,.jessibuca-container .jessibuca-icon-recordStop,.jessibuca-container .jessibuca-icon-recordStop:hover,.jessibuca-container .jessibuca-icon-screenshot,.jessibuca-container .jessibuca-icon-screenshot:hover{background-size:100% 100%}.jessibuca-container .jessibuca-controls-minimize{display:flex;justify-content:center;align-items:center;width:2rem;height:100%}.jessibuca-container .jessibuca-icon-text{font-size:14px;width:30px}.jessibuca-container .jessibuca-speed{font-size:14px;color:#fff}.jessibuca-container .jessibuca-quality-menu-list{position:absolute;left:50%;bottom:100%;visibility:hidden;opacity:0;transform:translateX(-50%);transition:visibility .3s,opacity .3s;background-color:rgba(0,0,0,.5);border-radius:4px}.jessibuca-container .jessibuca-quality-menu-list.jessibuca-quality-menu-shown{visibility:visible;opacity:1}.jessibuca-container .icon-title-tips{pointer-events:none;position:absolute;left:50%;bottom:100%;visibility:hidden;opacity:0;transform:translateX(-50%);transition:visibility .3s ease 0s,opacity .3s ease 0s;background-color:rgba(0,0,0,.5);border-radius:4px}.jessibuca-container .icon-title{display:inline-block;padding:5px 10px;font-size:12px;white-space:nowrap;color:#fff}.jessibuca-container .jessibuca-quality-menu{padding:8px 0}.jessibuca-container .jessibuca-quality-menu-item{display:block;height:25px;margin:0;padding:0 10px;cursor:pointer;font-size:14px;text-align:center;width:50px;color:hsla(0,0%,100%,.5);transition:color .3s,background-color .3s}.jessibuca-container .jessibuca-quality-menu-item:hover{background-color:hsla(0,0%,100%,.2)}.jessibuca-container .jessibuca-quality-menu-item:focus{outline:none}.jessibuca-container .jessibuca-quality-menu-item.jessibuca-quality-menu-item-active{color:#2298fc}.jessibuca-container .jessibuca-volume-panel-wrap{position:absolute;left:50%;bottom:100%;visibility:hidden;opacity:0;transform:translateX(-50%) translateY(22%);transition:visibility .3s,opacity .3s;background-color:rgba(0,0,0,.5);border-radius:4px;height:120px;width:50px;overflow:hidden}.jessibuca-container .jessibuca-volume-panel-wrap.jessibuca-volume-panel-wrap-show{visibility:visible;opacity:1}.jessibuca-container .jessibuca-volume-panel{cursor:pointer;position:absolute;top:21px;height:60px;width:50px;overflow:hidden}.jessibuca-container .jessibuca-volume-panel-text{position:absolute;left:0;top:0;width:50px;height:20px;line-height:20px;text-align:center;color:#fff;font-size:12px}.jessibuca-container .jessibuca-volume-panel-handle{position:absolute;top:48px;left:50%;width:12px;height:12px;border-radius:12px;margin-left:-6px;background:#fff}.jessibuca-container .jessibuca-volume-panel-handle:before{bottom:-54px;background:#fff}.jessibuca-container .jessibuca-volume-panel-handle:after{bottom:6px;background:hsla(0,0%,100%,.2)}.jessibuca-container .jessibuca-volume-panel-handle:after,.jessibuca-container .jessibuca-volume-panel-handle:before{content:"";position:absolute;display:block;left:50%;width:3px;margin-left:-1px;height:60px}');class Tt extends ye{constructor(e){var t;super(),this.player=e,((e,t)=>{e.$container.classList.add("jessibuca-controls-show");const i=e._opt,o=i.operateBtns,r={...wt,width:"1.5rem",height:"1.5rem",style:"transform: rotate(-90deg);"+wt.style};e.$container.insertAdjacentHTML("beforeend",`\n            ${i.background?`<div class="jessibuca-poster" style="background-image: url(${i.background})"></div>`:""}\n            <div class="jessibuca-loading">\n                ${Ct.loading}\n                ${i.loadingText?`<div class="jessibuca-loading-text">${i.loadingText}</div>`:""}\n            </div>\n            ${i.hasControl&&o.play?'<div class="jessibuca-play-big"></div>':""}\n            ${i.hasControl?`\n                <div class="jessibuca-controls">\n                    <div class="jessibuca-controls-bottom">\n                        <div class="jessibuca-controls-left">\n                            ${i.showBandwidth?'<div class="jessibuca-controls-item jessibuca-speed"></div>':""}\n                        </div>\n                        <div class="jessibuca-controls-right \x3c!--jessibuca-controls-popover--\x3e">\n                             ${o.audio?`\n                                 <div class="jessibuca-controls-item jessibuca-volume">\n                                     ${Ct.audio}\n                                     ${Ct.mute}\n                                     <div class="jessibuca-volume-panel-wrap">\n                                          <div class="jessibuca-volume-panel">\n                                                 <div class="jessibuca-volume-panel-handle"></div>\n                                          </div>\n                                          <div class="jessibuca-volume-panel-text"></div>\n                                     </div>\n                                 </div>\n                             `:""}\n                             ${o.play?`<div class="jessibuca-controls-item jessibuca-play">${Ct.play}</div><div class="jessibuca-controls-item jessibuca-pause">${Ct.pause}</div>`:""}\n                             ${o.screenshot?`<div class="jessibuca-controls-item jessibuca-screenshot">${Ct.screenshot}</div>`:""}\n                             ${o.record?` <div class="jessibuca-controls-item jessibuca-record">${Ct.record}</div><div class="jessibuca-controls-item jessibuca-record-stop">${Ct.recordStop}</div>`:""}\n                             ${o.fullscreen?`<div class="jessibuca-controls-item jessibuca-fullscreen">${Ct.fullscreen}</div><div class="jessibuca-controls-item jessibuca-fullscreen-exit">${Ct.fullscreenExit}</div>`:""}\n                        </div>\n                        \x3c!--<div  class="jessibuca-controls-minimize">\n                          ${yt.More(r)}\n                        </div>--\x3e\n                    </div>\n                </div>\n            `:""}\n\n        `),Object.defineProperty(t,"$poster",{value:e.$container.querySelector(".jessibuca-poster")}),Object.defineProperty(t,"$loading",{value:e.$container.querySelector(".jessibuca-loading")}),Object.defineProperty(t,"$play",{value:e.$container.querySelector(".jessibuca-play")}),Object.defineProperty(t,"$playBig",{value:e.$container.querySelector(".jessibuca-play-big")}),Object.defineProperty(t,"$pause",{value:e.$container.querySelector(".jessibuca-pause")}),Object.defineProperty(t,"$controls",{value:e.$container.querySelector(".jessibuca-controls")}),Object.defineProperty(t,"$fullscreen",{value:e.$container.querySelector(".jessibuca-fullscreen")}),Object.defineProperty(t,"$volume",{value:e.$container.querySelector(".jessibuca-volume")}),Object.defineProperty(t,"$volumePanelWrap",{value:e.$container.querySelector(".jessibuca-volume-panel-wrap")}),Object.defineProperty(t,"$volumePanelText",{value:e.$container.querySelector(".jessibuca-volume-panel-text")}),Object.defineProperty(t,"$volumePanel",{value:e.$container.querySelector(".jessibuca-volume-panel")}),Object.defineProperty(t,"$volumeHandle",{value:e.$container.querySelector(".jessibuca-volume-panel-handle")}),Object.defineProperty(t,"$volumeOn",{value:e.$container.querySelector(".jessibuca-icon-audio")}),Object.defineProperty(t,"$volumeOff",{value:e.$container.querySelector(".jessibuca-icon-mute")}),Object.defineProperty(t,"$fullscreenExit",{value:e.$container.querySelector(".jessibuca-fullscreen-exit")}),Object.defineProperty(t,"$record",{value:e.$container.querySelector(".jessibuca-record")}),Object.defineProperty(t,"$recordStop",{value:e.$container.querySelector(".jessibuca-record-stop")}),Object.defineProperty(t,"$screenshot",{value:e.$container.querySelector(".jessibuca-screenshot")}),Object.defineProperty(t,"$speed",{value:e.$container.querySelector(".jessibuca-speed")})})(e,this),Et(e,this),t=this,Object.defineProperty(t,"controlsRect",{get:()=>t.$controls.getBoundingClientRect()}),((e,t)=>{const{events:{proxy:i},debug:o}=e;function r(e){const{bottom:i,height:o}=t.$volumePanel.getBoundingClientRect(),{height:r}=t.$volumeHandle.getBoundingClientRect();return le(i-e.y-r/2,0,o-r/2)/(o-r)}i(window,["click","contextmenu"],(i=>{i.composedPath().indexOf(e.$container)>-1?t.isFocus=!0:t.isFocus=!1})),i(window,"orientationchange",(()=>{setTimeout((()=>{e.resize()}),300)})),i(t.$controls,"click",(e=>{e.stopPropagation()})),i(t.$pause,"click",(t=>{e.pause()})),i(t.$play,"click",(t=>{e.play()})),i(t.$playBig,"click",(t=>{e.play()})),i(t.$volume,"mouseover",(()=>{t.$volumePanelWrap.classList.add("jessibuca-volume-panel-wrap-show")})),i(t.$volume,"mouseout",(()=>{t.$volumePanelWrap.classList.remove("jessibuca-volume-panel-wrap-show")})),i(t.$volumeOn,"click",(i=>{i.stopPropagation(),ue(t.$volumeOn,"display","none"),ue(t.$volumeOff,"display","block"),e.lastVolume=e.volume,e.volume=0})),i(t.$volumeOff,"click",(i=>{i.stopPropagation(),ue(t.$volumeOn,"display","block"),ue(t.$volumeOff,"display","none"),e.volume=e.lastVolume||.5})),i(t.$screenshot,"click",(t=>{t.stopPropagation(),e.video.screenshot()})),i(t.$volumePanel,"click",(t=>{t.stopPropagation(),e.volume=r(t)})),i(t.$volumeHandle,"mousedown",(()=>{t.isVolumeDroging=!0})),i(t.$volumeHandle,"mousemove",(i=>{t.isVolumeDroging&&(e.volume=r(i))})),i(document,"mouseup",(()=>{t.isVolumeDroging&&(t.isVolumeDroging=!1)})),i(t.$record,"click",(t=>{t.stopPropagation(),e.recording=!0})),i(t.$recordStop,"click",(t=>{t.stopPropagation(),e.recording=!1})),i(t.$fullscreen,"click",(t=>{t.stopPropagation(),e.fullscreen=!0})),i(t.$fullscreenExit,"click",(t=>{t.stopPropagation(),e.fullscreen=!1}))})(e,this),this.movement=!1,this.transform=!1,this.zoom=1,e._opt.hotKey&&((e,t)=>{const{events:{proxy:i}}=e,o={};function r(e,t){o[e]?o[e].push(t):o[e]=[t]}r(te,(()=>{e.fullscreen&&(e.fullscreen=!1)})),r(ie,(()=>{e.volume+=.05})),r(oe,(()=>{e.volume-=.05})),i(window,"keydown",(e=>{if(t.isFocus){const t=document.activeElement.tagName.toUpperCase(),i=document.activeElement.getAttribute("contenteditable");if("INPUT"!==t&&"TEXTAREA"!==t&&""!==i&&"true"!==i){const t=o[e.keyCode];t&&(e.preventDefault(),t.forEach((e=>e())))}}}))})(e,this),this.player.debug.log("Control","init")}destroy(){const e=this.player.$container;this.$poster&&e.contains(this.$poster)&&this.player.$container.removeChild(this.$poster),this.$loading&&e.contains(this.$loading)&&this.player.$container.removeChild(this.$loading),console.log(this.$controls),this.$controls&&e.contains(this.$controls)&&this.player.$container.removeChild(this.$controls),this.player.debug.log("control","destroy")}autoSize(){const e=this.player;e.$container.style.padding="0 0";const t=e.width,i=e.height,o=t/i,r=e.audio.$videoElement.width/e.audio.$videoElement.height;if(o>r){const o=(t-i*r)/2;e.$container.style.padding=`0 ${o}px`}else{const o=(i-t/r)/2;e.$container.style.padding=`${o}px 0`}}}Rt(".jessibuca-container{position:relative;width:100%;height:100%;overflow:hidden}.jessibuca-container.jessibuca-fullscreen-web{position:fixed;z-index:9999;left:0;top:0;right:0;bottom:0;width:100%!important;height:100%!important;background:#000}");const kt=()=>"undefined"!=typeof navigator&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,xt=()=>"wakeLock"in navigator;class Bt{constructor(e){if(this.player=e,this.enabled=!1,xt()){this._wakeLock=null;const e=()=>{null!==this._wakeLock&&"visible"===document.visibilityState&&this.enable()};document.addEventListener("visibilitychange",e),document.addEventListener("fullscreenchange",e)}else kt()?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("title","No Sleep"),this.noSleepVideo.setAttribute("playsinline",""),this._addSourceToVideo(this.noSleepVideo,"webm","data:video/webm;base64,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"),this._addSourceToVideo(this.noSleepVideo,"mp4","data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"),this.noSleepVideo.addEventListener("loadedmetadata",(()=>{this.noSleepVideo.duration<=1?this.noSleepVideo.setAttribute("loop",""):this.noSleepVideo.addEventListener("timeupdate",(()=>{this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())}))})))}_addSourceToVideo(e,t,i){var o=document.createElement("source");o.src=i,o.type=`video/${t}`,e.appendChild(o)}get isEnabled(){return this.enabled}enable(){const e=this.player.debug;if(xt())return navigator.wakeLock.request("screen").then((t=>{this._wakeLock=t,this.enabled=!0,e.log("wakeLock","Wake Lock active."),this._wakeLock.addEventListener("release",(()=>{e.log("wakeLock","Wake Lock released.")}))})).catch((t=>{throw this.enabled=!1,e.error("wakeLock",`${t.name}, ${t.message}`),t}));if(kt())return this.disable(),this.noSleepTimer=window.setInterval((()=>{document.hidden||(window.location.href=window.location.href.split("#")[0],window.setTimeout(window.stop,0))}),15e3),this.enabled=!0,Promise.resolve();return this.noSleepVideo.play().then((e=>(this.enabled=!0,e))).catch((e=>{throw this.enabled=!1,e}))}disable(){const e=this.player.debug;xt()?(this._wakeLock&&this._wakeLock.release(),this._wakeLock=null):kt()?this.noSleepTimer&&(e.warn("wakeLock","NoSleep now disabled for older iOS devices."),window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause(),this.enabled=!1}}function Mt(e){this.pc=new RTCPeerConnection(e),this.time={__start:Date.now(),__duration:null,__interval:36e5,__prevClear:null}}function It(e){Mt.call(this,e),this.pc.addTransceiver("video",{direction:"recvonly"})}It.prototype.generateOffer=async function(e,t){return"function"==typeof e&&(t=e,e=void 0),await this.pc.setLocalDescription(await this.pc.createOffer(e)),t&&t(this.pc.localDescription),this.pc.localDescription},It.prototype.processAnswer=async function(e,t){if("string"==typeof e&&(e={sdp:e}),!e.sdp)throw new Error("sdp 不能为空！");return await this.pc.setRemoteDescription(new RTCSessionDescription(e)),t&&t(!0),!0},It.prototype.destroy=function(){this.pc.close(),this.pc.onicecandidate=null,this.pc=!1,this.pc=null};const Lt=new WeakMap;async function _t(e){const t=function(e){const t=new URL(e);if(t.origin&&"null"!==t.origin)return e.indexOf("webrtc/play")>-1?e:e.startsWith("streamPath")?`${window.location.origin}/webrtc-api/webrtc/play${t.search}`:`${window.location.origin}/webrtc-api/webrtc/play?streamPath=${t.pathname.substr(1)}`;{let e=t.pathname,i="",o=0;if(t.pathname.startsWith("//")&&(e=t.pathname.substr(2)),o=e.indexOf("/"),i=e.substring(o+1),e)return`${window.location.origin}/webrtc-api/webrtc/play?streamPath=${i}`;console.log("url is Error for webRTC！")}}(e._opt.url),i=e._opt.webRTCRefreshTime;let o=e.$container.$videoElement,r=o;Lt.set(o,new It);let n=null;function a(t){!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{};const{iceCandidateError:o=i,connectionStateFailed:r=i,iceConnectionStateFailed:n=i,framesDroppedFailed:a=i}=t;e.addEventListener("icecandidateerror",(async function(){o(error),console.error(`iceError: => { \n  errorText: ${error.errorText}, \n  errorCode: ${error.errorCode} \n}`)})),e.addEventListener("connectionstatechange",(async function(){const e=this.connectionState;console.debug("connection: => "+JSON.stringify(e,null,2)),"failed"===e&&(r(),this.restartIce())})),e.addEventListener("iceconnectionstatechange",(async function(){const t=e.iceConnectionState;console.debug("iceConnection: => "+JSON.stringify(t,null,2)),"failed"===t&&n()})),e.addEventListener("icegatheringstatechange",(async function(){let e="Unknown";switch(this.iceGatheringState){case"new":case"complete":e="Idle";break;case"gathering":e="Determining route"}console.debug("iceGathering: => "+e)})),e.addEventListener("signalingstatechange",(async function(){const e=this.signalingState;console.debug("signaling: => "+JSON.stringify(e,null,2))}));let s=0;async function A(){e.getStats(null).then((e=>{e.forEach((e=>{}))}));const t=e.getReceivers().find((e=>e.track&&"video"===e.track.kind)),i=e.getSenders().find((e=>e.track&&"video"===e.track.kind));t&&(await t.getStats()).forEach((e=>{if(e.type,"inbound-rtp"===e.type){const{framesDecoded:t,framesDropped:i,framesPerSecond:o,framesReceived:r}=e;o||(s>6&&a(),s++)}})),i&&(await i.getStats()).forEach((e=>{}))}setInterval(A,1e3)}(t,{connectionStateFailed:()=>{e.loading=!0,c(),console.log("-------- webRTCErrorHandle -----------")},framesDroppedFailed:()=>{e.loading=!0,c(),console.log("-------- framesDroppedFailed -----------")}})}function s(t,i){clearTimeout(null),"video"===t.track.kind&&(e.$container.appendChild(i),o.srcObject=t.streams[0],o.play(),e.playing||(e.playing=!0))}function A(){clearTimeout(e.__deleteWebRTCTimer),r.srcObject=void 0,r.src="",r.load(),r&&(console.log(r),e.video&&e.video.destroyVideo&&e.video.destroyVideo(r),Lt.has(r)&&(Lt.get(r).destroy(),Lt.delete(r))),r=o}async function c(){e.__deleteWebRTCTimer=setTimeout(A,1e3),e.video=new Re(e),o=e.video.$videoElement,Lt.set(o,Lt.get(o)),Lt.delete(o),Lt.set(o,new It),clearTimeout(n),a(Lt.get(o).pc),Lt.get(o).pc.ontrack=function(e){s(e,o)},await d(Lt.get(o)),n=setTimeout(c,i)}async function d(i){return new Promise(((r,n)=>{i?i.generateOffer((async n=>{try{let a=await fetch(t,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json;charset=UTF-8"}}).then((e=>e.json()));a.errmsg?(console.error(a.errmsg),A(),e.emit("connectError",{code:5015,errorMsg:"stream not found!"}),e.destroy(),Lt.delete(o)):await i.pc.setRemoteDescription(new RTCSessionDescription(a)),e.loading=!1,r(a),a=null,i=null}catch(e){clearTimeout(i.restartTimer),console.error(e),i.restartTimer=setTimeout((async()=>{const e=await d(i);r(e),clearTimeout(i.restartTimer)}),1e3)}})):n()}))}console.log(e._opt),a(Lt.get(o).pc),n=setTimeout(c,i),Lt.get(o).pc.ontrack=function(e){s(e,o)},d(Lt.get(o))}class Dt extends ye{constructor(e,t){var i;if(super(),this.$container=e,this._opt=Object.assign({},c,t),this.debug=new re(this),this.weak=new WeakMap,this._opt.useWCS&&(this._opt.useWCS="VideoEncoder"in window),this._opt.useMSE&&(this._opt.useMSE=window.MediaSource&&window.MediaSource.isTypeSupported(Y)),this._opt.useMSE?(this._opt.useWCS&&this.debug.log("Player","useWCS set true->false"),this._opt.forceNoOffscreen||this.debug.log("Player","forceNoOffscreen set false->true"),this._opt.useWCS=!1,this._opt.forceNoOffscreen=!0):this._opt.useWCS,this._opt.forceNoOffscreen||("undefined"==typeof OffscreenCanvas?(this._opt.forceNoOffscreen=!0,this._opt.useOffscreen=!1):this._opt.useOffscreen=!0),this._opt.hasControl=this._hasControl(),this._loading=!1,this._playing=!1,this._hasLoaded=!1,this._checkHeartTimeout=null,this._checkLoadingTimeout=null,this._startBpsTime=null,this._isPlayingBeforePageHidden=!1,this._stats={buf:0,fps:0,abps:0,vbps:0,ts:0},this._times={playInitStart:"",playStart:"",streamStart:"",streamResponse:"",demuxStart:"",decodeStart:"",videoStart:"",playTimestamp:"",streamTimestamp:"",streamResponseTimestamp:"",demuxTimestamp:"",decodeTimestamp:"",videoTimestamp:"",allTimestamp:""},this._videoTimestamp=0,this._audioTimestamp=0,i=this,Object.defineProperty(i,"rect",{get:()=>{const e=i.$container.getBoundingClientRect();return e.width=Math.max(e.width,i.$container.clientWidth),e.height=Math.max(e.height,i.$container.clientHeight),e}}),["bottom","height","left","right","top","width"].forEach((e=>{Object.defineProperty(i,e,{get:()=>i.rect[e]})})),this.events=new ne(this),this.video=new Re(this),this.audio=new ke(this),this.recorder=new De(this),this.decoderWorker=new Ue(this),this.stream=null,this.demux=null,!this._opt.useWebRTC){this._opt.useWCS&&(this.webcodecsDecoder=new ze(this));try{this._opt.useMSE&&(this.mseDecoder=new Oe(this))}catch(e){console.log(e)}}this.control=new Tt(this),this.keepScreenOn=new Bt(this),(e=>{try{const t=()=>{e.emit(T.fullscreen,e.fullscreen),e.fullscreen?e._opt.useMSE&&e.resize():e.resize()};ae.on("change",t),e.events.destroys.push((()=>{ae.off("change",t)}))}catch(e){}if(e.on(R.decoderWorkerInit,(()=>{e.debug.log("player","has loaded"),e._hasLoaded=!0})),e.on(R.play,(()=>{e.loading=!1})),e.on(R.fullscreen,(t=>{if(t)try{ae.request(e.$container).then((()=>{})).catch((t=>{e.webFullscreen=!0}))}catch(t){e.webFullscreen=!0}else try{ae.exit().then((()=>{})).catch((()=>{e.webFullscreen=!1}))}catch(t){e.webFullscreen=!1}})),e.on(R.webFullscreen,(t=>{if(t){e.$container.classList.add("webmediaplayer-fullscreen-web");const{clientHeight:t,clientWidth:i}=document.body,{clientHeight:o,clientWidth:r}=e.video.$videoElement;if(i/t<r/o){const n=Math.min(t/r,i/o);e.video.$videoElement.style.transform=`rotate(90deg) scale(${n},${n})`}}else e.$container.classList.remove("webmediaplayer-fullscreen-web"),e.video.$videoElement.style.transform=null})),e.on(R.resize,(()=>{e.video.resize()})),e._opt.debug){const t=[R.timeUpdate];Object.keys(R).forEach((i=>{e.on(R[i],(o=>{t.includes(i)||e.debug.log("player events",R[i],o)}))})),Object.keys(k).forEach((t=>{e.on(k[t],(i=>{e.debug.log("player event error",k[t],i)}))}))}})(this),(e=>{const{_opt:t,debug:i,events:{proxy:o}}=e;t.supportDblclickFullscreen&&o(e.$container,"dblclick",(()=>{e.fullscreen=!e.fullscreen})),o(document,"visibilitychange",(()=>{t.hiddenAutoPause&&(i.log("visibilitychange",document.visibilityState,e._isPlayingBeforePageHidden),"visible"===document.visibilityState?e._isPlayingBeforePageHidden&&e.play():(e._isPlayingBeforePageHidden=e.playing,e.playing&&e.pause()))})),o(window,"fullscreenchange",(()=>{null!==e.keepScreenOn&&"visible"===document.visibilityState&&e.enableWakeLock()}))})(this),this._opt.useWCS&&this.debug.log("Player","use WCS"),this._opt.useMSE&&this.debug.log("Player","use MSE"),this._opt.useOffscreen&&this.debug.log("Player","use offscreen"),"function"==typeof this._opt.controlReset&&this._opt.controlReset(this),this.debug.log("Player options",this._opt)}destroy(){this._loading=!1,this._playing=!1,this._hasLoaded=!1,this._times={playInitStart:"",playStart:"",streamStart:"",streamResponse:"",demuxStart:"",decodeStart:"",videoStart:"",playTimestamp:"",streamTimestamp:"",streamResponseTimestamp:"",demuxTimestamp:"",decodeTimestamp:"",videoTimestamp:"",allTimestamp:""},this.stream&&(this.stream.destroy(),this.stream=null),this.decoderWorker&&(this.decoderWorker.destroy(),this.decoderWorker=null),this.video&&(this.video.destroy(),this.video=null),this.audio&&(this.audio.destroy(),this.audio=null),this.recorder&&(this.recorder.destroy(),this.recorder=null),this.control&&(this.control.destroy(),this.control=null),this.webcodecsDecoder&&(this.webcodecsDecoder.destroy(),this.webcodecsDecoder=null),this.mseDecoder&&(this.mseDecoder.destroy(),this.mseDecoder=null),this.demux&&(this.demux.destroy(),this.demux=null),this.events&&(this.events.destroy(),this.events=null),this.clearCheckHeartTimeout(),this.clearCheckLoadingTimeout(),this.releaseWakeLock(),this.keepScreenOn=null,this.resetStats(),this._audioTimestamp=0,this._videoTimestamp=0,this.emit("destroy"),this.off(),this.debug.log("play","destroy end")}set fullscreen(e){this.emit(R.fullscreen,e)}get fullscreen(){return document.isFullScreen||document.mozIsFullScreen||document.webkitIsFullScreen||this.webFullscreen}set webFullscreen(e){this.emit(R.webFullscreen,e)}get webFullscreen(){return this.$container.classList.contains("jessibuca-fullscreen-web")}get loaded(){return this._hasLoaded}set playing(e){e&&(this.loading=!1),this.playing!==e&&(this._playing=e,this.emit(R.playing,e),this.emit(R.volumechange,this.volume),e?this.emit(R.play):this.emit(R.pause))}get playing(){return this._playing}get volume(){return this.audio&&this.audio.volume}set volume(e){this.audio.setVolume(e)}set loading(e){this.loading!==e&&(this._loading=e,this.emit(R.loading,this._loading))}get loading(){return this._loading}set recording(e){this.playing&&(e?this.recorder.startRecord():this.recorder.stopRecordAndSave())}get recording(){return this.recorder&&this.recorder.recording}set audioTimestamp(e){null!==e&&(this._audioTimestamp=e)}get audioTimestamp(){return this._audioTimestamp}set videoTimestamp(e){null!==e&&(this._videoTimestamp=e,this._opt.useWCS||this._opt.useMSE||this.audioTimestamp&&this.videoTimestamp&&this.audio.emit(R.videoSyncAudio,{audioTimestamp:this.audioTimestamp,videoTimestamp:this.videoTimestamp,diff:this.audioTimestamp-this.videoTimestamp}))}get videoTimestamp(){return this._videoTimestamp}updateOption(e){this._opt=Object.assign({},this._opt,e)}init(){return new Promise(((e,t)=>{this.stream||(this.stream=new Ie(this)),this.demux||(this.demux=new He(this)),this._opt.useWCS&&(this.webcodecsDecoder||(this.webcodecsDecoder=new ze(this))),this._opt.useMSE&&(this.mseDecoder||(this.mseDecoder=new Oe(this))),this.decoderWorker?e():(this.decoderWorker=new Ue(this),this.once(R.decoderWorkerInit,(()=>{e()})))}))}replay(){try{this.video.resetVideo(),this.stream&&(this.stream.destroy(),this.stream=null),this.decoderWorker&&(this.decoderWorker.destroy(),this.decoderWorker=null),this.demux&&(this.demux.destroy(),this.demux=null),this.mseDecoder&&(this.mseDecoder.destroy(),this.mseDecoder=null),this.clearCheckHeartTimeout(),this.play(this._opt.url)}catch(e){console.error(e)}}play(e){return new Promise(((t,i)=>{if(!e&&!this._opt.url)return i();this.loading=!0,this.playing=!1,this._times.playInitStart=de(),e||(e=this._opt.url),this._opt.url=e,this.clearCheckHeartTimeout(),this._opt.useWebRTC?this.init().then((()=>{this._times.playStart=de(),this._opt.isNotMute&&this.mute(!1),_t(this)})):this.init().then((()=>{this._times.playStart=de(),this._opt.isNotMute&&this.mute(!1),this.webcodecsDecoder&&this.webcodecsDecoder.once(k.webcodecsH265NotSupport,(()=>{this.emit(k.webcodecsH265NotSupport),this.emit(R.error,k.webcodecsH265NotSupport)})),this.mseDecoder&&this.mseDecoder.once(k.mediaSourceH265NotSupport,(()=>{this.emit(k.mediaSourceH265NotSupport),this.emit(R.error,k.mediaSourceH265NotSupport)})),this.enableWakeLock(),this.stream&&this.stream.fetchStream(e),this.checkLoadingTimeout(),this.stream&&(this.stream.once(k.fetchError,(e=>{i(e)})),this.stream.once(k.websocketError,(e=>{i(e)})),this.stream.once(R.streamSuccess,(()=>{t(),this._times.streamResponse=de(),this._opt.useMSE&&this.video.play()})))})).catch((e=>{i(e)}))}))}close(){return new Promise(((e,t)=>{this._close().then((()=>{this.video.clearView(),e()}))}))}_close(){return new Promise(((e,t)=>{this.stream&&(this.stream.destroy(),this.stream=null),this.demux&&(this.demux.destroy(),this.demux=null),this.decoderWorker&&(this.decoderWorker.destroy(),this.decoderWorker=null),this.webcodecsDecoder&&(this.webcodecsDecoder.destroy(),this.webcodecsDecoder=null),this.mseDecoder&&(this.mseDecoder.destroy(),this.mseDecoder=null),this.clearCheckHeartTimeout(),this.clearCheckLoadingTimeout(),this.playing=!1,this.loading=!1,this.recording=!1,this.audio.pause(),this.releaseWakeLock(),this.resetStats(),this._audioTimestamp=0,this._videoTimestamp=0,this._times={playInitStart:"",playStart:"",streamStart:"",streamResponse:"",demuxStart:"",decodeStart:"",videoStart:"",playTimestamp:"",streamTimestamp:"",streamResponseTimestamp:"",demuxTimestamp:"",decodeTimestamp:"",videoTimestamp:"",allTimestamp:""},setTimeout((()=>{e()}),0)}))}pause(e){return e?this.close():this._close()}mute(e){this.audio.mute(e)}resize(){this.video&&this.video.resize()}startRecord(e,t){this.recording||(this.recorder.setFileName(e,t),this.recording=!0)}stopRecordAndSave(){this.recording&&(this.recording=!1)}_hasControl(){let e=!1,t=!1;return Object.keys(this._opt.operateBtns).forEach((e=>{this._opt.operateBtns[e]&&(t=!0)})),(this._opt.showBandwidth||this._opt.text||t)&&(e=!0),e}checkHeart(){this.clearCheckHeartTimeout(),this.checkHeartTimeout()}checkHeartTimeout(){this._checkHeartTimeout=setTimeout((()=>{this.pause(!1).then((()=>{this.emit(R.timeout,R.delayTimeout),this.emit(R.delayTimeout)}))}),1e3*this._opt.heartTimeout)}clearCheckHeartTimeout(){this._checkHeartTimeout&&(clearTimeout(this._checkHeartTimeout),this._checkHeartTimeout=null)}checkLoadingTimeout(){this._checkLoadingTimeout=setTimeout((()=>{this.pause(!1).then((()=>{this.emit(R.timeout,R.loadingTimeout),this.emit(R.loadingTimeout)}))}),1e3*this._opt.loadingTimeout)}clearCheckLoadingTimeout(){this._checkLoadingTimeout&&(clearTimeout(this._checkLoadingTimeout),this._checkLoadingTimeout=null)}handleRender(){this.loading&&(this.emit(R.start),this.loading=!1,this.clearCheckLoadingTimeout()),this.playing||(this.playing=!0),this.checkHeart()}updateStats(e){e=e||{},this._startBpsTime||(this._startBpsTime=de()),be(e.ts)&&(this._stats.ts=e.ts),be(e.buf)&&(this._stats.buf=e.buf),e.fps&&(this._stats.fps+=1),e.abps&&(this._stats.abps+=e.abps),e.vbps&&(this._stats.vbps+=e.vbps);const t=de();t-this._startBpsTime<1e3||(this.emit(R.stats,this._stats),this.emit(R.performance,function(e){let t=0;return e>=24?t=2:e>=15&&(t=1),t}(this._stats.fps)),this._stats.fps=0,this._stats.abps=0,this._stats.vbps=0,this._startBpsTime=t)}resetStats(){this._startBpsTime=null,this._stats={buf:0,fps:0,abps:0,vbps:0,ts:0}}enableWakeLock(){this._opt.keepScreenOn&&this.keepScreenOn.enable()}releaseWakeLock(){this._opt.keepScreenOn&&this.keepScreenOn.disable()}handlePlayToRenderTimes(){const e=this._times;e.playTimestamp=e.playStart-e.playInitStart,e.streamTimestamp=e.streamStart-e.playStart,e.streamResponseTimestamp=e.streamResponse-e.streamStart,e.demuxTimestamp=e.demuxStart-e.streamResponse,e.decodeTimestamp=e.decodeStart-e.demuxStart,e.videoTimestamp=e.videoStart-e.decodeStart,e.allTimestamp=e.videoStart-e.playInitStart,this.emit(R.playToRenderTimes,e)}}class zt extends ye{constructor(e){super();let t=e,i=e.container;if("string"==typeof e.container&&(i=document.querySelector(e.container)),!i)throw new Error("Jessibuca need container option");i.classList.add("jessibuca-container"),delete t.container,be(t.videoBuffer)&&(t.videoBuffer=1e3*Number(t.videoBuffer)),be(t.timeout)&&(ge(t.loadingTimeout)&&(t.loadingTimeout=t.timeout),ge(t.heartTimeout)&&(t.heartTimeout=t.timeout)),t.timeOffLineReconnect=ve(t.offLineReconnectTime,c.offLineReconnectTime),t.webRTCRefreshTime=ve(t.webRTCRefreshTime,c.webRTCRefreshTime),this._opt=t,this.$container=i,this.href=null,this.events=new ne(this),this.player=new Dt(i,t),this._bindEvents()}destroy(){this.player.destroy(),this.player=null,this.off()}_bindEvents(){Object.keys(T).forEach((e=>{this.player.on(T[e],(t=>{this.emit(e,t)}))}))}setDebug(e){this.player.updateOption({isDebug:!!e})}mute(){this.player.mute(!0)}cancelMute(){this.player.mute(!1)}setVolume(e){this.player.volume=e}audioResume(){this.player.audio.audioEnabled(!0)}setTimeout(e){e=Number(e),this.player.updateOption({timeout:e,loadingTimeout:e,heartTimeout:e})}setScaleMode(e){let t={isFullResize:!1,isResize:!1};switch(e=Number(e)){case U:t.isFullResize=!1,t.isResize=!1;break;case W:t.isFullResize=!1,t.isResize=!0;break;case Q:t.isFullResize=!0,t.isResize=!0}this.player.updateOption(t),this.resize()}pause(){return this.player.pause()}close(){return this._opt.url="",this.player.close()}clearView(){this.player.video.clearView()}play(e){const t="34020000001420000123/34020000001320000001";if(!0===this._opt.useWebRTC){if(!(e.startsWith("rtmp:")||e.startsWith("rtsp:")||e.indexOf("streamPath")>-1))return console.error(`WebRTC: url("${e}") 格式不正确！`),console.warn("参考格式： rtmp://xxx.xxx.x.xx:1935/"+t),console.warn("参考格式： rtsp://xxx.xxx.x.xx:554/"+t),void console.warn("参考格式： http://xxx.xxx.x.xx:8081/api/webrtc/play?streamPath="+t);console.log("WebRTC")}else{if(this._opt.useMSE=!0,this._opt.useWCS=!1,!e.startsWith("ws:"))return console.error(`WS-RAW: url("${e}") 格式不正确！`),console.warn("参考格式： ws://xxx.xxx.x.xx:80/jessica/"+t),void console.warn(`参考格式： ws://xxx.xxx.x.xx:80/jessica/${t}.flv`);console.log("WS-RAW")}return new Promise(((t,i)=>{if(!e&&!this._opt.url)return this.emit(R.error,k.playError),void i();if(e){if(!this._opt.url)return this._play(e);e===this._opt.url?this.player.playing?t():(this.clearView(),this.player.play(this._opt.url).then((()=>{t()})).catch((()=>{this.player.pause().then((()=>{i()}))}))):this.player.pause().then((()=>(this.clearView(),this._play(e)))).catch((()=>{i()}))}else this.player.play(this._opt.url).then((()=>{t()})).catch((()=>{this.player.pause().then((()=>{i()}))}))}))}_play(e){return new Promise(((t,i)=>{this._opt.url=e;const o=0===e.indexOf("http"),r=o?a:n,c=o||-1!==e.indexOf(".flv")||this._opt.isFlv?s:A;this.player.updateOption({protocol:r,demuxType:c}),this.player.once(k.mediaSourceH265NotSupport,(()=>{this.close()})),this.player.once(k.webcodecsH265NotSupport,(()=>{this.close()})),this.hasLoaded()?this.player.play(e).then((()=>{t()})).catch((()=>{this.player.pause().then((()=>{i()}))})):this.player.once(R.decoderWorkerInit,(()=>{this.player.play(e).then((()=>{t()})).catch((()=>{this.player.pause().then((()=>{i()}))}))}))}))}resize(){this.player&&this.player.resize()}setBufferTime(e){e=Number(e),this.player.updateOption({videoBuffer:1e3*e})}setRotate(e){e=parseInt(e,10);this._opt.rotate!==e&&-1!==[0,90,270].indexOf(e)&&(this.player.updateOption({rotate:e}),this.resize())}hasLoaded(){return this.player.loaded}setKeepScreenOn(){this.player.updateOption({keepScreenOn:!0})}setFullscreen(e){const t=!!e;this.player.fullscreen!==t&&(this.player.fullscreen=t)}screenshot(e,t,i,o){return this.player.video.screenshot(e,t,i,o)}startRecord(e,t){return new Promise(((i,o)=>{this.player.playing?(this.player.startRecord(e,t),i()):o()}))}stopRecordAndSave(){this.player.recording&&this.player.stopRecordAndSave()}isPlaying(){return this.player.playing}isMute(){return this.player.audio.isMute}isRecording(){return this.player.recorder.recording}}return r(zt,"ERROR",k),r(zt,"TIMEOUT",{loadingTimeout:R.loadingTimeout,delayTimeout:R.delayTimeout}),window.Jessibuca=zt,window.Sullivan=zt,zt}));
